(()=>{const y=null!==(G=sessionStorage.getItem("bis_data"))?JSON.parse(G):null;var G;const Z=document.querySelector("script[bis_id]");window.bisData={id:Z?Z.getAttribute("bis_id")+"_w":null,html5TargetUrlDetectionConfig:y?y.config.html5TargetUrlDetectionConfig:null};const Q=window.bisData.html5TargetUrlDetectionConfig,W=window.bisData.id;function g(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function z(y,G,Z,Q){if(!window.bisData)return;let W=window.bisData.html5TargetUrlDetectionConfig.TARGET_URL_CLICK_ELEMENTS_SELECTOR;var z=document.querySelectorAll(W);if(z.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.bisData.clickTargetUrlProcessed=!1;var c=function(W){if(window.bisData.clickTargetUrl.some((y=>y.href===W)))return null;if(window.bisData.clickTargetUrl.push({href:W,square:window.bisData.elementSquare}),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length){let W="GET_WINDOW_TARGET_URL"===Q.type?{targetUrlList:window.bisData.clickTargetUrl}:{chainId:Q.content.chainId,clickTargetUrl:window.bisData.clickTargetUrl},z={posdMessageId:"PANELOS_MESSAGE",posdHash:g(),type:`${Q.type}_RESPOND`,from:y,to:y.substring(0,y.length-2),content:W};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(z)),G.postMessage&&G.postMessage(z,Z)}return null};window.open=c;for(var A=0;A<z.length&&0===window.bisData.clickTargetUrl.length;A++)try{if(z[A]&&z[A].click&&z[A].getBoundingClientRect){let y=z[A].getBoundingClientRect();y.width>40&&y.height>40&&(window.bisData.elementSquare=y.width*y.height,window.open==c&&z[A].click())}}catch(y){}setTimeout((()=>{window.open=window.bisData.origWindowOpen}),1e3),window.bisData.clickTargetUrlProcessed=!0}}window.addEventListener("message",(function(y){try{var G=W,Z=y.data;let A=y.source,p=y.origin;if(void 0!==(c=Z)&&void 0!==c.posdMessageId&&void 0!==c.from&&void 0!==c.to&&void 0!==c.type&&void 0!==c.content&&"PANELOS_MESSAGE"===c.posdMessageId&&Z.to===G)if("GET_WINDOW_TARGET_URL"===Z.type){let W=function(y,G,Z){let Q=m(G,[W,g,z,c,A,p],Z);Q&&Q.length;return Q;function W(y){if(void 0!==y.clickTag&&K(y.clickTag))return{href:y.clickTag,square:1000001}}function g(y){if(void 0!==y.adData){if(void 0!==y.adData.destination_url&&K(y.adData.destination_url))return{href:y.adData.destination_url,square:1000001};if(void 0!==y.adData.redirect_url&&K(y.adData.redirect_url))return{href:y.adData.redirect_url,square:1000001}}}function z(y){if(void 0!==y.BF&&void 0!==y.BF.Parameters&&void 0!==y.BF.Parameters.targeturl&&K(y.BF.Parameters.targeturl))return{href:y.BF.Parameters.targeturl,square:1000001}}function c(y){if(void 0!==y.ADAPT&&void 0!==y.ADAPT.symbols&&void 0!==y.ADAPT.symbols.stage&&void 0!==y.ADAPT.symbols.stage.clickUrl&&K(y.ADAPT.symbols.stage.clickUrl))return{href:y.ADAPT.symbols.stage.clickUrl,square:1000001}}function A(y){if(void 0!==y.admixAPI&&void 0!==y.admixAPI.ownerBanner&&void 0!==y.admixAPI.ownerBanner.clickUrl&&K(y.admixAPI.ownerBanner.clickUrl))return{href:y.admixAPI.ownerBanner.clickUrl,square:1000001}}function p(G,Z){let Q=I(y,G,Z);if(K(Q))return{href:Q,square:999999}}function K(y){return"string"==typeof y&&y.length>0&&(-1!==y.indexOf("http")||-1!==y.indexOf("//"))}function m(y,G,Z){let Q=[];for(let W of G)try{let G=W(y,Z);G&&G.href&&Q.push(G)}catch(y){}return Q}function I(y,G,Z){let Q=n(G,Z);return Q&&0!==Q.length?U(G,Q,Z):null}function U(y,G,Z,Q=[]){let W=Z.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(Q.length>W)return null;for(let W of G)try{let G=y[W];if(!G)return null;let g=Q.concat(W);if("object"==typeof G){let y=U(G,Object.getOwnPropertyNames(G),Z,g);if(y)return y}else if("string"==typeof G&&M(W,Z)&&K(G))return G}catch(y){}return null}function M(y,G){let Z=h(y),Q=G.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let y of Q){if(Z===y)return!0}return!1}function h(y){return y.toLowerCase().replace(/[^a-zA-Z]+/g,"")}function n(y,G){let Z=Object.getOwnPropertyNames(y);const Q=G.WINDOW_PROPERTY_NAMES;return Z.filter((y=>Q.indexOf(y)<0))}}(G,window,Q);if(W.length){let Z={posdMessageId:"PANELOS_MESSAGE",posdHash:g(),type:"GET_WINDOW_TARGET_URL_RESPOND",from:G,to:G.substring(0,G.length-2),content:{targetUrlList:W}};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(Z)),y.source.postMessage&&y.source.postMessage(Z,y.origin)}else{if(window.bisData.clickTargetUrlProcessed)return;z(G,A,p,Z)}}else if("GET_WINDOW_CLICK_TARGET_URL"===Z.type){if(window.bisData.clickTargetUrlProcessed)return;z(G,A,p,Z)}}catch(y){}var c}),!1)})();