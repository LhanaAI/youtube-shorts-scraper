(()=>{const y=null!==(G=sessionStorage.getItem("bis_data"))?JSON.parse(G):null;var G;const Z=y?y.config.redditConfig:null,Q=y?y.id+"_w":null;if(null!==Z){function W(y){const G=function(y){const G=function(y){const G=new RegExp(Z.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let Q=y.match(G),W=null;Q&&Q.length&&(W=Q[1]);return W}(y);return{videoId:G,url:y}}(y);!function(y){try{y.detectionTime=Date.now()/1e3|0;let G={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:Q,to:Q.substring(0,Q.length-2),content:y};window.postMessage(G)}catch(y){}}(G)}function g(y){try{const G=JSON.parse(y.content);let Z=[];for(let y of G){const G={};y.source&&y.source.hasOwnProperty("outboundUrl")&&(G.elementId=y.id,G.targetUrl=y.source.outboundUrl,Z.push(G))}!function(y){try{let G={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:Q,to:Q.substring(0,Q.length-2),content:y};window.postMessage(G)}catch(y){}}(Z)}catch(y){}}let z=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],z.apply(this,arguments)};let c=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var y=this;let G=(Q=y.url,new RegExp(Z.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(Q));var Q;let z,A=function(y){return new RegExp(Z.RIGHT_COLUMN.PATH_WITH_AD_URL).test(y)}(y.url);if(!G&&!A)return c.apply(this,arguments);const p=function(){if(A&&4===y.readyState){g({url:y.url,content:""===y.responseType||"text"===y.responseType?y.responseText:""})}else A&&4!==y.readyState?z=setTimeout((()=>p.apply(this,arguments)),0):z&&clearTimeout(z)};return p(),W(y.url),c.apply(this,arguments)}}})();