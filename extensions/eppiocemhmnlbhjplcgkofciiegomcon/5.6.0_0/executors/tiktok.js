(()=>{const y=!!document?.querySelector("script[adblock_use][bis_use]"),G=(()=>{const y=sessionStorage.getItem("bis_data");if(null!==y){return JSON.parse(y)}return null})(),Z=G?.config?`${G.id}_t`:null,Q=G?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},{PARSERS:W=[]}=Q;ParserProcessors={XMLHttpRequest:function(G){const Z=fetch;fetch=async function(Q){let W=Q instanceof Request?Q.url:Q;if("object"==typeof W&&W.href&&(W=W.href),!(y=>{let G=y.replace(/.*\/([gimy]*)$/,"$1"),Z=y.replace(new RegExp("^/(.*?)/"+G+"$"),"$1");return new RegExp(Z,G)})(G.QUERY).test(W))return Z.apply(this,arguments);try{const Q=await Z.apply(this,arguments);if(Q.body instanceof ReadableStream){const Z=Q.clone(),W=await Z.json(),c=W[G.CONTENT_QUERY],A=g(c,G.PATHS_CHECK_AD);if(A?.length&&(z(A,G),y)){W[G.CONTENT_QUERY]=c.filter((y=>!y.isAd));const y=JSON.stringify(W);return new Response(y,{status:Q.status,statusText:Q.statusText,headers:Q.headers})}}return Q}catch(y){return Z.apply(this,arguments)}}}};const g=(y,G)=>{const Z=[];for(let Q of y)G.some((y=>y.reduce(((y,G)=>y&&"object"==typeof y?y[G]:y),Q)))&&Z.push(Q);return Z},z=(y,G)=>{if(y?.length)for(let W of y){const y=c(W,Q.PROPERTIES_FOR_AD_DATA,G.PATHS_GET_PROPERTIES);y&&A(Z,y)}},c=function(y,G,Z){let Q={};for(let W of G){const{NAME:G,PATH_NAME:g,IS_NECESSARY:z}=W,c=Z[g];if(Q[G]=c?.length?c.reduce(((y,G,Z)=>{if(Z===c.length-1&&"PATH_TO_PAGE_LINK"===g){return`https://www.tiktok.com/@${y[G]}`}return y&&"object"==typeof y?y?y[G]:null:y??null}),y):null,z&&!Q[G])return null}return Q},A=(y,G)=>{try{let Z={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:y,to:y.substring(0,y.length-2),content:G};window.postMessage(Z)}catch(y){}};for(let y of W)y.USE&&ParserProcessors[y.TYPE](y)})();