(()=>{const y=(G=sessionStorage.getItem("bis_data"),Z={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==G&&(Z.config=JSON.parse(G)),Z);var G,Z;const Q=y&&y.config?y.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],W=y&&y.config?y.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],g=y&&y.config?`${y.config.id}_i`:null;!(!y||!y.adOpt)&&y.adOpt;let z=0;const c=function(y,G){return function(){!function(y,G,Z){try{let Q={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:Z,from:y,to:y.substring(0,y.length-2),content:G};window.postMessage(Q)}catch(y){}}(g,y,G)}},A=function(y,G){let Z=null;for(let Q of W){const W=Q.NAME,g=Q.PATH_NAME,z=Q.IS_NECESSARY,c=Q.DEFAULT_VALUE;if(Z||(Z={}),"detectionTime"!==W){if(G[g]&&(Z[W]=p(y,G[g],c),z&&!Z[W]))return null}else Z[W]=Date.now()/1e3|0}return Z.headlineText?.length&&(Z.fullText=Z.headlineText+"\n"+Z.fullText),delete Z.headlineText,Z},p=function(y,G,Z){let Q=y;for(let[y,W]of Object.entries(G)){if("*"===W&&Q.length){const Z=G.slice(+y+1),W=Z.length-1;return Q.map((y=>{let G=y;for(let[y,Q]of Object.entries(Z))if(G[Q]&&(G=G[Q]),W===+y&&"string"==typeof G)return G}))}if(Q[W])Q=Q[W];else if(!Q[W]){Q=Z;break}}return Q},K=function(y,G){if(!y||!y.length)return;let Z=null;for(let Q of y){let y="";try{if(I(Q,G.PATH_CHECK_PROPERTIES))Z=A(Q,G.PATHS_GET_PROPERTIES),y=Z.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!G.RULES_TO_GET_FULL_TEXT||!I(Q,G.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;Z=A(Q,G.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),y="INSTAGRAM_FULL_TEXT_DATA"}Z&&setTimeout(c(Z,y),0)}catch(y){}}},m=function(y,G){if(!y||!y.length)return;let Z=[];for(let Q of y){if(!I(Q,G.PATH_CHECK_PROPERTIES))continue;let y=A(Q,G.PATHS_GET_PROPERTIES);y&&(null===y.videoVersions&&delete y.videoVersions,Z.push(y))}Z.length&&setTimeout(c(Z,"INSTAGRAM_STORY_DATA"),0)},I=function(y,G){let Z=!1;for(let Q of G){let G=y,W=Q.length-1;for(let[y,g]of Object.entries(Q))if(g in G&&G[g]){if(G=G[g],W===+y){Z=!0;break}}else{if("*"===g&&G.length&&G.length>1&&!Z&&W===+y){Z=!0;break}Z=!1}if(Z)break}return Z},U={XMLHttpRequest:function(y){let G=XMLHttpRequest.prototype.open,Z=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const y=arguments[0].toLowerCase(),G=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[y]=G,Z.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],G.apply(this,arguments)};let Q=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let G=this.onreadystatechange;return this.onreadystatechange=function(){const Z=function(){const G=y.AD_TYPES_WAYS_TO_PROPERTIES;let Z=y.QUERY;for(let y=0;y<G.length;y++){const Q="QUERY_AD_TYPE_"+y,W=G[y];Z=Z.replace(Q,W.QUERY_URL_PATH)}return new RegExp(Z)}(),Q=y.MATCH_HEADERS,W=this.requestHeaders?Object.keys(this.requestHeaders):null;let g=!1;if(W&&(g=W.some((y=>{if(Q[y]&&Q[y].includes(this.requestHeaders[y]))return!0}))),4===this.readyState&&Z.test(this.responseURL))for(let c of y.AD_TYPES_WAYS_TO_PROPERTIES){const A=this.responseURL.includes(c.QUERY_URL_PATH);if(g||A){let p=this.response.length?JSON.parse(this.response):this.response;function z(y,G){let Z=G;for(let[G,Q]of Object.entries(y))Z&&Z[Q]&&(Z=Z[Q]),"*"===Q&&Z.length&&(Z=Z.map((Z=>z(y.slice(+G+1),Z))));return Z}let I=z(c.PATH_TO_POSTS,p);"story"===c.AD_TYPE&&this.responseURL.includes(c.QUERY_URL_PATH)&&I.length?I.forEach((y=>{y&&m(y,c)})):"feed"===c.AD_TYPE&&K(I,c)}}if(G)return G.apply(this,arguments)},Q.apply(this,arguments)}},script:function(y){function G(){let G=Array.from(document.querySelectorAll("script"));const Z=new RegExp(y.REGEXP_FILTER);let Q=G.filter((y=>y.innerHTML.search(Z)>-1));return Q.length?Q[0]:null}if(z++,"complete"!==document.readyState&&z<15){let G=null;return void(G=setTimeout((()=>{G&&clearTimeout(G),U.script(y)}),200))}let Z=function(){let y=G();return y?JSON.parse(y.innerHTML):null}();let Q=function y(G,Z){let Q=Z;for(let[Z,W]of Object.entries(G))Q&&Q[W]&&(Q=Q[W]),"*"===W&&Q.length&&(Q=Q.map((Q=>y(G.slice(+Z+1),Q))));return Q}(y.PATH_TO_POSTS,Z);K(Q,y)}};for(let y of Q)y.USE&&U[y.TYPE](y)})();