(()=>{const y=function(){let y=sessionStorage.getItem("bis_data");return null!==y?JSON.parse(y):null}(),G=y?y.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PARSERS:[],Z=y?y.config.pinterestConfig.VIDEO_TRAFFIC_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],Q=y?`${y.id}_p`:null;const W=function(y,G){let Q=null;for(let W of Z){const Z=W.NAME,z=W.PATH_NAME;Q||(Q={}),"detectionTime"!==Z?"videoId"===Z&&Q.videoUrl?Q[Z]=c(Q.videoUrl,G[z]):Q[Z]=g(y,G[z]):Q[Z]=Date.now()/1e3|0}return Q},g=function(y,G){let Z=y;for(let y of G)if(Z[y])Z=Z[y];else if(!Z[y]){Z=null;break}return Z},z=function(y,G){return function(){!function(y,G,Z){try{let Q={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:Z,from:y,to:y.substring(0,y.length-2),content:G};window.postMessage(Q)}catch(y){}}(Q,y,G)}},c=function(y,G){if(!y)return"";const Z=new RegExp(G);let Q=y.match(Z);return Q&&Q[1]?Q[1]:""},A=function(y,G){let Z=null;const Q=Object.keys(y);for(let g of Q){const Q=y[g];G.CHECK_PROPERTIES.every((y=>Q[y]))&&(Z=W(Q,G.PATHS_GET_PROPERTIES),Z&&setTimeout(z(Z,"PINTEREST_VIDEO_DATA"),0))}},p={script:function(y){const G=Array.from(document.querySelectorAll(y.QUERY));if(G.length)for(let Z of G)try{if(!Z.text||Z.text&&"{"!==Z.text[0])return;Z.setAttribute("data-bis-activated","");let G=JSON.parse(Z.text),Q={};for(let Z of y.PATH_TO_PINS){let y=!1;Q=G;for(let G of Z){const W=Z.indexOf(G);if(!Q[G])break;Q=Q[G],W===Z.length-1&&(y=!0)}if(y)break}setTimeout((()=>A(Q,y)),0)}catch(y){}},XMLHttpRequest:function(y){let G=XMLHttpRequest.prototype.open,Z=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const y=arguments[0].toLowerCase(),G=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[y]=G,Z.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],G.apply(this,arguments)};let Q=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let G=this.onreadystatechange;return this.onreadystatechange=function(){const Z=new RegExp(y.QUERY);if(4===this.readyState&&Z.test(this.responseURL)){let G=this.response.length&&"{"===this.response[0]?JSON.parse(this.response):this.response,Z=[];for(let Q of y.PATH_TO_PINS){let y=!1;Z=G;for(let G of Q){const W=Q.indexOf(G);if(!Z[G])break;Z=Z[G],W===Q.length-1&&(y=!0)}if(y)break}!function(y,G){let Z=null;if(y.length)for(let Q of y)G.CHECK_PROPERTIES.every((y=>Q[y]))&&(Z=W(Q,G.PATHS_GET_PROPERTIES),Z&&setTimeout(z(Z,"PINTEREST_VIDEO_DATA"),0))}(Z,y)}if(G)return G.apply(this,arguments)},Q.apply(this,arguments)}}};for(let y of G){if(!y.USE)continue;if("XMLHttpRequest"===y.TYPE){p[y.TYPE](y);continue}let G=y?.MAX_REPEATS_ACTIVATE||5,Z=setInterval((()=>{G--,p[y.TYPE](y),G<=0&&clearInterval(Z)}),1e3)}})();