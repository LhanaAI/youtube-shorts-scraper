(()=>{var y={7452:y=>{var G=function(y){"use strict";var G,Z=Object.prototype,Q=Z.hasOwnProperty,W="function"==typeof Symbol?Symbol:{},g=W.iterator||"@@iterator",z=W.asyncIterator||"@@asyncIterator",c=W.toStringTag||"@@toStringTag";function A(y,G,Z){return Object.defineProperty(y,G,{value:Z,enumerable:!0,configurable:!0,writable:!0}),y[G]}try{A({},"")}catch(y){A=function(y,G,Z){return y[G]=Z}}function p(y,G,Z,Q){var W=G&&G.prototype instanceof n?G:n,g=Object.create(W.prototype),z=new a(Q||[]);return g._invoke=function(y,G,Z){var Q=m;return function(W,g){if(Q===U)throw new Error("Generator is already running");if(Q===M){if("throw"===W)throw g;return R()}for(Z.method=W,Z.arg=g;;){var z=Z.delegate;if(z){var c=S(z,Z);if(c){if(c===h)continue;return c}}if("next"===Z.method)Z.sent=Z._sent=Z.arg;else if("throw"===Z.method){if(Q===m)throw Q=M,Z.arg;Z.dispatchException(Z.arg)}else"return"===Z.method&&Z.abrupt("return",Z.arg);Q=U;var A=K(y,G,Z);if("normal"===A.type){if(Q=Z.done?M:I,A.arg===h)continue;return{value:A.arg,done:Z.done}}"throw"===A.type&&(Q=M,Z.method="throw",Z.arg=A.arg)}}}(y,Z,z),g}function K(y,G,Z){try{return{type:"normal",arg:y.call(G,Z)}}catch(y){return{type:"throw",arg:y}}}y.wrap=p;var m="suspendedStart",I="suspendedYield",U="executing",M="completed",h={};function n(){}function V(){}function F(){}var $={};A($,g,(function(){return this}));var l=Object.getPrototypeOf,B=l&&l(l(D([])));B&&B!==Z&&Q.call(B,g)&&($=B);var u=F.prototype=n.prototype=Object.create($);function k(y){["next","throw","return"].forEach((function(G){A(y,G,(function(y){return this._invoke(G,y)}))}))}function e(y,G){function Z(W,g,z,c){var A=K(y[W],y,g);if("throw"!==A.type){var p=A.arg,m=p.value;return m&&"object"==typeof m&&Q.call(m,"__await")?G.resolve(m.__await).then((function(y){Z("next",y,z,c)}),(function(y){Z("throw",y,z,c)})):G.resolve(m).then((function(y){p.value=y,z(p)}),(function(y){return Z("throw",y,z,c)}))}c(A.arg)}var W;this._invoke=function(y,Q){function g(){return new G((function(G,W){Z(y,Q,G,W)}))}return W=W?W.then(g,g):g()}}function S(y,Z){var Q=y.iterator[Z.method];if(Q===G){if(Z.delegate=null,"throw"===Z.method){if(y.iterator.return&&(Z.method="return",Z.arg=G,S(y,Z),"throw"===Z.method))return h;Z.method="throw",Z.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var W=K(Q,y.iterator,Z.arg);if("throw"===W.type)return Z.method="throw",Z.arg=W.arg,Z.delegate=null,h;var g=W.arg;return g?g.done?(Z[y.resultName]=g.value,Z.next=y.nextLoc,"return"!==Z.method&&(Z.method="next",Z.arg=G),Z.delegate=null,h):g:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,h)}function w(y){var G={tryLoc:y[0]};1 in y&&(G.catchLoc=y[1]),2 in y&&(G.finallyLoc=y[2],G.afterLoc=y[3]),this.tryEntries.push(G)}function f(y){var G=y.completion||{};G.type="normal",delete G.arg,y.completion=G}function a(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(w,this),this.reset(!0)}function D(y){if(y){var Z=y[g];if(Z)return Z.call(y);if("function"==typeof y.next)return y;if(!isNaN(y.length)){var W=-1,z=function Z(){for(;++W<y.length;)if(Q.call(y,W))return Z.value=y[W],Z.done=!1,Z;return Z.value=G,Z.done=!0,Z};return z.next=z}}return{next:R}}function R(){return{value:G,done:!0}}return V.prototype=F,A(u,"constructor",F),A(F,"constructor",V),V.displayName=A(F,c,"GeneratorFunction"),y.isGeneratorFunction=function(y){var G="function"==typeof y&&y.constructor;return!!G&&(G===V||"GeneratorFunction"===(G.displayName||G.name))},y.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,F):(y.__proto__=F,A(y,c,"GeneratorFunction")),y.prototype=Object.create(u),y},y.awrap=function(y){return{__await:y}},k(e.prototype),A(e.prototype,z,(function(){return this})),y.AsyncIterator=e,y.async=function(G,Z,Q,W,g){void 0===g&&(g=Promise);var z=new e(p(G,Z,Q,W),g);return y.isGeneratorFunction(Z)?z:z.next().then((function(y){return y.done?y.value:z.next()}))},k(u),A(u,c,"Generator"),A(u,g,(function(){return this})),A(u,"toString",(function(){return"[object Generator]"})),y.keys=function(y){var G=[];for(var Z in y)G.push(Z);return G.reverse(),function Z(){for(;G.length;){var Q=G.pop();if(Q in y)return Z.value=Q,Z.done=!1,Z}return Z.done=!0,Z}},y.values=D,a.prototype={constructor:a,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=G,this.done=!1,this.delegate=null,this.method="next",this.arg=G,this.tryEntries.forEach(f),!y)for(var Z in this)"t"===Z.charAt(0)&&Q.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=G)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if("throw"===y.type)throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var Z=this;function W(Q,W){return c.type="throw",c.arg=y,Z.next=Q,W&&(Z.method="next",Z.arg=G),!!W}for(var g=this.tryEntries.length-1;g>=0;--g){var z=this.tryEntries[g],c=z.completion;if("root"===z.tryLoc)return W("end");if(z.tryLoc<=this.prev){var A=Q.call(z,"catchLoc"),p=Q.call(z,"finallyLoc");if(A&&p){if(this.prev<z.catchLoc)return W(z.catchLoc,!0);if(this.prev<z.finallyLoc)return W(z.finallyLoc)}else if(A){if(this.prev<z.catchLoc)return W(z.catchLoc,!0)}else{if(!p)throw new Error("try statement without catch or finally");if(this.prev<z.finallyLoc)return W(z.finallyLoc)}}}},abrupt:function(y,G){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var W=this.tryEntries[Z];if(W.tryLoc<=this.prev&&Q.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var g=W;break}}g&&("break"===y||"continue"===y)&&g.tryLoc<=G&&G<=g.finallyLoc&&(g=null);var z=g?g.completion:{};return z.type=y,z.arg=G,g?(this.method="next",this.next=g.finallyLoc,h):this.complete(z)},complete:function(y,G){if("throw"===y.type)throw y.arg;return"break"===y.type||"continue"===y.type?this.next=y.arg:"return"===y.type?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):"normal"===y.type&&G&&(this.next=G),h},finish:function(y){for(var G=this.tryEntries.length-1;G>=0;--G){var Z=this.tryEntries[G];if(Z.finallyLoc===y)return this.complete(Z.completion,Z.afterLoc),f(Z),h}},catch:function(y){for(var G=this.tryEntries.length-1;G>=0;--G){var Z=this.tryEntries[G];if(Z.tryLoc===y){var Q=Z.completion;if("throw"===Q.type){var W=Q.arg;f(Z)}return W}}throw new Error("illegal catch attempt")},delegateYield:function(y,Z,Q){return this.delegate={iterator:D(y),resultName:Z,nextLoc:Q},"next"===this.method&&(this.arg=G),h}},y}(y.exports);try{regeneratorRuntime=G}catch(y){"object"==typeof globalThis?globalThis.regeneratorRuntime=G:Function("r","regeneratorRuntime = r")(G)}},8384:y=>{y.exports=class{static get X(){return"2.0.26"}static get K(){return 1}static get m(){return 5}static get I(){return 5}static get i(){return"https://authentication.urban-vpn.com"}static get W(){return"https://analytics-toolbar.urban-vpn.com"}static get U(){return"/tickets"}static get p(){return"/install"}static get $(){return`/configuration?pv=${this.X}`}static get V(){return!1}static get M(){return!0}static get j(){return!1}static get v(){return!1}static get G(){return!0}static get H(){return!0}static get Z(){return!0}static get F(){return!0}static get N(){return!1}static get t(){return!1}}},3326:(y,G,Z)=>{const Q=Z(5364),W=Z(1568);y.exports=class{constructor(y){this.id=y,this.init=!1,this.InspectorConfig=null,this.hasActiveAdblock=!1}Init(y){return this.InspectorConfig=y,!this.init&&this.InspectorConfig&&this.InspectorConfig.active&&(this.init=!0,setTimeout(this.CheckForActiveAdblocker.bind(this),1e3*this.GetAgentActivationTimeout())),this.init}CheckForActiveAdblocker(){document.readyState===W.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.CheckAdblockerActivityStatus.bind(this)):document.readyState!==W.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==W.DOCUMENT_READYSTATE_COMPLETE||this.CheckAdblockerActivityStatus()}CheckAdblockerActivityStatus(){let y=this.CreateDumpAdElements(),G=y.length,Z=0;for(;0!==G||this.hasActiveAdblock;){G-=1;let Q=setTimeout((()=>{this.CheckAndRemoveTestAd(y[Z]),Z+=1,Q&&clearTimeout(Q)}),1e3*this.GetAdblockerAdRemovingTimeout())}}IsElementHidden(y){return!!y&&0===y.offsetHeight}CreateDumpAdElements(){let y=this.GetAdblockerDetectingSrcPatterns();return y&&y.length||(y=[""]),y.map((y=>{let G=document.createElement("iframe");return G.innerHTML="&nbsp;",G.className=this.GetAdblockerDetectionClassName(),G.style.position="absolute",G.style.visibility="hidden",G.style.zIndex="-9999",y&&(G.src=y),document.body.appendChild(G),G}))}CheckAndRemoveTestAd(y){let G={};G.hasActiveAdblock=this.IsElementHidden(y),y.remove(),Q.SendAdBlockInspectorAgentReport(this.id,G,null)}GetAdblockerDetectionClassName(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionClassName}GetAdblockerDetectingSrcPatterns(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionSrcPatterns}GetAgentActivationTimeout(){return this.init&&this.InspectorConfig&&this.InspectorConfig.agentActivationTimeoutSec}GetAdblockerAdRemovingTimeout(){return this.init&&this.InspectorConfig&&this.InspectorConfig.adRemovingTimeoutSec}}},3522:(y,G,Z)=>{const Q=Z(8384),W=Z(1568),g=Z(2880),z=Z(5364);y.exports=class{constructor(y,G){this.id=y,this.IOManager=G,this.init=!1,this.tabId=null,this.status=g.GetDefaultAdblockerStatus(),this.excludeList={domains:[],pages:[]},this.IOManager&&(this.IOManager.onAdBlockerStatusChanged=this.onAdBlockerStatusChanged.bind(this),this.IOManager.onAdBlockerSetHiddenAmount=this.SetHiddenAmount.bind(this))}GetStatus(){return this.status}Init(y,G,Z){return!this.init&&Q.G&&(this.tabId=Z,this.status=y,this.excludeList=G,this.init=!0),this.init}onAdBlockerStatusChanged(y){this.status=y}SetHiddenAmount(y){y>0&&z.SendHiddenAdCandidatesAmount(this.id,y)}IsEnabled(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_DISPLAY]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForFacebook(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_FACEBOOK]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForTwitter(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_TWITTER]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForReddit(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_REDDIT]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForPinterest(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_PINTEREST]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForInstagram(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_INSTAGRAM]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForTiktok(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_TIKTOK]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForLinkedin(){return this.init&&Q.G&&this.status[W.ADBLOCKER_FOR_LINKEDIN]===W.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsConfigUseLocal(){return this.init&&this.status[W.USE_LOCAL_CONFIG]===W.ADBLOCKER_STATUS_ENABLED}GetCurrentDomain(){return window.location.origin}GetCurrentPageUrl(){return window.location.href}IsExcluded(){return this.IsExcludedByDomainRule()||this.IsExcludedByPageRule()}IsNotExcluded(){return!this.IsExcluded()}IsExcludedByDomainRule(){return-1!==this.excludeList.domains.indexOf(this.GetCurrentDomain())}IsExcludedByPageRule(){return-1!==this.excludeList.pages.indexOf(this.GetCurrentPageUrl())}IsElementHidden(y){return"hidden"===y.getAttribute(W.ATTRIBUTE_BIS_HIDE_STATUS)}}},9346:(y,G,Z)=>{const Q=Z(9358),W=Z(533),g=Z(2880),z=Z(1568),c=Z(8384);y.exports=class extends W{constructor(y){super(),this.id=y,this.active=!1,this.candidates=[],this.hiddenAmount=0,this.pageUrl="",this.ticketId="",this.onPageRefreshed=null,this.isActive=!1,this.available=!1,this.elementId=0}getGlobalContainer(){}sendAdCandidatesToBackground(){}getUniqueContentId(){}get CandidatesCount(){return this.candidates.length}get Candidates(){return this.candidates}get HiddenAmount(){return this.hiddenAmount}get PageUrl(){return this.pageUrl}get TicketId(){return this.ticketId}get IsActive(){return this.active}Activated(){this.active=!0}CandidateHidden(){this.hiddenAmount=this.hiddenAmount+1}ClearHiddenCounter(){this.hiddenAmount=0}ClearCandidates(){this.candidates=[]}AddCandidate(y){this.candidates.push(y)}PageRefreshed(y,G){this.pageUrl=y,this.ticketId=G,this.onPageRefreshed&&this.onPageRefreshed(y,G)}getSponsorTwitterScreenName(y){let G=this.getSponsorPageRelativeUrl(y),Z=G.lastIndexOf("/")+1;return G.substring(Z)}getSponsorRedditScreenName(y){let G=this.getSponsorScreenNameReddit(y);return G?G.replace(/^.*\/user\//gi,"").replace(/\/.*/gi,""):""}getSponsorPageRelativeUrl(y){let G="",Z=y.querySelectorAll("a");if(Z.length){G=Z[0].getAttribute("href");let y=Z[0].getBoundingClientRect().x;Z.forEach((Z=>{Z.getBoundingClientRect().x<y&&(G=Z.getAttribute("href"),y=Z.getBoundingClientRect().x)}))}return G}getSponsorScreenNameReddit(y){let G,Z=Array.from(y.querySelectorAll("a[href]"));for(let y of Z){const Z=new RegExp(/^\/user\/.*/),Q=y.getAttribute("href");if(Q&&Z.test(Q)){G=Q.replace(/\/user\//,"").replace(/\/.*/,"");break}}return G}get Context(){return this}getAdTwitterObject(y,G,Z,W){let z=g.SetFullSizeToElement(G),c=g.GetCookie("ct0");return{content:Q.encode(y.outerHTML),screenName:this.getSponsorTwitterScreenName(y),stylesByElementBisId:W?{}:this.getStylesByElementsBisId(y),adPlacementType:Z,size:z,userDataByScreenName:"",token:c}}getAdRedditObject(y,G,Z,W){let z=g.SetFullSizeToElement(y);return{content:Q.encode(G.outerHTML),screenName:this.getSponsorRedditScreenName(G),adPlacementType:W,targetUrl:Z,size:z}}getAdLinkedinObject(y,G,Z,W,z,c,A=null){let p=g.SetFullSizeToElement(y);return{content:Q.encode(G.outerHTML),socialAdvertiserUrl:z,advertiserName:c,advertiserUrl:"",adPlacementType:Z,targetUrl:W,size:p,cookie:g.GetAllCookies(),uniqueDataId:A}}getAdPinterestObject(y,G,Z,W,z,c,A){let p=g.SetFullSizeToElement(y),K=this.getUniqueContentId(G);return{content:Q.encode(G.outerHTML),screenName:Z,adPlacementType:A,targetUrl:W,size:p,adText:z,advertiserUrl:c,uniqueContentId:K}}getAdInstagramObject(y,G,Z,W,z,c){let A=g.SetFullSizeToElement(y);return{content:Q.encode(G.outerHTML),screenName:Z,adPlacementType:c,targetUrl:W,size:A,aboutPageUrl:z}}setSizesAndIdForAllElements(y){if(y&&y.setAttribute){let G=this.getElementId();y.setAttribute(z.ATTRIBUTE_BIS_ELEMENT_ID,G),y.querySelectorAll("*").forEach((y=>{let G=this.getElementId();y.setAttribute&&(y.setAttribute(z.ATTRIBUTE_BIS_ELEMENT_ID,G),g.SetFullSizeToElement(y))}))}}isEmpty(y){return void 0===y||0===y.length}getElementId(){return this.elementId++}set setActive(y){"boolean"==typeof y&&(this.isActive=y)}set setAvailable(y){"boolean"==typeof y&&(this.available=y)}HideElement(y){y&&y.style&&(y.style.cssText+=z.STYLES_HIDE_ELEMENT,y.setAttribute(z.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}HideElementForInstagramFeedOnly(y){y&&y.style&&(y.firstElementChild.style.cssText+=z.STYLES_HIDE_INSTAGRAM_FEED_AD[0],y.style.cssText+=z.STYLES_HIDE_INSTAGRAM_FEED_AD[1],y.setAttribute(z.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}UnhideElement(y){if(y&&y.style){let G=y.style.cssText;G.includes(z.STYLES_HIDE_ELEMENT)&&(G=G.replace(z.STYLES_HIDE_ELEMENT,""),y.style.cssText=G)}}removeCloneElement(y){y.remove()}isCarousel(y){let G=y.querySelector("ul");return!!G&&G.offsetHeight>40}isVideo(y,G){return!(!y||!y.querySelectorAll(G).length)}doesElementExists(y){if(!y)return!1;let G=y.outerHTML;return document.querySelector("html").outerHTML.includes(G)}addRedBorderForCandidates(y){c.j&&(y.style.cssText+="border: 6px solid red !important;")}}},1153:(y,G,Z)=>{const Q=Z(1568),W=Z(2880),g=Z(7235),z=Z(3210),c=Z(4430),A=Z(855),p=Z(97),K=Z(4919),m=Z(5465),I=Z(2075),U=Z(3375),M=Z(9181),h=Z(5849),n=Z(9203),V=Z(1368);y.exports=class{constructor(y,G,Z,Q){if(this.id=y,this.Config=G,this.AdBlockerAgent=Q,this.IOManager=Z,this.PageUrl=document.location.href,this.FacebookAds=null,this.TwitterAds=null,this.RedditAds=null,this.SkinAds=null,this.HTML5Ads=null,this.VideoAds=null,this.PinterestAds=null,this.InstagramAds=null,this.LinkedinAds=null,this.TwitchAds=null,this.TiktokAds=null,this.IsBlacklistedPublisher=W.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),!this.IsBlacklistedPublisher)switch(!0){case W.IsFacebookUrl(this.PageUrl):this.FacebookAds=new p(this.id,this.Config,this.AdBlockerAgent);break;case W.IsTwitterUrl(this.PageUrl):this.TwitterAds=new K(this.id,this.Config,this.AdBlockerAgent);break;case W.IsRedditUrl(this.PageUrl):this.RedditAds=new m(this.id,this.Config,this.AdBlockerAgent);break;case W.IsTiktokUrl(this.PageUrl):this.TiktokAds=new h(this.id,this.Config,this.AdBlockerAgent);break;case W.IsPinterestUrl(this.PageUrl):this.PinterestAds=new I(this.id,this.Config,this.AdBlockerAgent);break;case W.IsInstagramUrl(this.PageUrl):this.InstagramAds=new U(this.id,this.Config,this.AdBlockerAgent);break;case W.IsLinkedinUrl(this.PageUrl):this.LinkedinAds=new M(this.id,this.Config,this.AdBlockerAgent);break;case W.IsTwitchUrl(this.PageUrl)&&this.Config.twitchConfig.COLLECT_INSTREAM_ADS:this.TwitchAds=new n(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new z(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new c(this.id,this.Config,this.IOManager,this.AdBlockerAgent);break;case W.isAI(this.PageUrl,this.Config):this.AIManager=new V(this.id,this.Config,this.PageUrl);break;default:this.SkinAds=new g(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new z(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new c(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.VideoAds=new A(this.id,this.Config,this.IOManager)}}ActivateAdsdetectors(){this.IsBlacklistedPublisher||(document.readyState===Q.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.StartAdsdetectors.bind(this)):document.readyState!==Q.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==Q.DOCUMENT_READYSTATE_COMPLETE||this.StartAdsdetectors())}StartAdsdetectors(){this.SkinAds&&this.SkinAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.BannerAds&&this.BannerAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.HTML5Ads&&this.HTML5Ads.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.VideoAds&&this.VideoAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.FacebookAds&&this.FacebookAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.TwitterAds&&this.TwitterAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.RedditAds&&this.RedditAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.PinterestAds&&this.PinterestAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.InstagramAds&&this.InstagramAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.LinkedinAds&&this.LinkedinAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER),this.TwitchAds&&this.TwitchAds.ActivateDetector(Q.ACTIVATION_BY_ADS_MANAGER)}PageRefreshed(y,G){this.SkinAds&&this.SkinAds.PageRefreshed(y,G),this.BannerAds&&this.BannerAds.PageRefreshed(y,G),this.HTML5Ads&&this.HTML5Ads.PageRefreshed(y,G),this.VideoAds&&this.VideoAds.PageRefreshed(y,G),this.FacebookAds&&this.FacebookAds.PageRefreshed(y,G),this.TwitterAds&&this.TwitterAds.PageRefreshed(y,G),this.RedditAds&&this.RedditAds.PageRefreshed(y,G),this.PinterestAds&&this.PinterestAds.PageRefreshed(y,G),this.InstagramAds&&this.InstagramAds.PageRefreshed(y,G),this.LinkedinAds&&this.LinkedinAds.PageRefreshed(y,G),this.TiktokAds&&this.TiktokAds.PageRefreshed(y,G),this.TwitchAds&&this.TwitchAds.pageRefreshed(y,G),this.AIManager&&this.AIManager.pageRefreshed(y,G)}GetHtml5CandidatesPrebuildInfo(){return this.HTML5Ads&&this.HTML5Ads.IsActive?this.HTML5Ads.GetPrebuildInfo():[]}}},1104:(y,G,Z)=>{const Q=Z(6882);y.exports=class{constructor(y,G){this.id=y,this.onGotWindowMessageCallback=G,this.mesToFrameDeactivationIntervalId=null}SetId(y){this.id=y}ActivateMesToFrameContentListener(y){this.mesToFrameDeactivationIntervalId||(this.mesToFrameDeactivationIntervalId=setInterval(this.CheckMesToFrameContent.bind(this),300),setTimeout(this.DeactivateMesToFrameContentListener.bind(this),3e3))}CheckMesToFrameContent(){try{let y=document.body.getAttribute("bis_mes_to_fr");if(y&&y){let G=JSON.parse(y);document.body.setAttribute("bis_mes_to_fr",""),Q.IsValid(G)&&this.onGotWindowMessageCallback&&this.onGotWindowMessageCallback(G),this.DeactivateMesToFrameContentListener()}}catch(y){}}DeactivateMesToFrameContentListener(){this.mesToFrameDeactivationIntervalId&&(clearInterval(this.mesToFrameDeactivationIntervalId),this.mesToFrameDeactivationIntervalId=null)}}},3210:(y,G,Z)=>{const Q=Z(8384),W=Z(2880),g=Z(9358),z=Z(9346),c=Z(5364),A=Z(1568);y.exports=class extends z{constructor(y,G,Z,Q){super(y),this.Config=G,this.bannerAdsConfig=this.Config.BannerAdsConfig,this.IOManager=Z,this.IOManager.onGotBannerCandidatesExtractionStatusesCallback=this.onGoBannerCandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=Q}ActivateDetector(){this.DetectCandidates(),setTimeout((()=>{this.DetectCandidates()}),350),setInterval((()=>{this.DetectCandidates()}),700)}PushCandidate(y,G){let Z={bisId:G,content:g.encode(y)};this.AddCandidate(Z)}IsValidCandidateSize(y){return y&&y.width>70&&y.height>40&&y.height<1100}SetBorderToCandidate(y){y&&Q.j&&(Q.v?y.style.cssText+=A.STYLES_BORDER_BANNER_URL_EXTRACTED:y.style.cssText+="border: 6px solid red !important;")}SendCandidatesToBackground(){this.Candidates.length&&c.SendAdCandidates(this.id,this.Candidates,A.MESSAGE_TYPE_CANDIDATES_DATA_BANNERS,null)}DetectCandidates(){this.ClearCandidates();let y=W.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.FULL_IMG_COLLECTION);for(let G=0;G<y.length;G++){let Z=y[G];if(!Z)continue;let Q=Z.src.toLowerCase(),g=this.getTagWithHref(Z);if(!g)continue;let z=g.href.toLowerCase(),c=!1;if((!this.filterNonAdBanner(Z)||this.isRedirectInHref(g))&&(W.IsInFilterList(this.Config.BlacklistBannerHref,z)||W.IsInFilterList(this.Config.BlacklistBannerImgSrc,Q)||Z.hasAttribute("bis_skin_element")||(W.isValidUrl(Q)&&W.isValidUrl(z)||W.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,Q)||W.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,z))&&(c=!0),c)){let y=Z.getBoundingClientRect();if(this.IsValidCandidateSize(y)){this.SetBorderToCandidate(Z),W.SetFullSizeToElement(Z),W.SetFullSizeToElement(g);let y=W.GenerateAndSetBisIdToBanner(Z);this.PushCandidate(g.outerHTML,y)}}}let G=W.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.ON_EVENT_IMG_COLLECTION);for(let y=0;y<G.length;y++){let Z=G[y],Q=Z.src.toLowerCase();if(!W.IsInFilterList(this.Config.BlacklistBannerImgSrc,Q)&&(W.isValidUrl(Q)&&!W.IsUrlFromHost(document.location.host,Q)||W.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,Q))){let y=Z.getBoundingClientRect();if(this.IsValidCandidateSize(y)){this.SetBorderToCandidate(Z),W.SetFullSizeToElement(Z);let y=W.GenerateAndSetBisIdToBanner(Z);this.PushCandidate(Z.outerHTML,y)}}}this.SendCandidatesToBackground()}filterNonAdBanner(y){let G=window.location.host||"__NULL__",Z=y.src.toLowerCase(),Q=Z.match(/\/\/(www\.)?[A-Za-z0-9.]+/),g=this.getTagWithHref(y),z=g?g.href.match(/\/\/(www\.)?[A-Za-z0-9.]+/):"",c=document.querySelector("head").outerHTML,A=W.IsUrlFromHost(G,g.href);return z=z?z[0].replace("//",""):"",Q=Q?Q[0].replace("//",""):"__NULL__",G=0===G.indexOf("www")?G.replace("www.",""):G,A||c.includes(z)||Z.includes(G)&&A||-1!==Z.search(/^data/)}isRedirectInHref(y){let G=y.href;return!!G&&G.search(/=https?/)>0}onGoBannerCandidatesExtractionStatuses(y){if(Q.j&&Q.v&&y&&y.length)for(let G=0;G<y.length;G++){let Z=W.QuerySelector(document,`*[bis_id="${y[G].bannerId}"]`);Z&&W.UpdateCandidateStatusBorderColor(Z,y[G].extractionStatus)}}getTagWithHref(y){let G=y.parentElement;for(let y=0;y<5&&"A"!==G.tagName;y++)G=G.parentElement;return"A"!==G.tagName&&(G=null),G}}},1245:(y,G,Z)=>{Z(1568);const Q=Z(9358);y.exports=class{constructor(y,G){this.id=y,this.configEncoded=G,this.config=JSON.parse(Q.decode(G)),this.counterTriesToSave=0,this.SaveToStorageConfig()}GetConfigEncoded(){return this.configEncoded}get BlacklistPublishers(){return this.config.filterLists.blacklistPublishers}get BlacklistBannerImgSrc(){return this.config.filterLists.blacklistBannerImgSrc}get BlacklistBannerHref(){return this.config.filterLists.blacklistBannerHref}get BlacklistIframeSrc(){return this.config.filterLists.blacklistIframeSrc}get BlacklistIframeId(){return this.config.filterLists.blacklistIframeId}get WhitelistCandidatesUrlKeyWords(){return this.config.filterLists.whitelistCandidatesUrlKeyWords}get WhitelistRedirectionCode(){return this.config.filterLists.whitelistRedirectionCode}GetVideoValidatorsForHTML(){return this.config.videoValidatorsForHTML}GetVideoValidatorsForJS(){return this.config.videoValidatorsForJS}GetVideoValidatorsForXHR(){return this.config.videoValidatorsForXHR}get FacebookConfig(){return this.config.facebookConfig}get TwitterConfig(){return this.config.twitterConfig}get RedditConfig(){return this.config.redditConfig}get PinterestConfig(){return this.config.pinterestConfig}get LinkedinConfig(){return this.config.linkedinConfig}get TiktokConfig(){return this.config.tiktokConfig}get GetInstagramConfig(){return this.config.instagramConfig}GetAdBlockInspectorConfig(){return this.config.adBlockInspectorConfig}get BannerAdsConfig(){return this.config.bannerAdsConfig}get Html5AdsConfig(){return this.config.HTML5AdsConfig}get l(){return this.config.aiMessagesConfig||{}}get B(){return this.l.CLAUDE}get u(){return this.l.CHATGPT}get k(){return this.l.COPILOT}get S(){return this.l.PERPLEXITY}get D(){return this.l.META_AI}get R(){return this.l.DEEPSEEK}get T(){return this.l.GEMINI}get BlacklistTargetUrl(){return this.config.filterLists.blacklistTargetUrl}get BlacklistKeyWordsInContent(){return this.config.filterLists.blacklistKeyWordsInContent}GetHtml5TargetUrlDetectionConfig(){return this.config.html5TargetUrlDetectionConfig}get twitchConfig(){return this.config.twitchConfig}static get CheckBisDataExist(){try{return!!sessionStorage.getItem("bis_data")}catch(y){return null}}SaveToStorageConfig(){const y=JSON.stringify({id:this.id,config:this.config});sessionStorage.setItem("bis_data",y),this.counterTriesToSave++}get amountTriesSaveConfig(){return this.counterTriesToSave}}},5364:(y,G,Z)=>{const Q=Z(1568),W=Z(6882),g=Z(2880);class z{constructor(y,G){this.id=y,this.init=!1,this.onGotHTML5CandidatesExtractionStatusesCallback=null,this.onGotSkinAdCandidatesExtractionStatusesCallback=null,this.onGotBannerCandidatesExtractionStatusesCallback=null,this.onGotVideoXHRTrafficCallback=null,this.onGotTwitchVideoInstreamDataCallback=null,this.onAdBlockerStatusChanged=null,this.onAdBlockerSetHiddenAmount=null,this.onTabUrlChanged=null,this.twitterVideoInfoCandidates=[],this.twitterAdCandidate=[],this.ConfigAgent=G}IsInit(){return this.init}Init(){this.init||(this.init=!0,window.addEventListener("message",(y=>{try{let G=y.data;if(W.IsValid(G)){const y=G.type;switch(y){case Q.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE:this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(G.content);break;case Q.MESSAGE_TYPE_VIDEO_TWITCH_INSTREAM_DATA:this.onGotTwitchVideoInstreamDataCallback&&this.onGotTwitchVideoInstreamDataCallback(G.content);break;case Q.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA:z.SendFBInStreamData(this.id,G.content);break;case Q.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA:g.IsFBVideoDataValid(G.content)&&z.SendFBVideoData(this.id,G.content);break;case Q.MESSAGE_TYPE_PINTEREST_VIDEO_DATA:z.SendPinterestVideoData(this.id,G.content);break;case Q.MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA:case Q.MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES:case Q.MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA:case Q.MESSAGE_TYPE_INSTAGRAM_STORY_DATA:z.SendInstagramDataToBgStorage(this.id,G.content,y);break;case Q.MESSAGE_TYPE_LINKEDIN_VIDEO_DATA:case Q.MESSAGE_TYPE_LINKEDIN_SLIDES_DATA:z.SendLinkedinDataToBgStorage(this.id,G.content,y);break;case Q.MESSAGE_TYPE_TWITTER_VIDEO_DATA:z.SendTWVideoData(this.id,G.content);break;case Q.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA:z.SendTWCarouselData(this.id,G.content);break;case Q.MESSAGE_TYPE_TIKTOK_VIDEO_CANDIDATES:z.SendTiktokDataToBgStorage(this.id,G.content,y),this.SetAdBlockerHiddenAmount(1);break;case Q.MESSAGE_TYPE_REDDIT_VIDEO_DATA:z.SendRedditVideoData(this.id,G.content);break;case Q.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA:z.SendRedditRightColumnData(this.id,G.content);break;case Q.MESSAGE_TYPE_CLAUDE_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_CLAUDE_DATA);break;case Q.MESSAGE_TYPE_CHATGPT_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_CHATGPT_DATA);break;case Q.MESSAGE_TYPE_DEEPSEEK_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_DEEPSEEK_DATA);break;case Q.MESSAGE_TYPE_COPILOT_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_COPILOT_DATA);break;case Q.MESSAGE_TYPE_PERPLEXITY_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_PERPLEXITY_DATA);break;case Q.MESSAGE_TYPE_META_AI_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_META_AI_DATA);break;case Q.MESSAGE_TYPE_GEMINI_DATA:z.sendAIMessageCandidates(this.id,G.content,Q.MESSAGE_TYPE_GEMINI_DATA);break;case Q.MESSAGE_TYPE_CONFIG_NOT_FOUND:this.ConfigAgent.SaveToStorageConfig(),this.sendResponseConfigSaved()}}}catch(y){}}),!1),g.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((y=>{let G=y;W.IsValid(G)&&G.to===this.id&&(G.type===Q.MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES?this.onGotHTML5CandidatesExtractionStatusesCallback&&this.onGotHTML5CandidatesExtractionStatusesCallback(G.content):G.type===Q.MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES?this.onGotBannerCandidatesExtractionStatusesCallback&&this.onGotBannerCandidatesExtractionStatusesCallback(G.content):G.type===Q.MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES?this.onGotSkinAdCandidatesExtractionStatusesCallback&&this.onGotSkinAdCandidatesExtractionStatusesCallback(G.content):G.type===Q.MESSAGE_TYPE_TAB_URL_CHANGED?this.onTabUrlChanged&&this.onTabUrlChanged(G.content):G.type===Q.MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED&&this.onAdBlockerStatusChanged&&this.onAdBlockerStatusChanged(G.content))})))}SetAdBlockerHiddenAmount(y){this.onAdBlockerSetHiddenAmount&&this.onAdBlockerSetHiddenAmount(y)}SendTicket(y){let G=W.EmptyMessage;G.type=Q.MESSAGE_TYPE_OUT_TICKET,G.from=this.id,G.to="bg",G.content=y,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(G).then(this.onTicketSend.bind(this)).catch((()=>{}))}onTicketSend(y){y&&y.status}static SendHiddenAdCandidatesAmount(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendInitMes(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_TAB_INITIALIZATION,Z.to="bg",Z.content=y,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).then((y=>{y&&y.config&&G&&G(y.config)})).catch((()=>{}))}static SendSinglePageReinitMes(y){let G=W.EmptyMessage;G.type=Q.MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION,G.to="bg",G.content=y,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(G).catch((()=>{}))}static SendNewPageCreatedTicket(y){let G=W.EmptyMessage;G.type=Q.MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET,G.to="bg",G.content=y,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(G).catch((()=>{}))}static SendPanelRegulatorResult(y){let G=W.EmptyMessage;G.type=Q.MESSAGE_TYPE_PANEL_REGULATOR_RESULT,G.to="bg",G.content=y,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(G).catch((()=>{}))}static SendMesToBackground(y,G,Z,Q){let z=W.EmptyMessage;z.type=G,z.from=y,z.to="bg",z.content=Z,g.IsOnChromeRuntime()&&(Q?chrome.runtime.sendMessage(z).then(Q).catch((()=>{})):chrome.runtime.sendMessage(z).catch((()=>{})))}static SendAdCandidates(y,G,Z,Q){z.SendMesToBackground(y,Z,G,Q)}static sendAIMessageCandidates(y,G,Z){z.SendMesToBackground(y,Z,G)}static SendCandidatePlacementsCount(y,G,Z,Q){z.SendMesToBackground(y,Z,G,Q)}static SendHtml5CandidatePlacements(y,G,Z){z.SendMesToBackground(y,Q.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5,G,Z)}static SendAdBlockInspectorAgentReport(y,G){z.SendMesToBackground(y,Q.MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT,G,null)}static SendTWVideoData(y,G){z.SendMesToBackground(y,Q.MESSAGE_TYPE_TWITTER_VIDEO_DATA,G,null)}static SendTWCarouselData(y,G){z.SendMesToBackground(y,Q.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA,G,null)}static SendRedditVideoData(y,G){z.SendMesToBackground(y,Q.MESSAGE_TYPE_REDDIT_VIDEO_DATA,G,null)}static SendRedditRightColumnData(y,G){z.SendMesToBackground(y,Q.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA,G,null)}static SendVideoHar(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_VIDEO_HAR,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}SendTwitchInstreamData(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_CANDIDATES_VIDEO_DATA_TWITCH,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendFBVideoData(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendPinterestVideoData(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_PINTEREST_VIDEO_DATA,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendInstagramDataToBgStorage(y,G,Z){let Q=W.EmptyMessage;Q.type=Z,Q.from=y,Q.to="bg",Q.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Q).catch((()=>{}))}static SendTiktokDataToBgStorage(y,G,Z){let Q=W.EmptyMessage;Q.type=Z,Q.from=y,Q.to="bg",Q.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Q).catch((()=>{}))}static SendLinkedinDataToBgStorage(y,G,Z){let Q=W.EmptyMessage;Q.type=Z,Q.from=y,Q.to="bg",Q.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Q).catch((()=>{}))}static SendInstagramFullTextData(y,G,Z){let Q=W.EmptyMessage;Q.type=Z,Q.from=y,Q.to="bg",Q.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Q).catch((()=>{}))}static SendFBInStreamData(y,G){let Z=W.EmptyMessage;G.encodedText=G.content,G.alias=Q.VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON,G.mediaType=Q.VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON,G.frameId=0,G.framesChain=[],G.contentType="json",delete G.content,Z.type=Q.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}static SendInitRequestListener(y,G){let Z=W.EmptyMessage;Z.type=Q.MESSAGE_TYPE_INIT_REQUEST_LISTENER,Z.from=y,Z.to="bg",Z.content=G,g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}sendResponseConfigSaved(){if(this.ConfigAgent.amountTriesSaveConfig>4)return;let y=W.EmptyMessage;y.type=Q.MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE,window.postMessage(y,"*")}}y.exports=z},8229:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y,G,Z,Q){this.init=!1,this.Config=Q,this.chainId=y,this.frameId=G,this.bisId=Z,this.documentObj=null,this.onInputsDetectedCallback=null,this.onRedirectsDetectedCallback=null,this.detectedValidationInfo={inputs:!1,redirect:!1}}Init(y,G,Z){return!this.init&&y&&(this.init=!0,this.fullIdStr=Q.GetFullIdStr(this.chainId,this.frameId,this.bisId),this.documentObj=y,this.onInputsDetectedCallback=G,this.onRedirectsDetectedCallback=Z,this.ValidateContent()),this.init}ValidateContent(){if(!this.detectedValidationInfo.inputs){this.GetInputsAmount()>0&&!this.IsIFrameWithInputsException()&&(this.detectedValidationInfo.inputs=!0,this.onInputsDetectedCallback&&this.onInputsDetectedCallback())}this.detectedValidationInfo.redirect||this.HasRedirect()&&(this.detectedValidationInfo.redirect=!0,this.onRedirectsDetectedCallback&&this.onRedirectsDetectedCallback())}GetInputsAmount(){let y=0;try{let G=Q.QuerySelectorAll(this.documentObj,"input");G&&G.length&&G.forEach((G=>{let Z=G.getBoundingClientRect();Z.width>0&&Z.height>0&&(y+=1)}))}catch(y){}return y}IsIFrameWithInputsException(){let y=!1,G=Q.QuerySelector(this.documentObj,"html");return G&&-1!==G.innerHTML.search(/var clicktag/i)&&(y=!0),y}IsWhiteListedRedirectionCode(y){let G=!1;try{if(y&&y.length&&this.Config){let Z=this.Config.WhitelistRedirectionCode;for(let Q=0;Q<Z.length&&!G;Q++)y.includes(Z[Q])&&(G=!0)}}catch(y){}return G}HasRedirect(){let y=!1,G=Q.QuerySelectorAll(this.documentObj,"script");for(let Z=0;Z<G.length&&!y;Z++){let Q=G[Z].innerHTML;Q.length&&Q.includes("location.replace")&&(y=!this.IsWhiteListedRedirectionCode(Q))}return y}}},3870:(y,G,Z)=>{const Q=Z(9358),W=Z(2880),g=Z(6882),z=Z(1568),c=Z(4503),A=Z(8229),p=Z(9877),K=Z(855),m=Z(1245);class I{constructor(){this.id=null,this.frameId=null,this.chainId=null,this.fullIdStr="",this.init=!1,this.chainActivated=!1,this.finalFrame=!1,this.activated=!1,this.contentSenderTimer=null,this.activationInfo=null,this.IframesIO=null,this.TargetUrlDetector=null,this.ContentValidator=null,this.VideoAds=null,this.Config=null,this.recheckerInterval=null,this.PageUrl=document.location.href,this.counter=10,this.timeoutHandlerForBlockedFrame=null,this.isBlockedFrameInfoGot=!1}Init(){this.init||(this.init=!0,setTimeout(this.SendInitMessage.bind(this),700))}SetBisStatus(){document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_status","ok")}RecheckBisStatus(){document&&document.body&&document.body.getAttribute&&"ok"!==document.body.getAttribute("bis_status")&&this.SetBisStatus()}StopRechecker(){this.recheckerInterval&&(clearInterval(this.recheckerInterval),this.recheckerInterval=null)}SendInitMessage(){let y=document.querySelector("html"),G=y?y.innerHTML:"",Z=g.EmptyMessage;Z.type=z.MESSAGE_TYPE_IFRAME_INITIALIZATION,Z.from=this.id,Z.to="bg",Z.content={location:document.location.href,contentForSave:{depth:this.findDepthForClosedFrame(window,0),src:document.location.href,content:Q.encode(G)}},W.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).then(this.onGotInitMesResponse.bind(this)).catch((()=>{}))}findDepthForClosedFrame(y,G=0){const Z=y.parent;return Z&&Z!==top?(G++,this.findDepthForClosedFrame(Z,G)):G}onGotInitMesResponse(y){const G=y.mes.content.location;this.Config=new m(this.id,y.mes.content.configuration);const Z=this.Config?.LinkedinConfig?.FEED.REGEXP_IFRAME_SRC;if(!Z)throw new Error("Not found this.Config.LinkedinConfig.FEED.REGEXP_IFRAME_SRC in PosdFrameContent.onGotInitMesResponse");if(!0===new RegExp(Z).test(G))this.linkedinScenario(y);else this.commonScenario(y)}commonScenario(y){if(y&&y.status&&"ok"===y.status&&g.IsValid(y.mes)&&y.mes.content.activeStatus&&(this.frameId=y.mes.content.frameId,this.fullIdStr=W.GetFullIdStr(this.chainId,this.frameId,this.id),y.mes.content.isMaster)){this.Config=new m(this.id,y.mes.content.configuration);const G=W.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),Z=W.IsInFilterList(this.Config.BlacklistIframeSrc,this.PageUrl),Q=W.IsInFilterList(this.Config.BlacklistKeyWordsInContent,document.querySelector("html").innerHTML);if(G||Z||Q)return;this.SetBisStatus(),setTimeout(this.StopRechecker.bind(this),1e4),this.recheckerInterval=setInterval(this.RecheckBisStatus.bind(this),300),this.IframesIO=new c(this.id),this.IframesIO.Init(),this.IframesIO.onGotChainActivationCallback=this.onGotChainActivation.bind(this),this.IframesIO.onGotContentMesCallback=this.onGotContentMes.bind(this),this.VideoAds=new K(this.id,this.Config,this.IframesIO,!G),document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_frame_id",this.frameId),"null"===self.origin&&(this.timeoutHandlerForBlockedFrame=setInterval((()=>{this.counter--,this.isBlockedFrameInfoGot||this.counter<=0?clearInterval(this.timeoutHandlerForBlockedFrame):this.requestHeaderInfoFromBG()}),1e3))}}linkedinScenario(y){if(!(y&&y.status&&"ok"===y.status&&g.IsValid(y.mes)))return;let G=document?.documentElement;if(!G)return;let Z=G.querySelector("body");if(Z){let y=1e3;Z.setAttribute(z.ATTRIBUTE_BIS_ELEMENT_ID,y),Z.querySelectorAll("*").forEach((G=>{y++,G.setAttribute&&(G.setAttribute(z.ATTRIBUTE_BIS_ELEMENT_ID,y),W.SetFullSizeToElement(G))}))}let Q=setTimeout((()=>{let y=G.outerHTML,Z=document.querySelector('span[class="ssplayer-topbar-title-text ssplayer-topbar-ellipsis"]')?.textContent;this.storeLinkedinFrameContent(y,Z),clearTimeout(Q)}),100)}storeLinkedinFrameContent(y,G){let Z=g.EmptyMessage;Z.type=z.MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE,Z.from=this.id,Z.to="bg",Z.content={content:Q.encode(y),title:G},W.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}requestHeaderInfoFromBG(){let y=g.EmptyMessage;y.type=z.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME,y.from=this.id,y.to="bg",y.content={src:document.location.href},W.IsOnChromeRuntime()&&(this.setMessageListenerForThisIFrame(),chrome.runtime.sendMessage(y).catch((()=>{})))}setMessageListenerForThisIFrame(){chrome.runtime.onMessage.addListener(this.callbackForHeaderInfoRequest.bind(this))}callbackForHeaderInfoRequest(y){let G=arguments.callee;if(y&&y.type&&y.type===z.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE){let Z=y.parentInfo;if(chrome.runtime.onMessage.removeListener(G),Z){this.isBlockedFrameInfoGot=!0;let y=p.DetectTargetUrlFromWindowObj(this.id,self,this.Config),G={depth:Z.depth,headerInfo:Z.headerInfo,chainId:Z.chainId,configEncoded:this.Config.configEncoded,targetUrlCandidates:y.length?y:[]};this.onGotChainActivation(G)}}}onGotChainActivation(y){if(this.chainActivated)return null;if(this.chainActivated=!0,!(y&&y.headerInfo&&y.headerInfo.bisId))return null;this.id=y.headerInfo.bisId,this.IframesIO.SetId(this.id),this.chainId=y.chainId,this.fullIdStr=W.GetFullIdStr(this.chainId,this.frameId,this.id),this.StopRechecker(),this.activationInfo=y,this.Config||y.configEncoded&&y.configEncoded.length&&(this.Config=new m(this.id,y.configEncoded)),this.ContentValidator=new A(this.chainId,this.frameId,this.id,this.Config),this.ContentValidator.Init(document,this.onContentInputsDetected.bind(this),this.onContentRedirectsDetected.bind(this)),this.TargetUrlDetector=new p(this.chainId,this.frameId,this.id,this.activationInfo.targetUrlCandidates,this.Config),this.TargetUrlDetector.Init(this.IframesIO),I.SetBisId(document,window,this.id),W.SetBisDepth(document.body,y.depth),W.SetBisChainId(document.body,y.chainId),this.InjectJs();let G=setTimeout((()=>{this.onGotActivationMes(),clearTimeout(G)}),50)}onGotActivationMes(){if(!this.activated){this.activated=!0;var y=W.QuerySelectorAll(document,"iframe, frame");if(y.length)for(let G=0;G<y.length;G++){const Z=y[G];if(W.SetFullSizeToElement(Z,I.GetAbsoluteCoordinates(this.activationInfo)),W.GenerateAndSetBisIdToFrame(Z),W.SetBisDepth(Z,this.activationInfo.depth+1),W.SetBisChainId(Z,this.activationInfo.chainId),W.IsIframeHasContentScript(y[G]))I.SendActivationMesToFrame(this.id,this.activationInfo.chainId,Z,this.activationInfo.depth+1,this.Config);else{let y=I.GetInvalidChainSegmentContent(this.id,this.activationInfo.chainId,Z,this.activationInfo.depth+1,this.Config);I.SendInvalidChainSegmentContent(this.id,y)}}this.TargetUrlDetector.DetectTargetUrl(1e3,this.onTargerUrlDetected.bind(this))}}onTargerUrlDetected(){if(!this.contentSenderTimer){let y=W.GetRandomIntInRange(0,200);this.contentSenderTimer=setTimeout(this.SendContent.bind(this),y)}}SendContent(){I.PrepareContent(this.fullIdStr,document,I.GetAbsoluteCoordinates(this.activationInfo)),I.RemoveInjectedJs(this.fullIdStr,document);let y=document.querySelector("html");if(!y)return;let G=y.outerHTML;if(G.length){let y=g.EmptyMessage;y.type=z.MESSAGE_TYPE_IFRAME_CONTENT,y.from=this.id,y.to="bg",y.content={isValid:!0,headerInfo:this.activationInfo.headerInfo,contentFinal:Q.encode(G),targetUrl:this.TargetUrlDetector.FrameTargetUrl},W.IsOnChromeRuntime()&&chrome.runtime.sendMessage(y).catch((()=>{}))}}onGotChainActivationResponse(){}onGotContentMes(){}onContentInputsDetected(){this.IframesIO.SendInputsDetected()}onContentRedirectsDetected(){this.IframesIO.SendRedirectDetected()}static SetBisId(y,G,Z){G&&(G.bis_id=Z),y&&(y.bis_id=Z),y.body&&y.body.setAttribute&&y.body.setAttribute("bis_body_id",Z)}static RemoveInjectedJs(y,G){try{let y=G.head.querySelectorAll("script[bis_script]");if(y&&y.length)for(let G=0;G<y.length;G++)y[G].remove()}catch(y){}}static GetAbsoluteCoordinates(y){return{x:y.headerInfo.size.abs_x,y:y.headerInfo.size.abs_y}}static PrepareContent(y,G,Z){for(var Q=W.QuerySelectorAll(G,"*:not(html):not(script):not(head):not(meta):not(link):not(title):not(style):not(param)"),g=0;g<Q.length;g++){var z=Q[g];if(z)try{var c=!1,A=window.getComputedStyle(z).backgroundImage;if(A&&A.length&&"none"!=A&&A.includes("url")&&(A=A.replace(/"/g,"'"),c=!0),z.hasAttribute("style")){var p=z.getAttribute("style");p&&z.setAttribute&&(p=p.replace(/"/g,"'"),z.setAttribute("style",p),c&&(z.style.cssText+="background-image: "+A+";",z.setAttribute("bis_label","style")))}else c&&z.setAttribute&&(z.setAttribute("style","background-image: "+A+";"),z.setAttribute("bis_label","style"));try{if(z.attributes&&z.attributes.length)for(var K=0;K<z.attributes.length;K++)z.attributes[K]&&z.attributes[K].value&&z.attributes[K].value.length&&"src"!==z.attributes[K].name&&z.attributes[K].value.includes('"')&&(z.attributes[K].value=z.attributes[K].value.replace(/"/g,"'"))}catch(y){}W.SetFullSizeToElement(z,Z)}catch(y){}}}static ExtractContent(y,G){return G.document.querySelector("html").outerHTML}static GetFrameHeaderInfo(y,G,Z){let W={depth:Z,chainId:y,frameId:G.id,src:G.src,size:JSON.parse(G.getAttribute("bis_size")),bisId:G.getAttribute("bis_id")};return 0===Z&&(W.topHeaderContent=Q.encode(G.outerHTML)),W}static SendActivationMesToFrame(y,G,Z,c,A){let K=!1;try{const m=document.querySelector("body"),U=self===top?0:m?+m.getAttribute("bis_frame_id"):null;let M="";if(A&&A.GetConfigEncoded&&(M=A.GetConfigEncoded()),Z){let m,h=g.EmptyMessage;try{m=Z.contentWindow&&Object.keys(Z.contentWindow).includes("origin")?Z.contentWindow.origin:Z.src}catch(y){m=Z.src}h.type=z.MESSAGE_TYPE_CHAIN_ACTIVATION,h.from=y,h.to="fr",h.content={chainId:G,depth:c,headerInfo:I.GetFrameHeaderInfo(G,Z,c),configEncoded:M,targetUrlCandidates:[]};let n=g.EmptyMessage;if(n.type=z.MESSAGE_TYPE_HEADER_INFO_TO_STORAGE,n.from=y,n.to="bg",n.content={chainId:G,depth:c,frameId:U,headerInfo:I.GetFrameHeaderInfo(G,Z,c)},W.IsOnChromeRuntime()&&chrome.runtime.sendMessage(n).catch((()=>{})),W.IsIframeSecure(Z)){if(Z.contentWindow&&Z.contentWindow.postMessage)try{Z.contentWindow.postMessage(h,m)}catch(y){}}else{try{let G=p.DetectTargetUrlFromWindowObj(y,Z.contentWindow,A);G.length&&(h.content.targetUrlCandidates=G)}catch(y){}Z.contentWindow.document.body.setAttribute&&Z.contentWindow.document.body.setAttribute("bis_activation",Q.encode(JSON.stringify(h)))}K=!0}}catch(y){}return K}static GetInvalidChainSegmentContent(y,G,Z,g,z){let c={},A=!1,K=I.GetFrameHeaderInfo(G,Z,g),m={x:K.size.x,y:K.size.y};try{let U=W.QuerySelectorAll(Z.contentWindow.document,"iframe, frame");if(0===U.length)A=!0;else{A=!1;for(let Z=0;Z<U.length;Z++)W.SetFullSizeToElement(U[Z],m),W.GenerateAndSetBisIdToFrame(U[Z]),W.SetBisDepth(U[Z],g+1),I.SendActivationMesToFrame(y,G,U[Z],g+1,z)}I.PrepareContent(y,Z.contentWindow.document,m),c.isValid=!1,c.isChainCompleted=A,c.headerInfo=K,c.contentFinal=Q.encode(I.ExtractContent(y,Z.contentWindow)),c.targetUrl=p.DetectTargetUrlFromWindowObj(y,Z.contentWindow,z)}catch(y){}return c}static SendInvalidChainSegmentContent(y,G){if(G){let Z=g.EmptyMessage;Z.type=z.MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT,Z.from=y,Z.to="bg",Z.content=G,W.IsOnChromeRuntime()&&chrome.runtime.sendMessage(Z).catch((()=>{}))}}InjectJs(){if(document.querySelector('script[bis_script="display"]'))return;let y=document.createElement("script"),G=document.querySelector("head");this.setAttributes(y),G&&G.appendChild(y)}setAttributes(y){const G=W.getURL("../executors/frame.js");y.setAttribute("bis_use","true"),y.setAttribute("bis_script","display"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("bis_id",this.id),y.src=G}}y.exports=I},4430:(y,G,Z)=>{const Q=Z(8384),W=Z(2880),g=Z(1568),z=Z(9346),c=Z(3870),A=Z(5364);y.exports=class extends z{constructor(y,G,Z,Q){super(y),this.Config=G,this.HTML5AdsConfig=this.Config.Html5AdsConfig,this.IOManager=Z,this.IOManager.onGotHTML5CandidatesExtractionStatusesCallback=this.onGotHTML5CandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=Q,this.topFramesCandidates=[],this.onDetectedCallback=null,this.chainIdCounter=0,this.maxTriesForPreciseAds=this.HTML5AdsConfig.PRECISE_ADVERTISING_IDENTIFIERS.MAX_TRIES_FIND_ADS}ActivateDetector(){this.Activated(),this.sequentialDetection().catch((()=>{}))}async sequentialDetection(){let y=await this.asyncStartDetectPreciseAds();this.startDetectCandidates(y)}startDetectCandidates(y){y?setInterval(this.startDetectPreciseAds.bind(this),600):setTimeout(this.sequentialDetection.bind(this),500)}startDetectPreciseAds(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter();let y=this.detectByQuerySelectors();if(!y.length)return void this.startDetectHTML5AdsCandidates();let G=0;for(let Z=0;Z<y.length;Z++){const Q=y[Z];Q.setAttribute&&(Q.setAttribute(g.ATTRIBUTE_BIS_PRECISE_AD,1),this.buildCandidateObject(Q,!0),this.addRedBorderForCandidates(Q),G++,this.AdBlockerAgent.IsEnabled()&&this.HideElement(Q))}this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),this.startToProcessCandidates(G),this.startDetectHTML5AdsCandidates()}asyncStartDetectPreciseAds(){return new Promise((y=>{this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.maxTriesForPreciseAds<=0&&(this.maxTriesForPreciseAds--,y(!0));let G=this.detectByQuerySelectors();if(!G.length)return y(!1),void this.maxTriesForPreciseAds--;let Z=0;for(let y=0;y<G.length;y++){const Q=G[y];Q.setAttribute&&(Q.setAttribute(g.ATTRIBUTE_BIS_PRECISE_AD,1),this.buildCandidateObject(Q,!0),this.addRedBorderForCandidates(Q),Z++,this.AdBlockerAgent.IsEnabled()&&this.HideElement(Q))}this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),this.maxTriesForPreciseAds--,this.startToProcessCandidates(Z),y(G.length>0)}))}detectByQuerySelectors(){const y=this.HTML5AdsConfig.PRECISE_ADVERTISING_IDENTIFIERS.QUERY_SELECTORS;let G=[];for(let Z of y){let y=Array.from(W.QuerySelectorAll(document,`${Z}:not([${g.ATTRIBUTE_BIS_PRECISE_AD}]):not([${g.ATTRIBUTE_BIS_SIZE}])`));y.length&&(G=G.concat(...y))}return G}startDetectHTML5AdsCandidates(){let y=W.QuerySelectorAll(document,this.HTML5AdsConfig.QUERIES.IFRAMES_COLLECTION),G=0;if(y.length){for(let Z=0;Z<y.length;Z++){const Q=y[Z];if(Q.getAttribute(g.ATTRIBUTE_BIS_PRECISE_AD))continue;let z=Q.src?Q.src.toLowerCase():Q.src;this.preCheckFrameContent(Q)&&(W.IsInFilterList(this.Config.BlacklistIframeSrc,z)||W.IsInFilterList(this.Config.BlacklistIframeId,Q.id)?W.SetFullSizeToElement(Q):!this.IsFrameFromSite(z)||W.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,z)?(this.buildCandidateObject(Q,!1),G+=1,this.addRedBorderForCandidates(Q)):W.SetFullSizeToElement(Q))}G>0&&this.startToProcessCandidates(G)}}startToProcessCandidates(y){A.SendHtml5CandidatePlacements(this.id,y,null);for(let y=0;y<this.topFramesCandidates.length;y++)this.topFramesCandidates[y].status===g.CANDIDATE_PROCESS_STATUS_DETECTED&&(this.topFramesCandidates[y].status=g.CANDIDATE_PROCESS_STATUS_START_PROCESSING,setTimeout((()=>{this.ActivateCandidateProcessing(this.topFramesCandidates[y])}),3e3+W.GetRandomIntInRange(0,500)))}buildCandidateObject(y,G){let Z=y.getBoundingClientRect();if(!G&&Z.width<=70&&Z.height<=40&&Z.height>=1100)return;W.SetFullSizeToElement(y);let Q=W.GenerateAndSetBisIdToFrame(y);this.chainIdCounter=this.chainIdCounter+1;let z={ticketId:this.TicketId,pageUrl:this.PageUrl,bisId:Q,chainId:this.chainIdCounter,detectionTime:(new Date).getTime(),processingStartTime:null,frame:y,isSecure:W.IsIframeSecure(y),hasContentScript:W.IsIframeHasContentScript(y),status:g.CANDIDATE_PROCESS_STATUS_DETECTED};this.topFramesCandidates.push(z),W.SetBisDepth(y,0),W.SetBisChainId(y,this.chainIdCounter)}preCheckFrameContent(y){if(!y.contentDocument)return!0;const G=y.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.ACCEPTABLE_NODES_IN_IFRAME),Z=y.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.UNACCEPTABLE_NODES_IN_IFRAME);let Q=!1;return G.length&&!Z.length&&(Q=!0),Q}onGotHTML5CandidatesExtractionStatuses(y){if(y&&y.length)for(let G=0;G<y.length;G++)if(this.AdBlockerAgent.IsEnabled()&&y[G].extractionStatus.filteredOut)this.UnhideElement(W.QuerySelector(document,`iframe[bis_chainid="${y[G].chainId}"]`));else if(Q.j&&Q.v){let Z=W.QuerySelector(document,`iframe[bis_chainid="${y[G].chainId}"]`);Z&&W.UpdateCandidateStatusBorderColor(Z,y[G].extractionStatus)}}ActivateCandidateProcessing(y){if(y&&y.status&&y.status===g.CANDIDATE_PROCESS_STATUS_START_PROCESSING){y.processingStartTime=(new Date).getTime(),y.status=g.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED;let G=W.IsIframeSecure(y.frame);y.isSecure!==G&&(y.isSecure=G);let Z=W.IsIframeHasContentScript(y.frame);if(y.hasContentScript!==Z&&(y.hasContentScript=Z),y.hasContentScript)c.SendActivationMesToFrame(this.id,y.chainId,y.frame,0,this.Config);else{let G=c.GetInvalidChainSegmentContent(this.id,y.chainId,y.frame,0,this.Config);if(Q.j&&Q.v&&G.isChainCompleted){let Z={fullContentExtracted:!1,targetUrlExtracted:!1,sentToBackend:!1};G.contentFinal&&G.contentFinal.length&&(Z.fullContentExtracted=!0),G.targetUrl&&G.targetUrl.length&&(Z.targetUrlExtracted=!0),W.UpdateCandidateStatusBorderColor(y.frame,Z)}c.SendInvalidChainSegmentContent(this.id,G)}}}GetPrebuildInfo(){let y=[],G=(new Date).getTime();for(let Z=0;Z<this.topFramesCandidates.length;Z++)this.topFramesCandidates[Z].status===g.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED&&(this.topFramesCandidates[Z].status=g.CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT,y.push({ticketId:this.topFramesCandidates[Z].ticketId,pageUrl:this.topFramesCandidates[Z].pageUrl,bisId:this.topFramesCandidates[Z].bisId,chainId:this.topFramesCandidates[Z].chainId,timeAfterDetection:G-this.topFramesCandidates[Z].detectionTime,timeAfterProcessingStart:G-this.topFramesCandidates[Z].processingStartTime}));return y}IsFrameFromSite(y){let G=!1,Z=y;if(Z.length){let Q=Z.indexOf("?");Q>0?Z=y.substring(0,Q):(Q=Z.indexOf("#"),Q>0&&(Z=y.substring(0,Q))),-1!==Z.indexOf(window.location.host)?G=!0:W.isValidUrl(Z)||"about:blank"===Z||(G=!0)}return G}}},4503:(y,G,Z)=>{const Q=Z(6882),W=Z(1568),g=Z(2880),z=Z(9358),c=Z(1104);y.exports=class{constructor(y){this.id=y,this.init=!1,this.AtrMessageListeners=[],this.webNavigationIframes=[],this.chainActivationListernerIntervalId=null,this.onWindowEmbeddedTargetUrlDetectionCallback=null,this.onGotContentMesCallback=null,this.onGotChainActivationCallback=null,this.onGotVideoXHRTrafficCallback=null,this.chainActivationEventProcessed=!1,this.processedMessages=[]}IsInit(){return this.init}get Context(){return this}SetId(y){this.id=y,this.AtrMessageListener&&this.AtrMessageListener.SetId(y)}Init(){this.init||(this.init=!0,window.addEventListener("message",(y=>{try{var G=y.data;this.ProcessWindowMessage(G)}catch(y){}}),!1),g.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((y=>{var G=y;Q.IsValid(G)&&(G.type===W.MESSAGE_TYPE_GET_FRAME_CONTENT?G.multiTo.includes(this.id)&&(this.webNavigationIframes=G.content,this.onGotContentMesCallback&&this.onGotContentMesCallback()):G.type===W.MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK&&G.multiTo.includes(this.id)&&this.ActivateWindowClickTargetUrlDetection(G.content))})),this.chainActivationListernerIntervalId=setInterval((()=>{try{if(!this.chainActivationEventProcessed&&document&&document.body){let y=document.body.getAttribute("bis_activation");if(y&&y.length){let G=z.decode(y);if("{"===G[0]&&"}"===G[G.length-1]){let y=JSON.parse(G);Q.IsValid(y)&&y.type===W.MESSAGE_TYPE_CHAIN_ACTIVATION&&(this.chainActivationEventProcessed=!0,clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null,document.body.setAttribute("bis_activation","done"),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(y.content))}}document.body.removeAttribute("bis_activation")}}catch(y){}}),500))}ProcessWindowMessage(y){Q.IsValid(y)&&y.posdHash&&!this.processedMessages.includes(y.posdHash)&&(y.posdHash&&y.posdHash.length&&this.processedMessages.push(y.posdHash),y.type===W.MESSAGE_TYPE_CHAIN_ACTIVATION?(this.chainActivationListernerIntervalId&&(clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(y.content)):y.type===W.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND?this.onWindowEmbeddedTargetUrlDetectionCallback&&this.onWindowEmbeddedTargetUrlDetectionCallback(y.content.targetUrlList):y.type===W.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND?(y.to="bg",g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(y).catch((()=>{}))):y.type===W.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE&&this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(y.content))}ActivateWindowEmbeddedTargetUrlDetection(y){try{this.onWindowEmbeddedTargetUrlDetectionCallback=y;let Z=Q.EmptyMessage;Z.type=W.MESSAGE_TYPE_GET_WINDOW_TARGET_URL,Z.from=this.id,Z.to=this.id+"_w",window.postMessage&&window.postMessage(Z,"*");var G=new c(this.id,this.ProcessWindowMessage.bind(this));G.ActivateMesToFrameContentListener(W.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND),this.AtrMessageListeners.push(G)}catch(y){}}ActivateWindowClickTargetUrlDetection(y){try{let Z=Q.EmptyMessage;Z.type=W.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL,Z.from=this.id,Z.to=this.id+"_w",Z.content=y,window.postMessage&&window.postMessage(Z,"*");var G=new c(this.id,this.ProcessWindowMessage.bind(this));G.ActivateMesToFrameContentListener(W.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL),this.AtrMessageListeners.push(G)}catch(y){}}SendInputsDetected(){let y=Q.EmptyMessage;y.type=W.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS,y.from=this.id,y.to="bg",g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(y).catch((()=>{}))}SendRedirectDetected(){let y=Q.EmptyMessage;y.type=W.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS,y.from=this.id,y.to="bg",g.IsOnChromeRuntime()&&chrome.runtime.sendMessage(y).catch((()=>{}))}}},9700:(y,G,Z)=>{Z(1568);const Q=Z(2880);y.exports=class{#y;#G;#Z;constructor(y){this.#y=y}injectDetector(y){if(this.#G=y.className,this.#Z=y.fileName,document.head){let G=document.createElement("script");this.#Q(G),y.injectBeforeFirstChild?document.head.insertBefore(G,document.head.firstChild):document.head.appendChild(G)}}#Q(y){const G=Q.getURL(`../executors/${this.#Z}.js`);y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}}},3129:(y,G,Z)=>{const Q=Z(2880),W=Z(1568),g=Z(7584),z=Z(1153),c=Z(5364),A=Z(3522),p=Z(3326),K=Z(1245),m=Z(7376);y.exports=class{constructor(){this.id=null,this.tabId=null,this.init=!1,this.panalyticsId="",this.adsCandidatesDetectionInterval=null,this.ticket=null,this.cycleNumber=0,this.RefreshTicket(),c.SendNewPageCreatedTicket(Q.ToJSON(this.ticket))}RefreshTicket(){this.pageUrl=document.location.href,this.ticketId=Q.GenerateUUID(),this.cycleNumber=0,this.ticket=g.GetSingleOutTicket(this.panalyticsId,this.ticketId,this.tabId),this.init&&this.AdsManager&&this.AdsManager.PageRefreshed(this.pageUrl,this.ticketId)}Init(){this.init||c.SendInitMes({ticketId:this.ticketId,url:this.pageUrl},this.onGetInitConfig.bind(this))}onGetInitConfig(y){return y.activeStatus?this.init?null:(this.init=!0,this.tabId=y.tabId,this.id="mp_"+y.tabId,this.panalyticsId=y.panalyticsId,this.ticket.tabId=this.tabId,this.ticket[W.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.Config=new K(this.id,y.configuration),this.IOManager=new c(this.id,this.Config),this.IOManager.onTabUrlChanged=this.onTabUrlChanged.bind(this),this.IOManager.Init(),this.AdBlockerAgent=new A(this.id,this.IOManager),this.AdBlockerAgent.Init(y.adBlockerStatus,y.excludeList,y.tabId),this.AdsManager=new z(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.PanelsRegulator=new m(this.id),this.PanelsRegulator.Init(this.AdBlockerAgent,this.onGotRegulatorRespond.bind(this)),void(y.activeAdBlockInspectorAgent&&(this.AdBlockInspectorAgent=new p(this.id),this.AdBlockInspectorAgent.Init(this.Config.GetAdBlockInspectorConfig())))):null}onGotRegulatorRespond(y){return!!this.init&&(!!y&&(this.adsCandidatesDetectionInterval=setInterval(this.onAdsCandidatesDetected.bind(this),1e4),this.AdsManager.ActivateAdsdetectors(),c.SendNewPageCreatedTicket(Q.ToJSON(this.ticket)),void c.SendPanelRegulatorResult(y)))}onTabUrlChanged(y){return!(!y?.newUrl||!y?.initedTicketId)&&((y.newUrl!==this.pageUrl||y.initedTicketId===this.ticketId)&&(this.RefreshTicket(),c.SendSinglePageReinitMes({ticketId:this.ticketId,url:this.pageUrl}),void c.SendNewPageCreatedTicket(Q.ToJSON(this.ticket))))}onAdsCandidatesDetected(){return!!this.init&&(Q.IsOnChromeRuntime()?!!this.panalyticsId.length&&(this.cycleNumber=this.cycleNumber+1,this.ticket[W.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.ticket.windowSize=Q.GetWindowSize(),this.ticket.firstVisit=this.cycleNumber<=1,this.ticket.adCandidatesHtml5=this.AdsManager.GetHtml5CandidatesPrebuildInfo(),void this.IOManager.SendTicket(Q.ToJSON(this.ticket))):(this.adsCandidatesDetectionInterval&&clearInterval(this.adsCandidatesDetectionInterval),!1))}}},7376:(y,G,Z)=>{const Q=Z(8384),W=Z(1568),g=Z(2880),z=Z(9358);y.exports=class{constructor(y){this.id=y,this.init=!1,this.extensionId=""+chrome.runtime.id,this.AdBlockerAgent=null,this.onInitCallback=null}Init(y,G){!this.init&&y&&(this.onInitCallback=G,this.init=!0,this.AdBlockerAgent=y,document.readyState===W.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.ActivateRegulator.bind(this)):document.readyState!==W.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==W.DOCUMENT_READYSTATE_COMPLETE||this.ActivateRegulator())}ActivateRegulator(){this.RegisterPanel(),setTimeout(this.Regulate.bind(this),500)}Regulate(){let y=!0,G="",Z=[];try{let Q=document.body.getAttribute("bis_register");if(Q&&Q.length){Z=JSON.parse(z.decode(Q));for(let y=0;y<Z.length&&0===G.length;y++)Z[y].master&&(G=Z[y].extensionId);G.length&&this.extensionId!==G&&(y=!1)}}catch(y){}this.onInitCallback&&this.onInitCallback(y)}GetPanelScore(){let y=Q.X.split("."),G=1e4*parseInt(y[0])+100*parseInt(y[1])+parseInt(y[2]),Z=this.AdBlockerAgent.GetStatus();return g.IsFacebookUrl(document.location.href)?Z[W.ADBLOCKER_FOR_FACEBOOK]===W.ADBLOCKER_STATUS_ENABLED&&(G*=10):g.IsTwitterUrl(document.location.href)?Z[W.ADBLOCKER_FOR_TWITTER]===W.ADBLOCKER_STATUS_ENABLED&&(G*=10):g.IsRedditUrl(document.location.href)?Z[W.ADBLOCKER_FOR_REDDIT]===W.ADBLOCKER_STATUS_ENABLED&&(G*=10):Z[W.ADBLOCKER_FOR_DISPLAY]===W.ADBLOCKER_STATUS_ENABLED&&(G*=10),G}UpdateRegister(y){let G={master:!0,extensionId:this.extensionId,adblockerStatus:this.AdBlockerAgent.GetStatus(),version:Q.X,score:this.GetPanelScore()},Z=!0;for(let Q=0;Q<y.length&&Z;Q++)y[Q].extensionId===this.extensionId&&(Z=!1,y[Q]=G);Z&&y.push(G)}ChooseWinner(y){if(y&&y.length)if(1===y.length);else{let G=0,Z=y[G].score;for(let Q=0;Q<y.length;Q++)y[Q].master=!1,y[Q].score>Z&&(Z=y[Q].score,G=Q);y[G].master=!0}}RegisterPanel(){try{let y=[],G=document.body.getAttribute("bis_register");G&&G.length&&(y=JSON.parse(z.decode(G))),this.UpdateRegister(y),this.ChooseWinner(y),document.body.setAttribute("bis_register",z.encode(JSON.stringify(y)))}catch(y){}}}},7235:(y,G,Z)=>{const Q=Z(2880),W=Z(8384),g=Z(9346),z=Z(5364),c=Z(1568);y.exports=class extends g{constructor(y,G,Z,Q){super(y),this.Config=G,this.skinAdsConfig=G.config.skinAdsConfig,this.IOManager=Z,this.IOManager.onGotSkinAdCandidatesExtractionStatusesCallback=this.onGotSkinAdCandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=Q}ActivateDetector(){this.DetectCandidates(),setTimeout((()=>{this.DetectCandidates()}),500),setInterval((()=>{this.DetectCandidates()}),1e3)}SendCandidatesToBackground(){this.Candidates.length&&z.SendAdCandidates(this.id,this.Candidates,c.MESSAGE_TYPE_CANDIDATES_DATA_SKINADS,null)}DetectCandidates(){this.ClearCandidates(),this.GetSkinAdFromBodyBackground(),0==this.CandidatesCount&&this.GetSkinAdFromDivBackground(),this.SendCandidatesToBackground()}GetSkinAdFromBodyBackground(){var y,G={source:[],targetUrl:[]},Z=document.body;if(Z&&!Z.hasAttribute("bis_skin_checked")&&(y=Q.GetUrlFromStyleStr(window.getComputedStyle(Z).backgroundImage)),y&&Q.isValidUrl(y)){Z.setAttribute("bis_skin_checked","1");var W={type:"single",src:y,size:Q.GetFullElementSize(Z)};G.source.push(W);for(var g=Q.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),z=0;z<g.length;z++){var c=g[z];c.setAttribute&&c.setAttribute("bis_skin_checked","1");var A=c.getBoundingClientRect(),p=c.firstElementChild?c.firstElementChild.getBoundingClientRect():null;c.href&&(A.width>50&&A.height>=100&&0==A.left||p&&p.width>50&&p.height>=100&&0==p.left)&&Q.isValidUrl(c.href)&&!G.targetUrl.includes(c.href)&&G.targetUrl.push(c.href),this.findElementsByHref(G.targetUrl,c)}}G.source.length&&G.targetUrl.length&&this.AddCandidate(G)}GetSkinAdFromDivBackground(){let y={source:[],targetUrl:[]},G=!1,Z=Q.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_DIV_COLLECTION);for(let W=0;W<Z.length&&!G;W++){let g=Z[W];g.setAttribute&&g.setAttribute("bis_skin_checked","1");let z=g.getBoundingClientRect();if(z.width>50&&z.height>500&&0==z.left){let Z=Q.GetUrlFromStyleStr(window.getComputedStyle(g).backgroundImage);if(Z&&Q.isValidUrl(Z)){let W={type:"single",src:Z,size:Q.GetFullElementSize(g)};y.source.push(W),G=!0}}}if(G){let G=Q.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION);for(let Z=0;Z<G.length;Z++){let W=G[Z];W.setAttribute&&W.setAttribute("bis_skin_checked","1");let g=W.getBoundingClientRect();W.href&&0==g.left&&(g.width>50&&g.height>500||g.width>500&&g.height>50)&&Q.isValidUrl(W.href)&&!y.targetUrl.includes(W.href)&&y.targetUrl.push(W.href)}}y.source.length&&y.targetUrl.length&&this.AddCandidate(y)}findElementsByHref(y,G){const Z=G.href;y.includes(Z)&&(this.SetBorderToCandidate(G),G.setAttribute("bis_skin_element","1"))}SetBorderToCandidate(y){const G=y.getBoundingClientRect();y&&(G.width>1&&G.height>1?y.style.cssText+="border: 6px solid red !important; display: block;":y.firstElementChild.style.cssText+="border: 6px solid red !important; display: block;")}onGotSkinAdCandidatesExtractionStatuses(y){if(W.j&&W.v&&y&&y.length)for(let G=0;G<y.length;G++){let Z=Q.QuerySelectorAll(document,y[G].query);Z&&Z.forEach((Z=>{Z&&Q.UpdateCandidateStatusBorderColor(Z,y[G].extractionStatus)}))}}}},7584:(y,G,Z)=>{const Q=Z(8384),W=Z(2880),g=Z(1568);y.exports=class{static GetSingleOutTicket(y,G,Z){let z={tabId:Z,ticketFormatVersion:3,partnerId:Q.m,distributorId:Q.I,ticketId:G,firstVisit:!1,url:document.location.href,userAgent:navigator.userAgent,creationTime:W.GetCurrentDataTimeStr(),windowSize:W.GetWindowSize(),timeOnPage:0,adCandidatesSkinAd:[],adCandidatesBanner:[],adCandidatesHtml5:[],adsFacebook:[],adsTwitter:[],adsReddit:[],adsPinterest:[],adsInstagram:[],adsLinkedin:[],adsTiktok:[],aiMessages:[],adCandidatePlacements:{skinAd:0,banner:0,html5:0,facebook:0,twitter:0,reddit:0,pinterest:0,tiktok:0,instagram:0,linkedin:0},videoTraffics:[],activeAdBlocker:!1};z[g.TICKET_ALIAS_PANALYTICSID]=y,z[g.TICKET_ALIAS_PINSTANCEID]=Q.K;let c=W.GetBaseHref();""!==c&&(z.base=c);let A=chrome.runtime.getManifest();return z.extensionVersion=A.version,z.panelosVersion=Q.X,z}}},855:(y,G,Z)=>{const Q=Z(1568),W=Z(9358),g=Z(2880),z=Z(1936),c=Z(2938),A=Z(8940),p=Z(5364);y.exports=class{constructor(y,G,Z){this.id=y,this.Config=G,this.IOManager=Z,this.onDetectVideoHarCallback=null,this.VideoTrafficValidator=new A(this.id,this.Config),this.VideoTrafficDetector=new c(this.id),this.VideoTrafficDetector.InjectXhrDetector(this.Config),this.IOManager.onGotVideoXHRTrafficCallback=this.ProcessVideoXHRTraffic.bind(this)}ActivateDetector(){this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS()}PageRefreshed(y,G){g.IsYouTubeUrl(y)||(this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS())}CheckVideoTrafficInHTML(){let y=new z(Q.VIDEO_TRAFFIC_SOURCE_HTML,"GET",window.location.href,"text/html",document.documentElement.outerHTML),G=this.VideoTrafficValidator.Validate(y);G&&this.SendVideoTraffic(y,G)}CheckVideoTrafficInJS(){let y=g.QuerySelectorAll(document,"script");for(let G=0;G<y.length;G++){let Z=new z(Q.VIDEO_TRAFFIC_SOURCE_JS,"GET",y[G].src,"text/javascript",y[G].innerHTML),W=this.VideoTrafficValidator.Validate(Z);W&&this.SendVideoTraffic(Z,W)}}ProcessVideoXHRTraffic(y){if(z.IsXHRvalid(y)){let G=new z(Q.VIDEO_TRAFFIC_SOURCE_XHR,y.requestMethod,y.url,y.type,y.content,y.encodedPostBody),Z=this.VideoTrafficValidator.Validate(G);Z&&this.SendVideoTraffic(G,Z)}}SendVideoTraffic(y,G){if(y&&G){let Z={requestMethod:y.GetRequestMethod(),url:y.GetUrl(),contentType:y.GetType(),mediaType:G.name,alias:G.alias};if(y.IsEncodedPostBodyExist()&&(Z.encodedPostBody=y.GetEncodedPostBody()),G.reduceSizeFilter&&G.reduceSizeFilter.active){let Q;if(null!==(Q=A.CreateRegExp(G.reduceSizeFilter.reducePattern).exec(y.GetContent()))&&Q.length>0&&Math.max(...G.reduceSizeFilter.regResIndexes)<Q.length){let y=Q.filter(((y,Z)=>G.reduceSizeFilter.regResIndexes.includes(Z)));Z.encodedText=W.encode(y.join(" "))}}else Z.encodedText=W.encode(y.GetContent());p.SendVideoHar(this.id,Z)}}}},1936:(y,G,Z)=>{const Q=Z(9358);y.exports=class{constructor(y,G,Z,Q,W,g=null){this.trafficSource=y,this.requestMethod=G,this.url=Z,this.type=Q,this.content=W,this.SetEncodedPostBody(g)}static IsXHRvalid(y){return y&&y.hasOwnProperty("requestMethod")&&y.hasOwnProperty("url")&&""!==y.url}SetEncodedPostBody(y){y&&"string"==typeof y&&y.length>0&&(this.encodedPostBody=Q.encode(y))}GetEncodedPostBody(){return this.encodedPostBody?this.encodedPostBody:null}IsEncodedPostBodyExist(){return!!this.encodedPostBody}GetTrafficSource(){return this.trafficSource}GetRequestMethod(){return this.requestMethod}GetUrl(){return this.url}GetType(){return this.type}GetContent(){return this.content}SetContent(y){this.content=y}SetUrl(y){this.url=y}}},2938:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y){this.id=y}InjectXhrDetector(y){if(document.head){let G=document.createElement("script");this.setAttributes(G,y),document.head.appendChild(G)}}setAttributes(y,G){const Z=Q.getURL("../executors/traffic.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("data-bis-config",JSON.stringify(G.config.filterLists.blacklistIframeSrc)),y.src=Z}}},8940:(y,G,Z)=>{const Q=Z(1568);class W{constructor(y,G){this.id=y,this.Config=G}Validate(y){let G=[],Z=!1;if(y&&(y.GetTrafficSource()===Q.VIDEO_TRAFFIC_SOURCE_HTML?(G=this.Config.GetVideoValidatorsForHTML(),Z=!0):y.GetTrafficSource()===Q.VIDEO_TRAFFIC_SOURCE_XHR?(G=this.Config.GetVideoValidatorsForXHR(),Z=!0):y.GetTrafficSource()===Q.VIDEO_TRAFFIC_SOURCE_JS&&(G=this.Config.GetVideoValidatorsForJS(),Z=!0),Z))for(let Z of G){if(this.ValidateUseConfiguration(y,Z))return this.specificFilterCandidate(y,Z)}return!1}ValidateUseConfiguration(y,G){const Z=Object.keys(G);let Q=[];for(let y of Z)-1!==y.indexOf("Pattern")&&Q.push(y);let g=0,z={domainPattern:"GetUrl",mimePattern:"GetType",contentPattern:"GetContent"};for(let Z of Q)try{let Q=W.CreateRegExp(G[Z]),c=z[Z];g+=Q.test(y[c]())?1:0}catch(y){}return g===Q.length}static CreateRegExp(y){let G=y.replace(/.*\/([gimy]*)$/,"$1"),Z=y.replace(new RegExp("^/(.*?)/"+G+"$"),"$1");return new RegExp(Z,G)}specificFilterCandidate(y,G){return!(!y.IsEncodedPostBodyExist()&&"YT_FORCING_KEY"===G.alias)&&G}}y.exports=W},1368:(y,G,Z)=>{const Q=Z(1568),W=Z(2880),g=Z(100),z=Z(9587),c=Z(778),A=Z(6912),p=Z(8065),K=Z(8476),m=Z(8375);y.exports=class{#y;#W;#g;#z=null;constructor(y,G,Z){switch(this.#y=y,this.#W=G,this.#g=Z,!0){case W.isClaudeUrl(this.#g,G):this.#z=new g(this.#y,this.#W);break;case W.isChatgptUrl(this.#g,G):this.#z=new z(this.#y,this.#W);break;case W.isCopilotUrl(this.#g,G):this.#z=new c(this.#y,this.#W);break;case W.isPerplexityUrl(this.#g,G):this.#z=new A(this.#y,this.#W);break;case W.isMetaUrl(this.#g,G):this.#z=new p(this.#y,this.#W);break;case W.isDeepseekUrl(this.#g,G):this.#z=new K(this.#y,this.#W);break;case W.isGeminiUrl(this.#g,G):this.#z=new m(this.#y,this.#W)}this.#c()}#c(){document.readyState===Q.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.#A.bind(this)):document.readyState!==Q.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==Q.DOCUMENT_READYSTATE_COMPLETE||this.#A.apply(this)}#A(){this.#z&&this.#z.activateDetector()}pageRefreshed(y,G){}}},9587:(y,G,Z)=>{Z(1568);const Q=Z(9700);y.exports=class extends Q{#y;#W={};#p={fileName:"chatgpt",className:"PosdChatgptMessagesCollector:Injector"};constructor(y,G){super(y),this.#y=y,this.#W=G.u||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#p))}}},100:(y,G,Z)=>{const Q=Z(9700);Z(1568);y.exports=class extends Q{#y;#W={};#p={fileName:"claude",className:"PosdClaudeMessagesCollector:Injector"};#K=!1;constructor(y,G){super(y),this.#y=y,this.#W=G.B||{}}activateDetector(){this.#K||(this.#K=!0,this.injectDetector(this.#p))}}},778:(y,G,Z)=>{const Q=Z(9700);Z(1568);y.exports=class extends Q{#y;#W={};#p={fileName:"copilot",className:"PosdCopilotMessagesCollector:Injector",injectBeforeFirstChild:!0};#K=!1;constructor(y,G){super(y),this.#y=y,this.#W=G.k||{}}activateDetector(){this.#K||(this.#K=!0,this.injectDetector(this.#p))}}},8476:(y,G,Z)=>{Z(1568);const Q=Z(9700);y.exports=class extends Q{#y;#W={};#p={fileName:"deepseek",className:"PosdDeepseekMessagesCollector:Injector"};constructor(y,G){super(y),this.#y=y,this.#W=G.R||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#p))}}},8375:(y,G,Z)=>{Z(1568);const Q=Z(9700);y.exports=class extends Q{#y;#W={};#p={fileName:"gemini",className:"PosdGeminiMessagesCollector:Injector"};constructor(y,G){super(y),this.#y=y,this.#W=G.R||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#p))}}},8065:(y,G,Z)=>{const Q=Z(9700);Z(1568);y.exports=class extends Q{#y;#W={};#p={fileName:"meta",className:"PosdMetaMessagesCollector:Injector"};#K=!1;constructor(y,G){super(y),this.#y=y,this.#W=G.D||{}}activateDetector(){this.#K||(this.#K=!0,this.injectDetector(this.#p))}}},6912:(y,G,Z)=>{const Q=Z(9700);Z(1568);y.exports=class extends Q{#y;#W={};#p={fileName:"perplexity",className:"PosdPerplexityMessagesCollector:Injector"};#K=!1;constructor(y,G){super(y),this.#y=y,this.#W=G.S||{}}activateDetector(){this.#K||(this.#K=!0,this.injectDetector(this.#p))}}},655:(y,G,Z)=>{const Q=Z(2880),W=Z(1568);y.exports=class{constructor(y,G,Z){this.id=y,this.options=G,this.AdBlockerAgent=Z,this.active=!1,this.lastDetectTime=Q.GetCurrentTimestampMs()-1e3,this.activateDetectorTime=Q.GetCurrentTimestampMs(),this.detectorInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.isObserverAlreadySet=!1,this.onScrollListenerHandler=null,this.onScrollListenerIsOn=!1,this.onScrollCallback=null}ActualizeDetector(){}ActivateMutationObserver(){}DeactivateMutationObserver(){}Detector(){}HideAd(y,G,Z){}CheckIfAd(y){}CheckIfAdRendered(y){}ExtractAd(y){}ActivateDetector(){this.active||(this.activateDetectorTime=Q.GetCurrentTimestampMs(),this.active=!0,this.options.firstDetectionAfterActivationTimeoutMs&&this.options.firstDetectionAfterActivationTimeoutMs>0&&setTimeout((()=>{this.DetectCandidates(W.AD_DETECTOR_INITIATOR_ACTIVATION)}),this.options.firstDetectionAfterActivationTimeoutMs),this.startIntervalDetectCandidates(W.AD_DETECTOR_INITIATOR_TIMER),this.options.useObserver&&this.IsActualByKeyWordInUrl&&(this.observerNodesListenerInterval=setInterval((()=>{this.observerNodesChecksAmount=this.observerNodesChecksAmount+1,this.ActivateMutationObserver(),(this.isObserverAlreadySet||this.observerNodesChecksAmount>this.options.observerNodesChecksMaxAmount)&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.activateOnScrollEvent())}),this.options.observerNodesCheckIntervalMs)))}DeactivateDetector(y){y===W.AD_DETECTOR_INITIATOR_URL&&(this.DeactivateMutationObserver(),(this.onScrollCallback||this.onScrollListenerIsOn)&&(window.removeEventListener("scroll",this.onScrollCallback),this.onScrollCallback=null,this.onScrollListenerIsOn=!1,this.onScrollListenerHandler&&(clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null))),this.detectorInterval&&(clearInterval(this.detectorInterval),this.detectorInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0),this.activateDetectorTime=Q.GetCurrentTimestampMs(),this.lastDetectTime=Q.GetCurrentTimestampMs()-1e3,this.active=!1}DetectCandidates(y,G){if(!this.ActualizeDetector()||!this.IsActualByKeyWordInUrl)return void this.checkLimits(y);let Z=Q.GetCurrentTimestampMs();Q.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs?(this.checkLimits(y),G&&this.startIntervalDetectCandidates()):Z-this.lastDetectTime>this.options.minTimeAfterLastDetectionMs&&(this.lastDetectTime=Z,this.Detector())}get IsActualByKeyWordInUrl(){const y=this.options.urlInvalidKeyWord,G=this.options.urlValidationByKeyWord;if(!y&&!G)return!0;const Z=window.location.href;let Q=!!y&&y.some((y=>Z.includes(y))),W=!G||Z.includes(G);return!Q&&W}checkLimits(y){return!this.options.maxActualizeDetectorWaitTimeMs||(!(Q.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs)||(this.DeactivateDetector(y),!1))}activateOnScrollEvent(){this.options.useOnScroll&&!this.onScrollListenerIsOn&&this.IsActualByKeyWordInUrl&&this.ActualizeDetector()&&(this.onScrollCallback=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0)}onScroll(y){this.DetectCandidates(W.AD_DETECTOR_INITIATOR_SCROLL_EVENT),this.startIntervalDetectCandidates(W.AD_DETECTOR_INITIATOR_SCROLL_EVENT),window.removeEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!1,this.onScrollListenerHandler=setTimeout((()=>{window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0,clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null}),this.options.onScrollTimeout)}startIntervalDetectCandidates(y){this.detectorInterval||(this.detectorInterval=setInterval((()=>{this.DetectCandidates(y)}),this.options.detectionIntervalMs))}}},97:(y,G,Z)=>{const Q=Z(8384),W=Z(2880),g=Z(9358),z=Z(1568),c=Z(9346),A=Z(5364),p=Z(7678),K=Z(6335),m=Z(7948),I=Z(1899),U=Z(2300),M=Z(1454);y.exports=class extends c{constructor(y,G,Z){super(y),this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.fbConfig=G.FacebookConfig,this.AdBlockerAgent=Z,this.VideoTrafficDetector=new M(this.id),this.VideoTrafficDetector.InjectDetector()}onPageUrlChanged(y,G){this.available&&setTimeout((()=>{this.DeactivateDetectors(z.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetector(y){y===z.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.fbContent=document.querySelector(this.fbConfig.FB_CONTENT),this.fbContent&&(this.DetectorFeed=new K(this.id,this.fbConfig.FEED_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorFeed.HideAd=this.HideAd.bind(this),this.DetectorFeed.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorFeed.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorRightColumn=new I(this.id,this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorRightColumn.HideAd=this.HideAd.bind(this),this.DetectorRightColumn.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorRightColumn.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorWatch=new m(this.id,this.fbConfig.FEED_WATCH_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorWatch.HideAd=this.HideAd.bind(this),this.DetectorWatch.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorWatch.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorMarketplace=new U(this.id,this.fbConfig.MARKETPLACE_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorMarketplace.HideAd=this.HideAd.bind(this),this.DetectorMarketplace.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorMarketplace.ExtractAd=this.ProcessFbCreative.bind(this),this.ActivateDetectors())}ActivateDetectors(){this.DetectorRightColumn.ActivateDetector(),this.DetectorFeed.ActivateDetector(),this.DetectorWatch.ActivateDetector(),this.DetectorMarketplace.ActivateDetector()}DeactivateDetectors(y){this.DetectorRightColumn.DeactivateDetector(y),this.DetectorFeed.DeactivateDetector(y),this.DetectorWatch.DeactivateDetector(y),this.DetectorMarketplace.DeactivateDetector(y)}ProcessFbCreative(y,G,Z){try{let g=!1,c=!1,K=!1;if(y){let m=document.querySelector(`[${z.ATTRIBUTE_BIS_ID}=${y}]`);if(m)if(g=!0,c=this.IsAdContentRendered(m,p.GetMinImgsSpacePercentag(this.fbConfig,Z)),c){K=this.IsVideoCreative(m),A.SendCandidatePlacementsCount(this.id,1,z.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK,null);let y={x:0,y:0};if(p.IsPostHidden(m)){m.setAttribute(z.ATTRIBUTE_BIS_SIZE,W.ToJSON(p.GetPostContainerSize(m)));let G=m.getAttribute(z.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);G&&(y.x=parseInt(G))}else W.SetFullSizeToElement(m);let g=m.querySelectorAll("*");for(let G=0;G<g.length;G++)W.SetFullSizeToElement(g[G],null,y);let c=[];c.push(this.BuildCreative(m,K,G,Z)),this.SendFacebookCandidates(c),Q.j&&Q.v&&(this.IsVideoCreative(m)?m.style.cssText+=z.STYLES_OUTLINE_VIDEO_AD:m.style.cssText+=z.STYLES_OUTLINE_SUCCESS_DETECT)}else m.removeAttribute&&m.removeAttribute(z.ATTRIBUTE_BIS_ID)}}catch(y){}}BuildCreative(y,G,Z,Q){let W=p.GetPostContainerSize(y),c=Array.from(document.querySelectorAll("link")),A=Array.from(document.querySelector("head").querySelectorAll("style[nonce]")),K=c.concat(A),m='<html><head><meta charset="utf-8">';for(let y of K)m+=y.outerHTML;if(m+=`</head><body style='position:absolute; top:0px; left:0px; width:${W.w}px; height:${W.h}px;'>${y.outerHTML}</body></html>`,this.AdBlockerAgent.IsEnabledForFacebook()&&Z?.length&&m.includes(Z)){let y="";m=m.replace(Z,y)}let I="",U=!1;this.fbConfig.ABOUT_SECTION_CONFIG&&this.fbConfig.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE&&(U=!0),this.fbConfig&&U&&(this.DetectorFeed&&Q===z.FACEBOOK_AD_PLACEMENT_TYPE_FEED?I=this.DetectorFeed.GetAboutPageLink(y):this.DetectorMarketplace&&Q===z.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?I=this.DetectorMarketplace.GetAboutPageLink(y):this.DetectorWatch&&Q===z.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH&&(I=this.DetectorWatch.GetAboutPageLink(y)));let M={content:g.encode(m),adPlacementType:Q,designVersion:z.FACEBOOK_DESIGN_VERSION_NEW,aboutPageLink:I,aboutSectionContent:"",size:W};return G&&(M.videoData={videoId:"",videoUrl:"",audioUrl:""}),y.setAttribute(z.ATTRIBUTE_BIS_STATUS,"extracted"),M}HideAd(y,G,Z){let Q="";return y&&G&&y&&y.style&&(Q=`position: absolute !important; width: ${G.w}px; overflow: hidden; height: 0px;`,p.IsPostHidden(y)||(y.style.cssText+=Q,y.setAttribute(z.ATTRIBUTE_BIS_HIDE_HEIGHT,G.h),y.setAttribute(z.ATTRIBUTE_BIS_HIDE_WIDTH,G.w),y.setAttribute(z.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"))),y.style.cssText}IsAdContentRendered(y,G){let Z=p.GetPostContainerSize(y);if(W.GetImagesSpacePercentage(this.fbConfig.TAGS_FOR_LOADING_CHECK,y,Z).some((y=>y>=G)))return!0;let Q=y.querySelector(`a[${z.ATTRIBUTE_BIS_LABEL}]`);return Q&&Q.removeAttribute(z.ATTRIBUTE_BIS_LABEL),!1}IsVideoCreative(y){return 0!==y.querySelectorAll("video").length}AddNeededStylesForElement(y,G){try{if(G.w<=3&&G.h<=3&&("SPAN"===y.nodeName||"DIV"===y.nodeName)){let G=y.getAttribute("class");if(G&&G.includes("accessible_elem")){let G=getComputedStyle(y);y.setAttribute(z.ATTRIBUTE_BIS_STYLE,`clip:${G.getPropertyValue("clip")}; height:${G.getPropertyValue("height")}; overflow:${G.getPropertyValue("overflow")}; position:${G.getPropertyValue("position")}; white-space:${G.getPropertyValue("white-space")}; width:${G.getPropertyValue("width")};`)}}}catch(y){}}LoadAboutPageAndSendCandidates(y){if(y&&y.length){let G=y[0].aboutPageLink;G&&G.length?fetch(G,{headers:this.fbConfig.ABOUT_SECTION_CONFIG.HEADERS,method:"GET"}).then((G=>{try{if(200===G.status)return G.text();this.SendFacebookCandidates(y)}catch(y){}})).then((G=>{let Z="",Q=G.split(/\r?\n/);if(Q.length)for(let y=0;y<Q.length;y++){!new RegExp(this.fbConfig.ABOUT_SECTION_CONFIG.CONTENT_CHECK_STRING).test(Q[y])||Z.includes("delegate_page_id")&&Z.includes("about_app_sections")||(Z+=Q[y])}y[0].aboutSectionContent=g.encode(Z),this.SendFacebookCandidates(y)})).catch((()=>{this.SendFacebookCandidates(y)})):this.SendFacebookCandidates(y)}}SendFacebookCandidates(y){A.SendAdCandidates(this.id,y,z.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK,null),this.AdBlockerAgent.IsEnabledForFacebook()&&this.AdBlockerAgent.SetHiddenAmount(y.length)}}},7678:(y,G,Z)=>{const Q=Z(1568),W=Z(2880);class g{static GetVisibleText(y){let G=y.querySelectorAll(":scope > *");if(0!==G.length)return Array.prototype.slice.call(G).map(g.GetVisibleText).flat();if("none"!==getComputedStyle(y).display){let G=y.innerText;try{if(0===G.length&&y.getAttribute){let Z=y.getAttribute("data-content");Z&&Z.length&&(G=Z)}}catch(y){}return G}return""}static GetVisibleSpansText(y,G,Z=[]){if(y.hasAttribute&&y.hasAttribute("bis_sponsor_checked")&&3==y.getAttribute("bis_sponsor_checked"))return"";let Q=y.querySelectorAll(G),W="",g=parseInt(y.getAttribute("bis_sponsor_checked"))||0;return Q.forEach((y=>{const G=getComputedStyle(y);if("none"!==G.display&&"absolute"!==G.position)try{let G=Array.from(y.childNodes).filter((y=>3===y.nodeType)).map((y=>y.nodeValue.trim())).reduce(((y,G)=>y+G),"");if(0===G.length&&y.getAttribute){let Z=y.getAttribute("data-content");Z&&Z.length&&(G=Z)}W+=G}catch(y){}})),y.setAttribute("bis_sponsor_checked",parseInt(g)+1),W&&Z.length&&!Z.includes(W)&&(W=this.checkLettersOfAlly(W,Z)),W}static checkLettersOfAlly(y,G){const Z=y.split(""),Q=Z.length-1,W=G.length;let g=1,z=!1,c=0,A="";for(;!z&&g<=W;){const W=G[g-1],p=Z[c];-1!==W.indexOf(p)&&W.length===Z.length?Q!==c?c+=1:Q===c&&y.length===W.length?(z=!0,A=W):(g+=1,c=0):(g+=1,c=0)}return A}static HideSateliteSponsoredString(y,G){try{G&&G.forEach((G=>{if(G.innerText){let Z=G.innerText;y.SPONSORED_TEXTS.some((y=>-1!==Z.indexOf(y)))&&(G.style="display:none")}}))}catch(y){}}static GetMinImgsSpacePercentag(y,G){return G===Q.FACEBOOK_AD_PLACEMENT_TYPE_FEED?y.FEED_PAGE.MIN_IMGS_SPACE_PERCENTAGE:G===Q.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?y.MARKETPLACE_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:G===Q.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN?y.RIGHT_COLUMN_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:G===Q.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH?y.FEED_WATCH_PAGE.MIN_IMGS_SPACE_PERCENTAGE:0}static IsInitiallyRendered(y,G){return!!g.IsPostHidden(y)||G.w>0&&G.h>10}static IsPostHidden(y){return"hidden"===y.getAttribute(Q.ATTRIBUTE_BIS_HIDE_STATUS)}static GetPostContainerSize(y){let G=W.GetFullElementSize(y);if(g.IsPostHidden(y)){let Z=y.getAttribute(Q.ATTRIBUTE_BIS_HIDE_HEIGHT);Z&&(G.h=parseInt(Z));let W=y.getAttribute(Q.ATTRIBUTE_BIS_HIDE_WIDTH);W&&(G.w=parseInt(W));let g=y.getAttribute(Q.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);g&&(G.x=G.x+parseInt(g),G.abs_x=G.abs_x+parseInt(g))}return G}}y.exports=g},6335:(y,G,Z)=>{const Q=Z(655),W=Z(7678),g=Z(2880),z=Z(1568),c=Z(6882);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.fbConfig=Q,this.fbFeed=null,this.fbFeedObserver=null}ActualizeDetector(){return!!this.isValidUrl&&(this.fbFeed=this.FeedContainer,!!this.fbFeed)}ActivateMutationObserver(){this.fbFeed?(this.fbFeedObserver||(this.fbFeedObserver=new MutationObserver(this.DetectCandidates.bind(this,z.AD_DETECTOR_INITIATOR_MUTATION)),this.fbFeedObserver.observe(this.fbFeed,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}get FeedContainer(){const y=this.fbConfig.FEED_PAGE.MIN_HEIGHT,G=this.fbConfig.FEED_PAGE.FEED_QUERIES,Z=G.length;let Q=!1,W=null;for(let g=0;g<Z&&!Q;g++){let Z=G[g],z=document.querySelector(Z);if(z){const G=z.offsetHeight;if(z.children.length>2&&G>y)W=z,Q=!0;else if(z.nodeName.search(/span/i)>-1){let G=z.nextElementSibling;if(G&&G.children){const Z=G.offsetHeight;1===G.children.length&&G.querySelector("h3")?(W=G.querySelector("h3").parentElement,Q=!0):2===G.children.length?(z=G.querySelector("div:not([class])"),z&&z.offsetHeight>y&&(W=z,Q=!0)):G.children.length>1&&Z>y&&(W=G,Q=!0)}}}}return W}DeactivateMutationObserver(){this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}Detector(){let y=this.FeedContainer;if(y){let G=Array.from(y.children);if(G.length&&1!==G.length||(G=document.querySelectorAll(this.fbConfig.FEED_PAGE.POSTS_QUERY)),!G)return;for(let y=0;y<G.length;y++){let Z=G[y],Q=g.GetElementSize(Z);if(!Z.hasAttribute(z.ATTRIBUTE_BIS_ID)&&W.IsInitiallyRendered(Z,Q)&&this.CheckIfAdRendered(Z,W.GetMinImgsSpacePercentag(this.fbConfig,z.FACEBOOK_AD_PLACEMENT_TYPE_FEED))&&this.CheckIfAd(Z)){let W="";this.AdBlockerAgent.IsEnabledForFacebook()&&(W=this.HideAd(G[y],Q,z.FACEBOOK_AD_PLACEMENT_TYPE_FEED)),this.addCoverImageSrcAttribute(Z);let c=g.GenerateAndSetBisIdToFBAds(Z),A=this.options.extractAdStaticPartTimeoutMs+g.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(Z),setTimeout(this.ReadyToExtractAd.bind(this,c,W),A)}}}}ReadyToExtractAd(y,G){try{if(y){let Z=document.querySelector(`[${z.ATTRIBUTE_BIS_ID}=${y}]`);if(!Z)return;let Q=Z.querySelector(`[${z.ATTRIBUTE_BIS_LABEL}="fb_feed_ad"]`);Q?this.ExtractAd(y,G,z.FACEBOOK_AD_PLACEMENT_TYPE_FEED):null!==Q&&(Q.removeAttribute(z.ATTRIBUTE_BIS_ID),Z.removeAttribute(z.ATTRIBUTE_BIS_ID))}}catch(y){}}CheckIfAd(y){const G=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES;let Z=!1;for(let Q=0;Q<G.length&&!Z;Q++){const W=G[Q];let g=y.querySelectorAll(W);if(Z=this.GetTextCustom(g),Z||(Z=this.GetTextFromXlink(g)),Z||(Z=this.GetTextIfUseCanvas(g)),Z){y.firstElementChild.setAttribute(z.ATTRIBUTE_BIS_LABEL,"fb_feed_ad");break}}return!!Z}GetTextCustom(y){for(let G=0;G<y.length;G++){const Z=y[G];let Q=Z.innerText,g=Z.getAttribute(this.options.attributeWithSponsorAlly),c=g?[Q,g]:Q;if("string"==typeof Q&&Q.length&&this.isTagSponsored(c))return!0;if(Q&&Q.length>=2&&!Z.hasAttribute(z.ATTRIBUTE_BIS_LABEL)){let y=W.GetVisibleSpansText(Z,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(y!==Q&&y!==g&&"string"==typeof y&&y.length&&this.isTagSponsored(y))return!0}}return!1}GetTextFromXlink(y){let G="";for(let Z of y){if(!Z.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))continue;const y=Z.parentElement;let Q="";if(y?.hasAttribute("bis_processed")&&y?.hasAttribute(z.ATTRIBUTE_BIS_LABEL))continue;const W=Array.from(y.children);if(W&&W.forEach((y=>{let G=y.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);const Z=document.querySelector(G);Z&&("text"===Z.nodeName.toLowerCase()?Q+=Z.textContent:"svg"===Z.nodeName.toLowerCase()&&(Q=this.GetTextFromXlink([Z.firstElementChild])))})),y.setAttribute("bis_processed",""),this.isTagSponsored(Q))return G=Q,y.removeAttribute("bis_processed"),G;G=""}return G}GetTextIfUseCanvas(y){let G="";for(let Z of y){if("canvas"!==Z.nodeName.toLowerCase()||Z.hasAttribute(z.ATTRIBUTE_BIS_LABEL))continue;let y=this.CheckAndGetFieldName(Z);if("string"==typeof y&&this.isTagSponsored(y)){G=y;break}}return G}CheckAndGetFieldName(y){if(y.hasAttribute("bis-text"))return y.getAttribute("bis-text");let G=c.EmptyMessage;G.type=z.MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE,G.content={attribute:"bis-text"},window.postMessage({attribute:"bis-text"},window.location.origin)}AddHiddenTextTags(y){const G=y.querySelectorAll("svg>use");if(G)for(let y=0;y<G.length;y++){const Z=G[y],Q=Z.parentElement;let W=Z.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);let g=document.querySelector(W).cloneNode(!0);g.style.display="none",g.id=g.id+"_bis",Q&&Q.appendChild(g)}}isTagSponsored(y){let G=!1;if(!y)return G;if("string"==typeof y)G=this.fbConfig.SPONSORED_TEXTS.some((G=>G===y));else for(let Z of y)if(G=this.fbConfig.SPONSORED_TEXTS.some((y=>y===Z)),G)break;return G}GetAboutPageLink(y){let G="",Z=this.fbConfig.ABOUT_SECTION_CONFIG,Q=y.querySelectorAll(Z.QUERY_ABOUT_PAGE_HREF);if(!Q?.length)return G;let W="";for(let G=0;G<Q.length;G++){let g=Q[G];if(!g.href)continue;if(!Z.ABOUT_PAGE_BAD_WORDS_MATCHES.every((y=>-1===g.href.indexOf(y))))continue;let z=y.getBoundingClientRect().top,c=g.getBoundingClientRect();c.top>z&&c.top-z<=Z.MAX_DISTANCE_FROM_POST_TOP&&(W=g.href)}if(!W.length)return G;let g=W.substring(Z.HREF_PREFIX.length,W.length),z=g.substring(0,g.search(/(\/|\?)/));if("profile.php"===z&&g.includes("id=")){const y=new RegExp(Z.QUERY_GET_USER_ID_FROM_HREF);z=g.match(y),z&&z.length&&z[1]&&(z=z[1])}return G=Z.ABOUT_PAGE_TEMPLATE.replace("%1",z),G}get isValidUrl(){return!this.fbConfig.FEED_PAGE.INVALID_URL_PATHS.some((y=>window.location.href.includes(y)))}addCoverImageSrcAttribute(y){let G=y.querySelector(this.fbConfig.FEED_PAGE.COVER_IMAGE_QUERY);if(G&&G.hasAttribute("src")){let Z=G.getAttribute("src");y.setAttribute("data-cover-image-src",Z)}}}},2300:(y,G,Z)=>{const Q=Z(655),W=Z(2880),g=Z(7678),z=Z(1568);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.fbConfig=Q,this.fbMarketplace=null,this.fbMarketplaceObserver=null}ActualizeDetector(){return this.fbMarketplace=this.MainContainer,!!this.fbMarketplace}get MainContainer(){return document.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.CONTAINER)}ActivateMutationObserver(){this.fbMarketplace?(this.fbMarketplaceObserver||(this.fbMarketplaceObserver=new MutationObserver(this.DetectCandidates.bind(this,z.AD_DETECTOR_INITIATOR_MUTATION)),this.fbMarketplaceObserver.observe(this.fbMarketplace,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}Detector(){let y=this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.CARDS);if(y?.length)for(let G=0;G<y.length;G++){const Z=y[G];let Q=W.GetElementSize(Z);if(this.addCoverImageSrcAttribute(Z),!Z.hasAttribute(z.ATTRIBUTE_BIS_ID)&&g.IsInitiallyRendered(Z,Q)&&(this.addCoverImageSrcAttribute(Z),this.CheckIfAd(Z))){let y;if(this.AdBlockerAgent.IsEnabledForFacebook()&&(g.HideSateliteSponsoredString(this.fbConfig,document.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SATELITE_SPONSORED_STRING)),y=this.HideAd(Z,Q,z.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE)),this.CheckIfAdRendered(Z,g.GetMinImgsSpacePercentag(this.fbConfig,z.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))){let G=W.GenerateAndSetBisIdToFBAds(Z),Q=this.options.extractAdStaticPartTimeoutMs+W.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.addCoverImageSrcAttribute(Z),setTimeout(this.ExtractAd.bind(this,G,y,z.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE),Q)}}}}addCoverImageSrcAttribute(y){let G=y.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.COVER_IMAGE_QUERY);if(G&&G.hasAttribute("src")&&!y.hasAttribute("data-cover-image-src")){let Z=G.getAttribute("src");y.setAttribute("data-cover-image-src",Z)}}CheckIfAd(y){let G=!1;if(!y||!this.MainContainer)return G;const Z=y.getBoundingClientRect();let Q=Array.from(this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSOR_BLOCKS));if(!Q?.length)return G;for(let W of Q){const Q=W.getBoundingClientRect();if(Q.x-Z.x<=5&&Q.x-Z.x>=-5){let Z=g.GetVisibleSpansText(W,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(this.fbConfig.SPONSORED_TEXTS.some((y=>-1!==Z.indexOf(y)))){y.setAttribute(z.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),G=!0;break}}else if(this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH){let Z=y;for(let y of this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH)if(Z[y])Z=Z[y];else if(y.includes(",")){const G=y.split(",");Z=Z[G[0]](G[1])}if(Z){let Q=g.GetVisibleSpansText(Z,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(this.fbConfig.SPONSORED_TEXTS.some((y=>-1!==Q.indexOf(y)))){y.setAttribute(z.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),G=!0;break}}}}return G||(G=this.checkAHref(y)),G}checkAHref(y){return!!y.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSORED_HREF_CHECK)}GetAboutPageLink(y){let G="",Z=this.fbConfig.ABOUT_SECTION_CONFIG,Q=y.querySelector(`*[${z.ATTRIBUTE_BIS_LABEL}='fb_marketplace_ad']`),W=y.querySelectorAll(`a[href^='${Z.HREF_PREFIX}'`);if(Q&&W&&W.length){let g="",z=Q.getBoundingClientRect().top,c=z-y.getBoundingClientRect().top;for(let y=0;y<W.length;y++){let G=W[y].getBoundingClientRect();W[y].href&&G.top<z&&z-G.top<c&&(c=z-G.top,g=W[y].href)}if(g.length){let y=g.substring(Z.HREF_PREFIX.length,g.length),Q=y.substring(0,y.search(/(\/|\?)/));if("profile.php"===Q&&y.includes("id=")){const G=new RegExp(Z.QUERY_GET_USER_ID_FROM_HREF);Q=y.match(G),Q&&Q.length&&Q[1]&&(Q=Q[1])}G=Z.ABOUT_PAGE_TEMPLATE.replace("%1",Q)}}return G}}},1899:(y,G,Z)=>{const Q=Z(655),W=Z(2880),g=Z(7678),z=Z(1568),c=Z(8384);Z(1568);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.fbConfig=Q,this.fbRightColumn=null,this.fbRightColumnObserver=null,this.options=G}ActualizeDetector(){return this.fbRightColumn=this.getRightColumnContainer(),!!this.fbRightColumn}ActivateMutationObserver(){this.fbRightColumn?(this.fbRightColumnObserver||(this.fbRightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,z.AD_DETECTOR_INITIATOR_MUTATION)),this.fbRightColumnObserver.observe(this.fbRightColumn,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}Detector(){let y=this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CARDS);if(y?.length)for(let G=0;G<y.length;G++){let Z=y[G],Q=null,A=Array.from(this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.SATELITE_SPONSORED_STRING)),p=W.GetElementSize(Z);if(g.IsInitiallyRendered(Z,p))if(Z.hasAttribute(z.ATTRIBUTE_BIS_ID))this.CheckIfAdRotated(Z)&&Z.removeAttribute&&(Z.removeAttribute(z.ATTRIBUTE_BIS_ID),Z.removeAttribute(z.ATTRIBUTE_BIS_SIZE),Z.removeAttribute(z.ATTRIBUTE_BIS_STATUS),c.j&&c.v&&"border: 6px solid green !important;"===Z.style.cssText&&(Z.style.cssText=""));else if(this.CheckIfAd(Z,A)&&(this.AdBlockerAgent.IsEnabledForFacebook()&&(g.HideSateliteSponsoredString(this.fbConfig,A),Q=this.HideAd(Z,p,z.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)),this.CheckIfAdRendered(Z,g.GetMinImgsSpacePercentag(this.fbConfig,z.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)))){let y=W.GenerateAndSetBisIdToFBAds(Z),G=this.options.extractAdStaticPartTimeoutMs+W.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);setTimeout(this.ExtractAd.bind(this,y,Q,z.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN),G)}}}CheckIfAd(y,G){const Z=this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IMPOSSIBLE_HREF_REG_FOR_AD,Q=this.fbConfig.SPONSORED_TEXTS;if(G?.length)for(let y of G){let G=y.innerText;if(Q.some((y=>y===G)))return!0}const W=Array.from(y.querySelectorAll(`${this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IF_AD}, [${this.options.attributeWithSponsorAlly}]`));return!!W.length&&W.some((y=>{const G=y.href;if(-1===G?.indexOf(Z))return!0;const W=y.getAttribute(this.options.attributeWithSponsorAlly);return!!W&&Q.some((y=>W===y))}))}CheckIfAdRotated(y){let G=!1;if(y&&"extracted"===y.getAttribute(z.ATTRIBUTE_BIS_STATUS)){let Z=0,Q=0,W=0,g=y.querySelectorAll("*");g&&g.length&&(g.forEach((y=>{y.getAttribute(z.ATTRIBUTE_BIS_SIZE)?Z+=1:Q+=1})),0===Z&&Q>0?G=!0:Z>0&&Q>0&&(W=Q/g.length*100|0,W>50&&(G=!0)))}return G}getRightColumnContainer(){return document.querySelector(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CONTAINER)}}},1454:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y){this.id=y}InjectDetector(){if(document.head){let y=document.createElement("script");this.setAttributes(y),document.head.appendChild(y)}}setAttributes(y){const G=Q.getURL("../executors/facebook.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}}},7948:(y,G,Z)=>{const Q=Z(655),W=Z(7678),g=Z(2880),z=Z(1568);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.fbConfig=Q,this.fbWatch=null,this.fbWatchObserver=null}ActualizeDetector(){return this.fbWatch=this.FeedWatchContainer,!!this.fbWatch}ActivateMutationObserver(){this.fbWatch?(this.fbWatchObserver||(this.fbWatchObserver=new MutationObserver(this.DetectCandidates.bind(this,z.AD_DETECTOR_INITIATOR_MUTATION)),this.fbWatchObserver.observe(this.fbWatch,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}get FeedWatchContainer(){const y=this.fbConfig.FEED_WATCH_PAGE.FEED_WATCH_QUERIES,G=y.length;let Z=!1,Q=null;for(let W=0;W<G&&!Z;W++){let G=y[W],g=Array.from(document.querySelectorAll(G));if(!g.length)continue;let z=g.filter((y=>y.children&&y.children.length>2));z.length&&1===z.length&&(Q=z[0],Z=!0)}return Q}DeactivateMutationObserver(){this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}Detector(){let y=this.fbWatch;if(y){let G=Array.from(y.children);for(let y=0;y<G.length;y++){const Z=G[y];let Q=g.GetElementSize(Z);if(!Z.hasAttribute(z.ATTRIBUTE_BIS_ID)&&W.IsInitiallyRendered(Z,Q)&&this.CheckIfAd(Z)){let y="";if(this.AdBlockerAgent.IsEnabledForFacebook()&&(y=this.HideAd(Z,Q,z.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH)),this.CheckIfAdRendered(Z,W.GetMinImgsSpacePercentag(this.fbConfig,z.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH))){this.addCoverImageSrcAttribute(Z);let G=g.GenerateAndSetBisIdToFBAds(Z),Q=this.options.extractAdStaticPartTimeoutMs+g.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(Z),setTimeout(this.ReadyToExtractAd.bind(this,G,y),Q)}}}}}ReadyToExtractAd(y,G){try{if(y){let Z=document.querySelector(`[${z.ATTRIBUTE_BIS_ID}=${y}]`),Q=Z.querySelector(`[${z.ATTRIBUTE_BIS_LABEL}="fb_watch_ad"]`);Z&&Q?this.ExtractAd(y,G,z.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH):(Q.removeAttribute(z.ATTRIBUTE_BIS_ID),Z.removeAttribute(z.ATTRIBUTE_BIS_ID))}}catch(y){}}CheckIfAd(y){const G=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES;let Z=!1;for(let Q=0;Q<G.length&&!Z;Q++){const W=G[Q];let g=y.querySelectorAll(W);if(Z=this.GetTextCustom(g),Z||(Z=this.GetTextFromXlink(g)),Z||(Z=this.GetTextIfUseCanvas(g)),Z){y.firstElementChild.setAttribute(z.ATTRIBUTE_BIS_LABEL,"fb_watch_ad");break}}return!!Z}GetTextCustom(y){for(let G=0;G<y.length;G++){const Z=y[G];let Q=Z.innerText,g=Z.getAttribute(this.options.attributeWithSponsorAlly),c=g?[Q,g]:Q;if("string"==typeof Q&&Q.length&&this.isTagSponsored(c))return!0;if(Q&&Q.length>=2&&!Z.hasAttribute(z.ATTRIBUTE_BIS_LABEL)){let y=W.GetVisibleSpansText(Z,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(y!==Q&&y!==g&&"string"==typeof y&&y.length&&this.isTagSponsored(y))return!0}}return!1}GetTextFromXlink(y){let G="";for(let Z of y){if(!Z.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))continue;const y=Z.parentElement;let Q="";if(y?.hasAttribute("bis_processed")&&y?.hasAttribute(z.ATTRIBUTE_BIS_LABEL))continue;const W=Array.from(y.children);if(W&&W.forEach((y=>{let G=y.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);const Z=document.querySelector(G);Z&&("text"===Z.nodeName.toLowerCase()?Q+=Z.textContent:"svg"===Z.nodeName.toLowerCase()&&(Q=this.GetTextFromXlink([Z.firstElementChild])))})),y.setAttribute("bis_processed",""),this.isTagSponsored(Q))return G=Q,y.removeAttribute("bis_processed"),G;G=""}return G}GetTextIfUseCanvas(y){let G="";for(let Z of y){if("canvas"!==Z.nodeName.toLowerCase()||Z.hasAttribute(z.ATTRIBUTE_BIS_LABEL))continue;let y=this.CheckAndGetFieldName(Z);if("string"==typeof y&&this.isTagSponsored(y)){G=y;break}}return G}AddHiddenTextTags(y){const G=y.querySelectorAll("svg>use");if(G)for(let y=0;y<G.length;y++){const Z=G[y],Q=Z.parentElement;let W=Z.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);let g=document.querySelector(W).cloneNode(!0);g.style.display="none",Q&&Q.appendChild(g)}}isTagSponsored(y){let G=!1;if(!y)return G;if("string"==typeof y)G=this.fbConfig.SPONSORED_TEXTS.some((G=>G===y));else for(let Z of y)if(G=this.fbConfig.SPONSORED_TEXTS.some((y=>y===Z)),G)break;return G}GetAboutPageLink(y){let G="",Z=this.fbConfig.ABOUT_SECTION_CONFIG,Q=y.querySelectorAll(Z.HREF_PREFIX_WATCH);if(!Q?.length)return G;let W="";for(let G=0;G<Q.length;G++){let g=Q[G];if(!g.href)continue;if(!Z.ABOUT_PAGE_BAD_WORDS_MATCHES.every((y=>-1===g.href.indexOf(y))))continue;let z=y.getBoundingClientRect().top,c=g.getBoundingClientRect();c.top>z&&c.top-z<=Z.MAX_DISTANCE_FROM_POST_TOP&&(W=g.href)}if(!W.length)return G;let g=W.substring(Z.HREF_TEMPLATE_WATCH.length,W.length),z=g.substring(0,g.search(/(\/|\?)/));if("profile.php"===z&&g.includes("id=")){const y=new RegExp(Z.QUERY_GET_USER_ID_FROM_HREF);z=g.match(y),z&&z.length&&z[1]&&(z=z[1])}return G=Z.ABOUT_PAGE_TEMPLATE.replace("%1",z),G}addCoverImageSrcAttribute(y){let G=y.querySelector(this.fbConfig.FEED_WATCH_PAGE.COVER_IMAGE_QUERY);if(G&&G.hasAttribute("src")){let Z=G.getAttribute("src");y.setAttribute("data-cover-image-src",Z)}}}},3162:(y,G,Z)=>{const Q=Z(2880),W=Z(9358);class g{static GetHyperlinkEmbeddedTargetUrlDataList(y,G,Z){let W,g,z,c=Q.QuerySelectorAll(G,"A[href]"),A=[];for(var p=0;p<c.length;p++)if(W=c[p],!Q.IsInFilterList(Z,W.href)){g=Q.GetElementSize(W),z=g.w*g.h;let y=W.querySelectorAll("img, canvas");if(y.length){let G,Z;for(var K=0;K<y.length;K++)G=Q.GetElementSize(y[K]),Z=G.w*G.h,Z>z&&(z=Z,g.w=G.w,g.h=G.h)}z>=100&&Q.isValidUrl(W.href)&&A.push({href:W.href,square:z})}return A&&A.length,A}static GetDocumentEmbeddedTargetUrlDataList(y,G,Z){let Q=[this.strategyStrictFinalUrl,this.strategyScriptClickTag,this.strategyAppnexus,this.strategyNoscriptAnchors,this.strategyScriptAndMetaContentJsonKeyWords,this.strategyLookingForPropertyInsideWindow],W=this.processStrategyList(G,Q,Z);return W&&W.length,W}static processStrategyList(y,G,Z){let Q=[];for(let W of G)try{let G=W(y,Z);G&&G.href&&Q.push(G)}catch(y){}return Q}static strategyStrictFinalUrl(y,G){for(var Z=Q.QuerySelectorAll(y,'script[type="application/json"]'),W=0;W<Z.length;W++){var g=Z[W].outerText;if(g.length>1&&"{"===g[0]&&"}"===g[g.length-1]&&-1!=g.indexOf("targets")&&-1!=g.indexOf("redirectUrl")&&-1!=g.indexOf("finalUrl")){var z=JSON.parse(g);if(void 0!==z.targets&&void 0!==z.targets.redirectUrl&&void 0!==z.targets.redirectUrl.finalUrl){let y=z.targets.redirectUrl.finalUrl;if(Q.isValidUrl(y))return{href:y,square:1e6}}}}}static strategyScriptClickTag(y,G){let Z=Q.QuerySelectorAll(y,"script");for(let y=0;y<Z.length;y++){let G=Z[y].outerText;if(G.length>1&&-1!==G.indexOf("clickTag")&&(G=G.replace(/\s/g,""),G.startsWith('varclickTag="')&&G.endsWith('";'))){let y=G.indexOf('"'),Z=G.lastIndexOf('"'),W=G.substring(y+1,Z);if(Q.isValidUrl(W))return{href:W,square:1e6}}}}static strategyAppnexus(y,G){let Z=Q.QuerySelectorAll(y,".GoogleActiveViewElement script"),W=Array.from(Z).map((y=>y.innerHTML)).filter((y=>y.indexOf("APPNEXUS.placement")>=0));for(let y=0;y<W.length;y++){let G=g(W[y]);if(Q.isValidUrl(G))return{href:G,square:1e6}}function g(y){let G=(y=y.replace(/(\r\n|\n|\r|\s)/gm,"")).match(/APPNEXUS.placement\(".+","(.+)",.+/);return G&&G.length>1?G[1]:null}}static strategyNoscriptAnchors(y,G){let Z=Q.QuerySelectorAll(y,"noscript");for(let G=0;G<Z.length;G++){let W=y.createElement("div");W.innerHTML=Z[G].innerText;let g=W.querySelector("a[href]");if(g){let y=g.getAttribute("href");if(Q.isValidUrl(y))return{href:y,square:1}}}}static strategyScriptAndMetaContentJsonKeyWords(y,G,Z=null){if(Z){let y=g(Z,G);return Q.isValidUrl(y)?{href:y,square:999999}:void 0}let W=Q.QuerySelectorAll(y,"script, meta[content]");for(let y of W){let Z="script"===y.nodeName.toLowerCase()?y.outerText:y.getAttribute("content");if(Z.length>1&&"{"===Z[0]&&"}"===Z[Z.length-1]){let y=g(JSON.parse(Z),G);if(Q.isValidUrl(y))return{href:y,square:999999}}}function g(y,G,Z=[]){let W=G.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(Z.length>W)return null;let c=Object.getOwnPropertyNames(y);for(let W of c)try{let c=y[W];if(!c)return null;let A=Z.concat(W);if("string"==typeof c&&c.length>1&&"{"===c[0]&&"}"===c[c.length-1]){let y=g(JSON.parse(c),G,A);if(y)return y}if("object"==typeof c){let y=g(c,G,A);if(y)return y}else if("string"==typeof c&&z(W,G)&&Q.isValidUrl(c))return c}catch(y){}return null}function z(y,G){let Z=function(y){let G=y.toLowerCase();return G.replace(/[^a-zA-Z]+/g,"")}(y),Q=G.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let y of Q){if(Z===y)return!0}return!1}}static strategyLookingForPropertyInsideWindow(y,G){const Z=y.defaultView,Q=G.WINDOW_PROPERTY_NAMES;for(let W of Q){let Q=Z[W];if(Q){if("string"==typeof Q)return!Q.search(/^http/)>-1&&(Q=z(Q)),{href:Q,square:1e6};if("object"==typeof Q)return g.strategyScriptAndMetaContentJsonKeyWords(y,G,Q)}}function z(Z){try{const Q=W.decode(Z);if(Q){if("string"==typeof Q&&"{"===Q[0]){let Z=JSON.parse(Q);return g.strategyScriptAndMetaContentJsonKeyWords(y,G,Z).href}return""}}catch(y){}}}}y.exports=g},9877:(y,G,Z)=>{const Q=Z(2880),W=Z(7817),g=Z(3162);class z{constructor(y,G,Z,W,g){this.id=Z,this.fullIdStr=Q.GetFullIdStr(y,G,Z),this.init=!1,this.targetUrlDataList=[],this.targetUrlDetected=!1,this.IframesIO=null,this.activationTargetUrlCandidates=W,this.html5TargetUrlDetectionConfig=g.GetHtml5TargetUrlDetectionConfig(),this.blacklistedTargetUrls=g.BlacklistTargetUrl,this.detectionTimerId=null,this.onDetectTargetUrlCallBack=null}get FrameTargetUrl(){return this.targetUrlDataList}Init(y){return y&&(this.IframesIO=y,this.init=!0),this.init}DetectTargetUrl(y,G){if(this.init&&!this.targetUrlDetected&&this.html5TargetUrlDetectionConfig)if(this.onDetectTargetUrlCallBack=G,this.detectionTimerId=setTimeout(this.onTargetUrlDetectionTimout.bind(this),y),this.activationTargetUrlCandidates&&this.activationTargetUrlCandidates.length)this.targetUrlDataList=this.activationTargetUrlCandidates,this.TargetUrlDetected();else{let y=g.GetHyperlinkEmbeddedTargetUrlDataList(this.id,document,this.blacklistedTargetUrls);this.targetUrlDataList=this.targetUrlDataList.concat(y);let G=g.GetDocumentEmbeddedTargetUrlDataList(this.id,document,this.html5TargetUrlDetectionConfig);G=z.filterTargetUrlDataList(G,this.blacklistedTargetUrls),this.targetUrlDataList=this.targetUrlDataList.concat(G),this.targetUrlDataList&&this.targetUrlDataList.length?this.TargetUrlDetected():this.IframesIO.ActivateWindowEmbeddedTargetUrlDetection(this.onGetWindowEmbeddedTargetUrlData.bind(this))}}static filterTargetUrlDataList(y,G){if(!y||0===y.length)return[];return y.filter((y=>{if(y.href&&0===y.href.search(/^http/)&&!Q.IsInFilterList(G,y.href))return!0}))}onGetWindowEmbeddedTargetUrlData(y){let G=z.filterTargetUrlDataList(y,this.blacklistedTargetUrls);this.targetUrlDataList.push(G),this.concatTargetUrlsDataIfNeed(),!G||G.length,this.TargetUrlDetected()}concatTargetUrlsDataIfNeed(){this.targetUrlDataList[0].length&&(this.targetUrlDataList=this.targetUrlDataList.flat(1))}onTargetUrlDetectionTimout(){this.targetUrlDetected||this.TargetUrlDetected()}TargetUrlDetected(){this.targetUrlDetected=!0,this.detectionTimerId&&(clearTimeout(this.detectionTimerId),this.detectionTimerId=null),this.onDetectTargetUrlCallBack&&this.onDetectTargetUrlCallBack()}static DetectTargetUrlFromWindowObj(y,G,Z){var Q=[];let z=Z.GetHtml5TargetUrlDetectionConfig(),c=Z.BlacklistTargetUrl;try{let Z=g.GetHyperlinkEmbeddedTargetUrlDataList(y,G.document,z);Q=Q.concat(Z)}catch(y){}try{let Z=g.GetDocumentEmbeddedTargetUrlDataList(y,G.document,z);Z=this.filterTargetUrlDataList(Z,c),Q=Q.concat(Z)}catch(y){}try{let Z=W.GetWindowEmbeddedTargetUrlDataList(y,G,z,this.defaultWindowProps);Z=this.filterTargetUrlDataList(Z,c),Q=Q.concat(Z)}catch(y){}return Q&&Q.length,Q}}y.exports=z},7817:y=>{y.exports=class{static GetWindowEmbeddedTargetUrlDataList(y,G,Z){let Q=[function(y){if(void 0!==y.clickTag&&g(y.clickTag))return{href:y.clickTag,square:1000001}},function(y){if(void 0!==y.adData){if(void 0!==y.adData.destination_url&&g(y.adData.destination_url))return{href:y.adData.destination_url,square:1000001};if(void 0!==y.adData.redirect_url&&g(y.adData.redirect_url))return{href:y.adData.redirect_url,square:1000001}}},function(y){if(void 0!==y.BF&&void 0!==y.BF.Parameters&&void 0!==y.BF.Parameters.targeturl&&g(y.BF.Parameters.targeturl))return{href:y.BF.Parameters.targeturl,square:1000001}},function(y){if(void 0!==y.ADAPT&&void 0!==y.ADAPT.symbols&&void 0!==y.ADAPT.symbols.stage&&void 0!==y.ADAPT.symbols.stage.clickUrl&&g(y.ADAPT.symbols.stage.clickUrl))return{href:y.ADAPT.symbols.stage.clickUrl,square:1000001}},function(y){if(void 0!==y.admixAPI&&void 0!==y.admixAPI.ownerBanner&&void 0!==y.admixAPI.ownerBanner.clickUrl&&g(y.admixAPI.ownerBanner.clickUrl))return{href:y.admixAPI.ownerBanner.clickUrl,square:1000001}},function(y,G){let Z=function(y,G,Z){let Q=function(y,G){let Z=Object.getOwnPropertyNames(y);return Z.filter((y=>G.WINDOW_PROPERTY_NAMES.indexOf(y)<0))}(G,Z);if(!Q||0===Q.length)return null;return z(G,Q,Z)}(0,y,G);if(g(Z))return{href:Z,square:999999}}],W=function(y,G,Z){let Q=[];for(let W of G)try{let G=W(y,Z);G&&G.href&&Q.push(G)}catch(y){}return Q}(G,Q,Z);return W&&W.length,W;function g(y){return"string"==typeof y&&y.length>0&&(-1!==y.indexOf("http")||-1!==y.indexOf("//"))}function z(y,G,Z,Q=[]){let W=Z.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(Q.length>W)return null;for(let W of G)try{let G=y[W];if(!G)return null;let A=Q.concat(W);if("object"==typeof G){let y=z(G,Object.getOwnPropertyNames(G),Z,A);if(y)return y}else if("string"==typeof G&&c(W,Z)&&g(G))return G}catch(y){}return null}function c(y,G){let Z=function(y){let G=y.toLowerCase();return G.replace(/[^a-zA-Z]+/g,"")}(y),Q=G.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let y of Q){if(Z===y)return!0}return!1}}}},3375:(y,G,Z)=>{const Q=Z(8384),W=Z(1568),g=Z(5364),z=Z(5337),c=Z(5972),A=Z(9944),p=Z(9346);y.exports=class extends p{constructor(y,G,Z){super(y),this.id=y,this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.instaConfig=G.GetInstagramConfig,this.AdBlockerAgent=Z,this.DetectorFeed=null,this.DetectorStories=null,this.headersEntries=[],this.ActivateVideoTrafficDetector()}onPageUrlChanged(y,G){this.available&&setTimeout((()=>{this.DeactivateDetectors(W.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),0)}ActivateDetector(y){y===W.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.DetectorFeed=new z(this.id,this.instaConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.DetectorStories=new A(this.id,this.instaConfig.STORIES.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.DetectorFeed.isVideo=this.isVideo.bind(this),this.DetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorFeed.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorFeed.HideElement=this.HideElementForInstagramFeedOnly.bind(this),this.DetectorFeed.isCarousel=this.isCarousel.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this),this.DetectorStories.HideElement=this.HideElement.bind(this),this.DetectorStories.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorStories.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorStories.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector=new c(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_w",JSON.stringify(this.instaConfig.TRAFFIC_LISTENER_CONFIG))}ActivateDetectors(){this.GetHeadersDataForLoader(),this.DetectorFeed.ActivateDetector(),this.DetectorStories.ActivateDetector()}DeactivateDetectors(y){this.DetectorFeed.DeactivateDetector(y),this.DetectorStories.DeactivateDetector(y)}processAndSendInstagramAd(y,G,Z){let z=document.querySelector(`[${W.ATTRIBUTE_BIS_ID}=${y}]`);z&&(this.addFieldsToCandidateAboutHeaders(G),g.SendCandidatePlacementsCount(this.id,1,W.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM,null),g.SendAdCandidates(this.id,[G],W.MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM,null),Q.j&&Q.v&&(z.style.cssText+=Z?W.STYLES_OUTLINE_VIDEO_AD:W.STYLES_OUTLINE_SUCCESS_DETECT))}GetHeadersDataForLoader(){let y=this.instaConfig.LOAD_USER_DATA.HEADERS_VALUES_QUERIES;for(let G of y){let y=new RegExp(G[1]),Z=G[0],Q=new RegExp(Z,"i"),W=Array.from(document.querySelectorAll("script")).filter((y=>y.innerHTML.search(Q)>-1));if(!W.length)return;let g=W[0].innerHTML.match(y)[1];this.headersEntries.push([Z,g])}}addFieldsToCandidateAboutHeaders(y){this.headersEntries.length&&y.aboutPageUrl&&(y.headers=Object.fromEntries(this.headersEntries))}}},5337:(y,G,Z)=>{const Q=Z(2880),W=Z(1568),g=Z(655);y.exports=class extends g{constructor(y,G,Z,Q){super(y,G,Z),this.instaConfig=Q,this.timeOptions=this.instaConfig.FEED.TIMEOUT_OPTIONS,this.id=y,this.adBlockerAgent=Z,this.feedContainer=null,this.feedObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.processInstagramAdsInterval=null}HideElement(y){}setSizesAndIdForAllElements(y){}getAdInstagramObject(y,G,Z,Q,W,g){}isCarousel(y){}isVideo(y,G){}removeCloneElement(y){}ActualizeDetector(){return this.feedContainer=this.FeedContainer,!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.processFeedAds()}get FeedContainer(){const y=this.instaConfig.FEED.CONTAINER_QUERIES,G=this.instaConfig.FEED.CONTAINER_MIN_HEIGHT;for(let Z of y){let y=document.querySelector(Z);if(y){if(y.offsetHeight>=G)return y}}}checkAdBlockerAndHide(y){this.adBlockerAgent.IsEnabledForInstagram()&&!this.adBlockerAgent.IsElementHidden(y)&&(this.HideElement(y),this.adBlockerAgent.SetHiddenAmount(1))}processFeedAds(){let y=this.detectPromotedPosts();if(y&&y.length)for(let G of y){Q.GetElementSize(G);if(!G.hasAttribute(W.ATTRIBUTE_BIS_ID)){this.setSizesAndIdForAllElements(G);let y=Q.GenerateAndSetBisIdToInstagramAds(G),Z=this.createHTML(G);const g=this.getAdvertiserName(G),z=this.getTargetUrl(G),c=this.getAboutPageUrl(G);this.AddHiddenTextTags(Z);const A=this.isCarousel(G),p=this.isVideo(G,this.instaConfig.TAGS_FOR_VIDEO_CHECK),K=this.getAdInstagramObject(G,Z,g,z,c,W.INSTAGRAM_AD_PLACEMENT_TYPE_FEED);p&&!A&&(K.videoData={}),A&&(K.carouselSlidesSources=[]),this.removeCloneElement(Z),this.checkAdBlockerAndHide(G);let m=setTimeout((()=>{this.ExtractAd.call(this,y,K,p),clearTimeout(m)}),100)}}}AddHiddenTextTags(y){const G=y.querySelectorAll("svg>use");if(G)for(let y=0;y<G.length;y++){const Z=G[y],Q=Z.parentElement;let W=Z.getAttribute("xlink:href");let g=document.querySelector(W).cloneNode(!0);g.style.display="none",g.id=g.id+"_bis",Q&&Q.appendChild(g)}}RemoveHideStylesFromClone(y){let G=y.querySelector("div"),Z=G?G.firstElementChild:null,Q=Z?Z.firstElementChild:null;return Q?(Z.style.cssText=Z.style.cssText.replace(W.STYLES_HIDE_INSTAGRAM_FEED_AD[1],""),Q.style.cssText=Q.style.cssText.replace(W.STYLES_HIDE_INSTAGRAM_FEED_AD[0],""),y):y}detectPromotedPosts(){if(!this.feedContainer)return[];const y=this.instaConfig.FEED.IMG_SPACE_PERCENTAGE,G=this.instaConfig.PROMOTED_ALIASES;let Z=Array.from(this.feedContainer.children),Q=[];for(let W of Z)if(this.IsPostContentRendered(W,y)){const y=W.querySelectorAll(this.instaConfig.FEED.PROMOTED_QUERY);for(let Z of y){if(!Z)continue;let y=Z.hasAttribute("xlink:href")?this.GetTextFromXlink(Z):Z.innerText;if(y.includes("#"))continue;if(G.some((G=>y.search(G)>=0))){Q.push(W);break}}}return Q}GetTextFromXlink(y){let G=y.getAttribute("xlink:href");if(G){return document.querySelector(G).textContent}return""}IsPostContentRendered(y,G){let Z=!1;if(y){let W=Q.GetFullElementSize(y);if(W.w>0){Q.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,y,W).some((y=>y>=G))&&(Z=!0)}}return Z}createHTML(y){const G=document.createElement("html"),Z=this.cloneBodyWithStyles,Q=this.cloneHeadWithStyles,W=y.cloneNode(!0),g=this.feedContainer,z=g.cloneNode();return this.styleFixes(z),this.setWrapperStyles(g,z),z.appendChild(W),Z.appendChild(z),G.appendChild(Q),G.appendChild(Z),G}setWrapperStyles(y,G){G.style.cssText=G.style.cssText+` max-width: ${this.maxWidthContainer(y)}`}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}styleFixes(y){y.style.paddingBottom=0}get cloneBodyWithStyles(){const y=document.createElement("body"),G=document.querySelectorAll('body style, body link[rel="stylesheet"]');return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}get cloneHeadWithStyles(){const y=document.createElement("head"),G=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return G&&G.forEach((G=>{let Z=G.cloneNode(!0);y.appendChild(Z)})),y}getAboutPageUrl(y){const G=this.instaConfig.FEED.ABOUT_PAGE_URL_QUERY;let Z=y.querySelector(G);return Z&&Z.href?Z.href:""}getAdvertiserName(y){const G=this.instaConfig.FEED.ADVERTISER_NAME_QUERY;let Z=y.querySelector(G),Q="";if(Z){if(Q=Z.innerText,Q)return Q;if(Q=Z.innerHTML,-1===Q.search(/\<\//))return Q}return""}getTargetUrl(y){const G=this.instaConfig.FEED.TARGET_URL_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.href&&(Q=Z.href),Q}}},9944:(y,G,Z)=>{const Q=Z(2880),W=Z(1568),g=Z(655);y.exports=class extends g{constructor(y,G,Z,Q){super(y,G,Z),this.instaConfig=Q,this.id=y,this.adBlockerAgent=Z,this.storyContainer=null,this.storiesObserver=null,this.processInstagramAdsInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}HideElement(y){}setSizesAndIdForAllElements(y){}getAdInstagramObject(y,G,Z,Q,W,g){}removeCloneElement(y){}ActualizeDetector(){return this.storyContainer=this.StoryContainer,!!this.storyContainer}ActivateMutationObserver(){this.storyContainer?(this.storiesObserver||(this.storiesObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.storiesObserver.observe(this.storyContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.storyContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.processStoriesAds()}processStoriesAds(){let y=this.detectPromotedMarkedStory();if(y&&(Q.GetElementSize(y),!y.hasAttribute(W.ATTRIBUTE_BIS_ID))){let G=Q.GenerateAndSetBisIdToInstagramAds(y);this.setSizesAndIdForAllElements(y);const Z=this.createHTML(y),g=this.getAdvertiserName(y),z=this.getTargetUrl(y),c=this.getAboutPageUrl(y);this.AddHiddenTextTags(Z);const A=this.getAdInstagramObject(y,Z,g,z,c,W.INSTAGRAM_AD_PLACEMENT_TYPE_STORY);this.adBlockerAgent.IsEnabledForInstagram(),this.removeCloneElement(Z);let p=setTimeout((()=>{this.ExtractAd.call(this,G,A),clearTimeout(p)}),100)}}AddHiddenTextTags(y){const G=y.querySelectorAll("svg>use");if(G)for(let y=0;y<G.length;y++){const Z=G[y],Q=Z.parentElement;let W=Z.getAttribute("xlink:href");let g=document.querySelector(W).cloneNode(!0);g.style.display="none",g.id=g.id+"_bis",Q&&Q.appendChild(g)}}createHTML(y){const G=document.createElement("html"),Z=this.cloneBodyWithStyles,Q=this.cloneHeadWithStyles,W=y.cloneNode(!0),g=document.createElement("div");return this.styleFixes(W),this.setWrapperStyles(y,g),g.appendChild(W),Z.appendChild(g),G.appendChild(Q),G.appendChild(Z),G}get cloneBodyWithStyles(){const y=document.createElement("body"),G=document.querySelectorAll('body style, body link[rel="stylesheet"]');return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}get cloneHeadWithStyles(){const y=document.createElement("head"),G=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return G&&G.forEach((G=>{let Z=G.cloneNode(!0);y.appendChild(Z)})),y}detectPromotedMarkedStory(){if(!this.storyContainer)return null;const y=this.instaConfig.STORIES.IMG_SPACE_PERCENTAGE,G=this.instaConfig.PROMOTED_ALIASES;let Z=this.storyContainer;if(this.IsStoryContentRendered(Z,y)){const y=Z.querySelectorAll(this.instaConfig.STORIES.PROMOTED_QUERY);for(let Q of y){if(!Q)continue;let y=Q.hasAttribute("xlink:href")?this.GetTextFromXlink(Q):Q.innerText;if(y.includes("#"))continue;if(G.some((G=>y.search(G)>=0)))return Z}}return null}GetTextFromXlink(y){let G=y.getAttribute("xlink:href");if(G){return document.querySelector(G).textContent}return""}getAdvertiserName(y){const G=this.instaConfig.STORIES.ADVERTISER_NAME_QUERY;let Z=y.querySelector(G);return Z?Z.innerText:""}getTargetUrl(y){const G=this.instaConfig.STORIES.TARGET_URL_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.href&&(Q=Z.href),Q}getAboutPageUrl(y){const G=this.instaConfig.STORIES.ABOUT_PAGE_URL_QUERY;let Z=y.querySelector(G);return Z&&Z.href?Z.href:""}IsStoryContentRendered(y,G){let Z=!1;if(y){let W=Q.GetFullElementSize(y);if(W.w>0){Q.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,y,W).some((y=>y>=G))&&(Z=!0)}}return Z}setWrapperStyles(y,G){G.style.cssText=G.style.cssText+` max-width: ${this.maxWidthContainer(y)}`}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}styleFixes(y){y.style.transform=""}get StoryContainer(){return document.querySelector(this.instaConfig.STORIES.STORY_QUERY)}}},5972:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y,G){this.id=y,this.AdBlockerAgent=G}InjectDetector(y,G){if(document.head){var Z=document.createElement("script");this.setAttributes(Z),document.head.appendChild(Z)}}setAttributes(y){const G=Q.getURL("../executors/insta.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),this.AdBlockerAgent.IsEnabledForInstagram()&&y.setAttribute("ad-opt-on",""),y.src=G}}},9181:(y,G,Z)=>{const Q=Z(9346),W=Z(9170),g=Z(1568),z=Z(8384),c=Z(5364),A=Z(2880),p=Z(1291),K=Z(8247);y.exports=class extends Q{constructor(y,G,Z){super(y),this.id=y,this.VideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=Z,this.linkedinConfig=G.LinkedinConfig,this.LinkedinDetectorFeed=null,this.LinkedinDetectorRightColumn=null,this.ActivateTrafficDetector()}onPageUrlChanged(y,G){this.available&&setTimeout((()=>{this.DeactivateDetectors(g.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.LinkedinDetectorFeed.ActivateDetector(),this.LinkedinDetectorRightColumn.ActivateDetector()}DeactivateDetectors(y){this.LinkedinDetectorFeed.DeactivateDetector(y),this.LinkedinDetectorRightColumn.DeactivateDetector(y)}ActivateDetector(y){y===g.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.LinkedinDetectorFeed=new p(this.id,this.linkedinConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.LinkedinDetectorRightColumn=new K(this.id,this.linkedinConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.LinkedinDetectorFeed.isVideo=this.isVideo.bind(this),this.LinkedinDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorFeed.getAdLinkedinObject=this.getAdLinkedinObject.bind(this),this.LinkedinDetectorFeed.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorFeed.HideElement=this.HideElement.bind(this),this.LinkedinDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorFeed.isCarousel=this.isCarousel.bind(this),this.LinkedinDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.LinkedinDetectorRightColumn.HideElement=this.HideElement.bind(this),this.LinkedinDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorRightColumn.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorRightColumn.getAdLinkedinObject=this.getAdLinkedinObject.bind(this)}ActivateTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new W(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_l",JSON.stringify(this.linkedinConfig)))}IsAdContentRendered(y,G){let Z=A.GetFullElementSize(y);return A.GetImagesSpacePercentage(this.linkedinConfig.TAGS_FOR_LOADING_CHECK,y,Z).some((y=>y>=G))}processAndSendLinkedinAd(y,G,Z=!1,Q=document){let W=Q.querySelector(`[${g.ATTRIBUTE_BIS_ID}=${y}]`);W&&(c.SendCandidatePlacementsCount(this.id,1,g.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN,null),c.SendAdCandidates(this.id,[G],g.MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN,null),z.j&&z.v&&(W.style.cssText+=Z?g.STYLES_OUTLINE_VIDEO_AD:g.STYLES_OUTLINE_SUCCESS_DETECT))}}},1291:(y,G,Z)=>{const Q=Z(655),W=Z(1568),g=Z(2880);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.id=y,this.feedObserver=null,this.linkedinConfig=Q,this.feedContainer=null,this.AdBlockerAgent=Z,this.adPlacementType=W.LINKEDIN_AD_PLACEMENT_TYPE_FEED}HideElement(){}setSizesAndIdForAllElements(y){}getAdLinkedinObject(y,G,Z,Q,W,g){}doesElementExists(y){}isCarousel(y){}isVideo(y,G){}IsAdContentRendered(y,G){}ActualizeDetector(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds()}processFeedAds(){this.extractOccurrences()}get getFeedContainer(){const y=this.linkedinConfig.FEED.QUERY_CONTAINER;let G=document.querySelector(y);return!G||G.children.length<3?null:G}extractOccurrences(){let{allCells:y,minImgSquarePercentage:G}=this.allCellsAndMinImgSpace();if(y.length)for(let Z of y){if(g.GetElementSize(Z),Z.hasAttribute(W.ATTRIBUTE_BIS_ID))continue;if(!this.IsAdContentRendered(Z,G))continue;let y=g.GenerateAndSetBisIdToLinkedinAds(Z);this.setSizesAndIdForAllElements(Z);const Q=this.createHTML(Z),z=this.getTargetUrl(Z),c=this.getSocialAdvertiserUrl(Z),A=this.getAdvertiserName(Z),p=this.isCarousel(Z),K=this.isVideo(Z,this.linkedinConfig.TAGS_FOR_VIDEO_CHECK),m=this.getUniqueDataId(Z);this.removeBisAttribute(Q);let I=this.getAdLinkedinObject(Z,Q,this.adPlacementType,z,c,A,m);if(this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),p&&(I.carouselSlidesData=this.getCarouselSlidesFromDOM(c,Z)),Z.querySelector("iframe")&&(I.doesHaveIframe=!0),K&&!p){const y=this.getVideoIdAndThumbnail(Z);I.videoData=y||{}}setTimeout(this.ExtractAd.bind(this,y,I,K),100)}}allCellsAndMinImgSpace(){let y=[],G=0;return this.feedContainer&&(y=Array.from(this.feedContainer.children),G=this.linkedinConfig.FEED.IMG_SPACE_PERCENTAGE),y=y.filter((y=>this.linkedinConfig.FEED.COLLECT_AD_TYPE_EVENT?this.isPromoted(y):this.isPromoted(y)&&!y.querySelector(this.linkedinConfig.FEED.QUERY_CHECK_AD_TYPE_EVENT))),{allCells:y,minImgSquarePercentage:G}}isPromoted(y){const G=this.linkedinConfig.FEED.QUERIES_IS_PROMOTED,Z=this.linkedinConfig.PROMOTED_ALIASES;let Q=!1;for(let W of G){let G=Array.from(y.querySelectorAll(W));G.length&&(Q=G.some((y=>{let G=y.textContent.trim().toLowerCase();if(G)return Z.some((y=>G.indexOf(y)>=0))})))}return Q}createHTML(y){const G=document.createElement("html"),Z=this.cloneBodyWithStyles,Q=this.cloneHeadWithStyles,W=y.cloneNode(!0),g=this.feedContainer,z=g.cloneNode();return this.styleFixes(z),this.setWrapperStyles(g,z,y),z.appendChild(W),Z.appendChild(z),G.appendChild(Q),G.appendChild(Z),G}setWrapperStyles(y,G,Z){G.style.cssText=G.style.cssText+` max-width: ${this.maxWidthContainer(y)}`,G.style.cssText=G.style.cssText+` max-height: ${this.maxHeightContainer(Z)}`}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}maxHeightContainer(y){return y?y.offsetHeight+"px":"auto"}styleFixes(y){y.style.overflow="hidden"}get cloneBodyWithStyles(){const y=document.createElement("body"),G=document.querySelectorAll('body style, body link[rel="stylesheet"]');return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}get cloneHeadWithStyles(){const y=document.createElement("head"),G=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),Z=document.createElement("meta");return Z.setAttribute("charset","UTF-8"),y.append(Z),G&&G.forEach((G=>{let Z=G.cloneNode(!0);y.appendChild(Z)})),y}getTargetUrl(y){const G=this.linkedinConfig.FEED.QUERY_TARGET_URL;let Z=y.querySelector(G);return Z&&Z.href?Z.href:""}getSocialAdvertiserUrl(y){const G=this.linkedinConfig.FEED.QUERY_ADVERTISER_URL;let Z=y.querySelector(G),Q="";return Z&&Z.href?(Q=Z.href,Q):Q}getAdvertiserName(y){let G=y.querySelector(this.linkedinConfig.FEED.QUERY_ADVERTISER_NAME);return G?G.innerText.trim():""}getVideoIdAndThumbnail(y){const G=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.QUERY_VIDEO_TAG_GET_VIDEO_ID,Z=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.REGEXP_VIDEO_ID),Q=y.querySelector(G);if(!Q)return null;const W=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.ATTRIBUTE_NAME_WITH_VIDEO_ID;let g=Q.getAttribute(W);if(!g)return null;let z=g.match(Z);return{videoId:z?.groups?.videoId?z.groups.videoId:null,previewImageUrl:g}}getCarouselSlidesFromDOM(y,G){let Z=this.searchFirstImage(G);if(!Z)return[];let Q=this.searchMatchedImgId(Z);if(!Q)return[];let W=this.getAllCodeElements();if(!W.length)return[];let g=this.filterCodeElements(W,Q);if(!g.length)return[];let z=this.getSlidesDatas(g,y);return z.length?this.getSlidesImagesSources(z):[]}searchFirstImage(y){return y.querySelector(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_FIRST_IMG)}searchMatchedImgId(y){let G=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.REGEXP_IMG_ID),Z=y.src.match(G);return Z.length&&1!==Z.length?Z[1]:null}getAllCodeElements(){return Array.from(document.querySelectorAll(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_CODE_ELEMENTS))}filterCodeElements(y,G){return y.filter((y=>y.innerHTML.includes(G))).map((y=>"{"===y.innerHTML.trim()[0]?JSON.parse(y.innerHTML):{}))}getSlidesDatas(y,G){const Z=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SOCIAL_ADV_URL,Q=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_DATA;let W=y.map((y=>{if(!y.included)return{};let W=y.included.filter((y=>{let Q=y;for(let y of Z)if(Q[y]&&(Q=Q[y]),G===Q)return!0}));if(!W.length)return!1;let g=W[0];for(let y of Q)g[y]&&(g=g[y]);return g}));return W.length?W[0]:[]}getSlidesImagesSources(y){const G=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_ROOT_URL,Z=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_PATH_URL,Q=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SLIDE_TEXT;let W=[];for(let g of y){let y=g,z=g,c=g;for(let Z of G)y[Z]&&(y=y[Z]);if(!y||"string"!=typeof y)break;for(let y of Z)z[y]&&(z=z[y]);if(!z||"string"!=typeof z)break;for(let y of Q)c[y]&&(c=c[y]);if(!c||"string"!=typeof c)break;let A=y+z,p={source:this.transformToValidUrl(A),text:c};W.push(p)}return W}transformToValidUrl(y){return y.replace(/amp\;/g,"")}removeBisAttribute(y){let G=y.querySelectorAll(`*[${W.ATTRIBUTE_BIS_ID}]`);G.length&&G.forEach((y=>{y.removeAttribute(W.ATTRIBUTE_BIS_ID)}))}getUniqueDataId(y){return y.querySelector(this.linkedinConfig.FEED.QUERY_GET_UNIQUE_ID)?.getAttribute("data-id")}}},8247:(y,G,Z)=>{const Q=Z(655),W=Z(2880),g=Z(1568);Z(9358);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.rightColumnContainer=null,this.rightColumnObserver=null,this.linkedinConfig=Q,this.adPlacementType=g.LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN,this.promotedHeaderHeaderHeight=0}HideElement(){}setSizesAndIdForAllElements(y){}getAdLinkedinObject(y,G,Z,Q,W,g){}doesElementExists(y){}ActualizeDetector(){return this.rightColumnContainer=this.getRightColumnContainer(),!!this.rightColumnContainer}ActivateMutationObserver(){this.getRightColumnContainer()?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,g.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.rightColumnContainer=null,this.isObserverAlreadySet=!1)}getRightColumnContainer(){const y=document.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_CONTAINER);return y&&y.children.length?y:null}isPromoted(y){const G=y?.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_PROMOTED),Z=this.linkedinConfig.PROMOTED_ALIASES;let Q=!1;if(G){this.promotedHeaderHeaderHeight=G.parentElement.offsetHeight;let y=G.textContent.trim().toLowerCase();Q=Z.includes(y)}return Q}Detector(){this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer(),this.rightColumnContainer&&this.processRightColumnAds()}processRightColumnAds(){this.rightColumnContainer.querySelectorAll(this.linkedinConfig.RIGHT_COLUMN.QUERY_AD_CONTAINER).forEach((y=>{this.isIframe(y)&&this.processIFrame(y)}))}isIframe(y){return!!y?.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME)}processIFrame(y){const G=y.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME),Z=G?.contentDocument;if(this.isPromoted(Z)){const G=[];this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD.forEach((y=>G.push(...Z.querySelectorAll(y)))),this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(y)&&(this.HideElement(y),this.AdBlockerAgent.SetHiddenAmount(G.length)),this.extractOccurrences(G,Z)}}extractOccurrences(y,G){y.length&&y.forEach((y=>{if(W.GetElementSize(y),y.hasAttribute(g.ATTRIBUTE_BIS_ID))return;const Z=W.GenerateAndSetBisIdToLinkedinAds(y);this.setSizesAndIdForAllElements(y);const Q=this.cloneIframeWithAd(G,y),z=this.getTargetUrl(y);this.removeBisAttribute(Q);const c=this.getAdLinkedinObject(y,Q,this.adPlacementType,z,"","");setTimeout(this.ExtractAd.bind(this,Z,c,!1,G),100)}))}cloneIframeWithAd(y,G){const Z=document.createElement("html"),Q=this.cloneHeadWithStyles(y),W=y.querySelector("body").cloneNode(!0),g=this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD_WRAPPER.find((y=>!!W.querySelector(y))),z=W.querySelector(g),c=W.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IFRAME_STYLES_CONTAINER),A=W.querySelector("script");return A&&A.remove(),c.style.height="auto",c.style.width=`${G.offsetWidth}px`,z.parentNode.style.height="auto",z.replaceChildren(),z.appendChild(G.cloneNode(!0)),Z.appendChild(Q),Z.appendChild(W),Z}cloneHeadWithStyles(y){const G=y||document,Z=document.createElement("head"),Q=G.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),W=document.createElement("meta");return W.setAttribute("charset","UTF-8"),Z.append(W),Q&&Q.forEach((y=>{let G=y.cloneNode(!0);Z.appendChild(G)})),Z}getTargetUrl(y){return(y.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_TARGET_URL)||y).href||""}removeBisAttribute(y){let G=y.querySelectorAll(`*[${g.ATTRIBUTE_BIS_ID}]`);G.length&&G.forEach((y=>{y.removeAttribute(g.ATTRIBUTE_BIS_ID)}))}}},9170:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y){this.id=y}InjectDetector(y,G){if(document.head){let y=document.createElement("script");this.setAttributes(y),document.head.appendChild(y)}}setAttributes(y){const G=Q.getURL("../executors/linkedin.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}}},2075:(y,G,Z)=>{const Q=Z(2629),W=Z(1050),g=Z(2765),z=Z(1568),c=Z(5364),A=Z(8384),p=Z(8792),K=Z(9346),m=Z(2880);y.exports=class extends K{constructor(y,G,Z){super(y),this.id=y,this.AdBlockerAgent=Z,this.pinterestConfig=G.PinterestConfig,this.onPageRefreshed=this.onPageUrlChanged,this.available=!1,this.pinterestFeedDetector=null,this.pinterestPinDetector=null,this.pinterestSearchDetector=null,this.VideoTrafficDetector=null,this.ActivateVideoTrafficDetector()}onPageUrlChanged(y,G){this.available&&setTimeout((()=>{this.DeactivateDetectors(z.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),100)}PageRefreshed(y,G){this.pageUrl=y,this.ticketId=G,this.onPageUrlChanged&&this.onPageUrlChanged(y,G)}ActivateDetector(y){y===z.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.pinterestFeedDetector=new Q(this.id,this.pinterestConfig.FEED_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestSearchDetector=new g(this.id,this.pinterestConfig.SEARCH_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestPinDetector=new W(this.id,this.pinterestConfig.PIN_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.pinterestFeedDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestFeedDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestFeedDetector.isCarousel=this.isCarousel.bind(this),this.pinterestFeedDetector.HideElement=this.HideElement.bind(this),this.pinterestFeedDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestFeedDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestFeedDetector.isVideo=this.isVideo.bind(this),this.pinterestFeedDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestFeedDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestPinDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestPinDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestPinDetector.isCarousel=this.isCarousel.bind(this),this.pinterestPinDetector.HideElement=this.HideElement.bind(this),this.pinterestPinDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestPinDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestPinDetector.isVideo=this.isVideo.bind(this),this.pinterestPinDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestPinDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestSearchDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestSearchDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestSearchDetector.isCarousel=this.isCarousel.bind(this),this.pinterestSearchDetector.HideElement=this.HideElement.bind(this),this.pinterestSearchDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestSearchDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestSearchDetector.isVideo=this.isVideo.bind(this),this.pinterestSearchDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestSearchDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this)}ActivateDetectors(){this.pinterestFeedDetector.ActivateDetector(),this.pinterestSearchDetector.ActivateDetector(),this.pinterestPinDetector.ActivateDetector()}DeactivateDetectors(y){this.pinterestFeedDetector.DeactivateDetector(y),this.pinterestSearchDetector.DeactivateDetector(y),this.pinterestPinDetector.DeactivateDetector(y)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new p(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_p",JSON.stringify(this.pinterestConfig)))}GetGlobalContainer(){return document.querySelector(this.pinterestConfig.MAIN_CONTAINER_QUERY)}getUniqueContentId(y){const G=y.querySelector(`div[${this.pinterestConfig.UNIQUE_ATTRIBUTE}]`);return G?G.getAttribute(this.pinterestConfig.UNIQUE_ATTRIBUTE):""}IsPostContentRendered(y,G,Z){let Q=!1;if(y){let W=m.GetFullElementSize(y);if(W.w>0&&W.h>0){m.GetImagesSpacePercentage(Z,y,W).some((y=>y>=G))&&(Q=!0)}}return Q}sendPinterestAd(y,G){let Z=document.querySelector(`[${z.ATTRIBUTE_BIS_ID}=${y}]`);Z&&(c.SendCandidatePlacementsCount(this.id,1,z.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST,null),c.SendAdCandidates(this.id,[G],z.MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST,null),A.j&&A.v&&(G.videoData?Z.style.cssText+=z.STYLES_OUTLINE_VIDEO_AD:Z.style.cssText+=z.STYLES_OUTLINE_SUCCESS_DETECT))}}},2629:(y,G,Z)=>{Z(9346);const Q=Z(1568),W=Z(2880),g=Z(655);y.exports=class extends g{constructor(y,G,Z,W){super(y,G,W),this.id=y,this.pinterestConfig=Z,this.adBlockerAgent=W,this.adPlacementType=Q.PINTEREST_AD_PLACEMENT_TYPE_FEED,this.feedContainer=null,this.lastFeedAdsCheckTime=0,this.feedObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(y,G){}setSizesAndIdForAllElements(y){}getAdPinterestObject(y,G,Z,Q,W,g,z){}isVideo(y,G){}removeCloneElement(y){}IsPostContentRendered(y,G,Z){}ActualizeDetector(){return!!this.isFeedPageURL()&&(this.feedContainer=this.getFeedContainer(),!!this.feedContainer)}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,Q.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!0)}Detector(){let y=this.detectPromotedPins();if(y&&y.length)for(let G of y){W.GetElementSize(G);if(!G.hasAttribute(Q.ATTRIBUTE_BIS_ID)){let y=W.GenerateAndSetBisIdToPinterestAds(G);this.setSizesAndIdForAllElements(G);const Z=this.createHTML(G),g=this.getAdvertiserName(G),z=this.getTargetUrl(G),c=this.getTitleText(G),A=this.getAdvertiserUrl(G),p=this.getAdPinterestObject(G,Z,g,z,c,A,Q.PINTEREST_AD_PLACEMENT_TYPE_FEED);this.isVideo(G,this.pinterestConfig.FEED_PAGE.TAGS_FOR_VIDEO_CHECK)&&(p.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.adBlockerAgent.IsElementHidden(G)&&(this.HideElement(G),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(Z);let K=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,y,p),clearTimeout(K)}),100)}}}detectPromotedPins(){if(!this.feedContainer)return[];let y=[],G=this.pinterestConfig.FEED_PAGE.IMG_SPACE_PERCENTAGE,Z=this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,Q=Array.from(this.feedContainer.childNodes),W=this.pinterestConfig.PROMOTED_ALIASES;for(let g of Q)if(this.IsPostContentRendered(g,G,this.pinterestConfig.FEED_PAGE.TAGS_FOR_LOADING_CHECK)){const G=g.querySelector(this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY);if(!G)continue;let Q=G.innerText;if(!Q||"style"===G.nodeName.toLowerCase()){let y=window.getComputedStyle(G,":before");Q=G.textContent,y&&y.content&&!Q&&(Q=y.content);for(let y of Z){if(!Q){Q="";break}let G=y[0],Z=y[1],W="join"!==G?new RegExp(Z,"g"):"";"join"!==G||1!==Q.length?Q="replace"===G?Q[G](W,""):Q[G](W):Q=Q[0]}}W.some((y=>Q.search(y)>=0))&&y.push(g)}return y}getFeedContainer(){let y=this.getGlobalContainer(),G=null;return y?(G=y.querySelector(this.pinterestConfig.FEED_PAGE.CONTAINER_QUERY),G):G}get cloneBodyWithStyles(){const y=document.createElement("body"),G=document.querySelectorAll("body style");return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}get cloneHeadWithStyles(){const y=document.createElement("head"),G=document.querySelectorAll('head link[rel="stylesheet"], head script');return G&&G.forEach((G=>{let Z=G.cloneNode();y.appendChild(Z)})),y}createHTML(y){const G=document.createElement("html"),Z=this.cloneBodyWithStyles,Q=this.cloneHeadWithStyles,W=y.cloneNode(!0);return this.styleFixes(W),Z.appendChild(W),G.appendChild(Q),G.appendChild(Z),G}getAdvertiserName(y){const G=this.pinterestConfig.FEED_PAGE.ADVERTISER_NAME_QUERY;let Z=Array.from(y.querySelectorAll(G));for(let y of Z)if(y&&y.innerText)return y.innerText;return""}getAdvertiserUrl(y){const G=this.pinterestConfig.FEED_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let Z=y.querySelector(G);return Z?Z.href:""}styleFixes(y){y.style.cssText=y.style.cssText.replace(/transform.[^;]*;/,"");for(let G of this.pinterestConfig.FEED_PAGE.STYLE_FIXES){const Z=y.querySelector(G.ELEMENT_QUERY);let W=G.NEW_RULES;if(Z){if(G.NEW_RULES.includes("${")){let y=JSON.parse(Z.getAttribute(Q.ATTRIBUTE_BIS_SIZE)).h;W=G.NEW_RULES.replace(/\$\{.[^}]*\}/,y)}Z.style.cssText+=W}}}getTargetUrl(y){const G=this.pinterestConfig.FEED_PAGE.TARGET_URL_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.href&&(Q=Z.href),Q}getTitleText(y){const G=this.pinterestConfig.FEED_PAGE.TITLE_TEXT_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.textContent.length&&(Q=Z.textContent),Q}isFeedPageURL(){return-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin|search)\//)}}},1050:(y,G,Z)=>{const Q=Z(1568),W=Z(2880),g=Z(655);y.exports=class extends g{constructor(y,G,Z,W){super(y,G,W),this.id=y,this.pinterestConfig=Z,this.adBlockerAgent=W,this.pinContainer=null,this.adPlacementType=Q.PINTEREST_AD_PLACEMENT_TYPE_PIN,this.lastPinAdsCheckTime=0,this.pinObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(y,G){}setSizesAndIdForAllElements(y){}getAdPinterestObject(y,G,Z,Q,W,g,z){}isVideo(y,G){}removeCloneElement(y){}IsPostContentRendered(y,G,Z){}ActualizeDetector(){return this.pinContainer=this.getPinContainer(),!!this.pinContainer}ActivateMutationObserver(){this.pinContainer?(this.pinObserver||(this.pinObserver=new MutationObserver(this.DetectCandidates.bind(this,Q.AD_DETECTOR_INITIATOR_MUTATION)),this.pinObserver.observe(this.pinContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.pinContainer=null,this.isObserverAlreadySet=!1)}Detector(){let y=this.detectPromotedPins();if(y&&y.length)for(let G of y){W.GetElementSize(G);if(!G.hasAttribute(Q.ATTRIBUTE_BIS_ID)){let y=W.GenerateAndSetBisIdToPinterestAds(G);this.setSizesAndIdForAllElements(G);const Z=this.createHTML(G),Q=this.getAdvertiserName(G),g=this.getTargetUrl(G),z=this.getTitleText(G),c=this.getAdvertiserUrl(G),A=this.getAdPinterestObject(G,Z,Q,g,z,c,this.adPlacementType);this.isVideo(G,this.pinterestConfig.PIN_PAGE.TAGS_FOR_VIDEO_CHECK)&&(A.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.adBlockerAgent.IsElementHidden(G)&&(this.HideElement(G),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(Z);let p=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,y,A),clearTimeout(p)}),100)}}}detectPromotedPins(){if(!this.pinContainer)return[];let y=[],G=this.pinterestConfig.PIN_PAGE.IMG_SPACE_PERCENTAGE,Z=this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,Q=Array.from(this.pinContainer.childNodes),W=this.pinterestConfig.PROMOTED_ALIASES;for(let g of Q)if(this.IsPostContentRendered(g,G,this.pinterestConfig.PIN_PAGE.TAGS_FOR_LOADING_CHECK)){const G=g.querySelector(this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY);if(!G)continue;let Q=G.innerText;if(!Q||"style"===G.nodeName.toLowerCase()){let y=window.getComputedStyle(G,":before");Q=G.textContent,y&&y.content&&!Q&&(Q=y.content);for(let y of Z){if(!Q){Q="";break}let G=y[0],Z=y[1],W="join"!==G?new RegExp(Z,"g"):"";"join"!==G||1!==Q.length?Q="replace"===G?Q[G](W,""):Q[G](W):Q=Q[0]}}W.some((y=>Q.search(y)>=0))&&y.push(g)}return y}getPinContainer(){let y=this.getGlobalContainer(),G=null;return y?(G=y.querySelector(this.pinterestConfig.PIN_PAGE.CONTAINER_QUERY),G):G}get cloneBodyWithStyles(){const y=document.createElement("body"),G=document.querySelectorAll("body style");return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}get cloneHeadWithStyles(){const y=document.createElement("head"),G=document.querySelectorAll('head link[rel="stylesheet"], head script');return G&&G.forEach((G=>{let Z=G.cloneNode();y.appendChild(Z)})),y}createHTML(y){const G=document.createElement("html"),Z=this.cloneBodyWithStyles,Q=this.cloneHeadWithStyles,W=y.cloneNode(!0);return this.styleFixes(W),Z.appendChild(W),G.appendChild(Q),G.appendChild(Z),G}getAdvertiserName(y){const G=this.pinterestConfig.PIN_PAGE.ADVERTISER_NAME_QUERY;let Z=Array.from(y.querySelectorAll(G));for(let y of Z)if(y&&y.innerText)return y.innerText;return""}getAdvertiserUrl(y){const G=this.pinterestConfig.PIN_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let Z=y.querySelector(G);return Z?Z.href:""}getTitleText(y){const G=this.pinterestConfig.PIN_PAGE.TITLE_TEXT_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.textContent.length&&(Q=Z.textContent),Q}styleFixes(y){y.style.cssText=y.style.cssText.replace(/transform.[^;]*;/,"");for(let G of this.pinterestConfig.PIN_PAGE.STYLE_FIXES){const Z=y.querySelector(G.ELEMENT_QUERY);let W=G.NEW_RULES;if(Z){if(G.NEW_RULES.includes("${")){let y=JSON.parse(Z.getAttribute(Q.ATTRIBUTE_BIS_SIZE)).h;W=G.NEW_RULES.replace(/\$\{.[^}]*\}/,y)}Z.style.cssText+=W}}}getTargetUrl(y){const G=this.pinterestConfig.PIN_PAGE.TARGET_URL_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.href&&(Q=Z.href),Q}isPinPageURL(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin)\//))}}},2765:(y,G,Z)=>{const Q=Z(1568),W=Z(2880),g=Z(655);y.exports=class extends g{constructor(y,G,Z,Q){super(y,G,Q),this.id=y,this.pinterestConfig=Z,this.adBlockerAgent=Q,this.searchContainer=null,this.lastSearchPageAdsCheckTime=0,this.searchPageObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(y,G){}setSizesAndIdForAllElements(y){}getAdPinterestObject(y,G,Z,Q,W,g,z){}isVideo(y,G){}removeCloneElement(y){}IsPostContentRendered(y,G,Z){}ActualizeDetector(){return this.searchContainer=this.getSearchContainer(),!!this.searchContainer}ActivateMutationObserver(){this.searchContainer?(this.searchPageObserver||(this.searchPageObserver=new MutationObserver(this.DetectCandidates.bind(this,Q.AD_DETECTOR_INITIATOR_MUTATION)),this.searchPageObserver.observe(this.searchContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.searchContainer=null,this.isObserverAlreadySet=!1)}Detector(){let y=this.detectPromotedPins();if(y&&y.length)for(let G of y){W.GetElementSize(G);if(!G.hasAttribute(Q.ATTRIBUTE_BIS_ID)){let y=W.GenerateAndSetBisIdToPinterestAds(G);this.setSizesAndIdForAllElements(G);const Z=this.createHTML(G),g=this.getAdvertiserName(G),z=this.getTargetUrl(G),c=this.getTitleText(G),A=this.getAdvertiserUrl(G),p=this.getAdPinterestObject(G,Z,g,z,c,A,Q.PINTEREST_AD_PLACEMENT_TYPE_SEARCH);this.isVideo(G,this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_VIDEO_CHECK)&&(p.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.AdBlockerAgent.IsElementHidden(G)&&(this.HideElement(G),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(Z);let K=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,y,p),clearTimeout(K)}),100)}}}detectPromotedPins(){if(!this.searchContainer)return[];let y=[],G=this.pinterestConfig.SEARCH_PAGE.IMG_SPACE_PERCENTAGE,Z=this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,Q=Array.from(this.searchContainer.childNodes),W=this.pinterestConfig.PROMOTED_ALIASES;for(let g of Q)if(this.IsPostContentRendered(g,G,this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_LOADING_CHECK)){const G=g.querySelector(this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY);if(!G)continue;let Q=G.innerText;if(!Q||"style"===G.nodeName.toLowerCase()){let y=window.getComputedStyle(G,":before");Q=G.textContent,y&&y.content&&!Q&&(Q=y.content);for(let y of Z){if(!Q){Q="";break}let G=y[0],Z=y[1],W="join"!==G?new RegExp(Z,"g"):"";"join"!==G||1!==Q.length?Q="replace"===G?Q[G](W,""):Q[G](W):Q=Q[0]}}W.some((y=>Q.search(y)>=0))&&y.push(g)}return y}getSearchContainer(){let y=this.getGlobalContainer(),G=null;return y?(G=y.querySelector(this.pinterestConfig.SEARCH_PAGE.CONTAINER_QUERY),G):G}get cloneBodyWithStyles(){const y=document.createElement("body"),G=document.querySelectorAll("body style");return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}get cloneHeadWithStyles(){const y=document.createElement("head"),G=document.querySelectorAll('head link[rel="stylesheet"], head script');return G&&G.forEach((G=>{let Z=G.cloneNode();y.appendChild(Z)})),y}createHTML(y){const G=document.createElement("html"),Z=this.cloneBodyWithStyles,Q=this.cloneHeadWithStyles,W=y.cloneNode(!0);return this.styleFixes(W),Z.appendChild(W),G.appendChild(Q),G.appendChild(Z),G}getAdvertiserName(y){const G=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_NAME_QUERY;let Z=Array.from(y.querySelectorAll(G));for(let y of Z)if(y&&y.innerText)return y.innerText;return""}getAdvertiserUrl(y){const G=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let Z=y.querySelector(G);return Z?Z.href:""}styleFixes(y){y.style.cssText=y.style.cssText.replace(/transform.[^;]*;/,"");for(let G of this.pinterestConfig.SEARCH_PAGE.STYLE_FIXES){const Z=y.querySelector(G.ELEMENT_QUERY);let W=G.NEW_RULES;if(Z){if(G.NEW_RULES.includes("${")){let y=JSON.parse(Z.getAttribute(Q.ATTRIBUTE_BIS_SIZE)).h;W=G.NEW_RULES.replace(/\$\{.[^}]*\}/,y)}Z.style.cssText+=W}}}getTargetUrl(y){const G=this.pinterestConfig.SEARCH_PAGE.TARGET_URL_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.href&&(Q=Z.href),Q}getTitleText(y){const G=this.pinterestConfig.SEARCH_PAGE.TITLE_TEXT_QUERY;let Z=y.querySelector(G),Q="";return Z&&Z.textContent.length&&(Q=Z.textContent),Q}isSearchPageURL(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(search)\//))}}},8792:(y,G,Z)=>{const Q=Z(2880);Z(1568);y.exports=class{constructor(y){this.id=y}InjectDetector(y,G){if(document.head){var Z=document.createElement("script");this.setAttributes(Z),document.head.appendChild(Z)}}setAttributes(y){const G=Q.getURL("../executors/pinterest.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}}},5465:(y,G,Z)=>{const Q=Z(9346),W=Z(9105),g=Z(1568),z=Z(8384),c=Z(5364),A=Z(9431),p=Z(1145),K=Z(9955);y.exports=class extends Q{constructor(y,G,Z){super(y),this.id=y,this.RedditVideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=Z,this.redditConfig=G.RedditConfig,this.RedditDetectorFeed=null,this.RedditDetectorComments=null,this.RedditDetectorRightColumn=null,this.ActivateTrafficDetector()}onPageUrlChanged(y,G){this.available&&setTimeout((()=>{this.DeactivateDetectors(g.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.RedditDetectorFeed.ActivateDetector(),this.RedditDetectorComments.ActivateDetector(),this.RedditDetectorRightColumn.ActivateDetector()}DeactivateDetectors(y){this.RedditDetectorFeed.DeactivateDetector(y),this.RedditDetectorComments.DeactivateDetector(y),this.RedditDetectorRightColumn.DeactivateDetector(y)}ActivateDetector(y){y===g.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.RedditDetectorFeed=new A(this.id,this.redditConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorComments=new p(this.id,this.redditConfig.COMMENT_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorRightColumn=new K(this.id,this.redditConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.RedditDetectorFeed.isCarousel=this.isCarousel.bind(this),this.RedditDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorFeed.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorFeed.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorFeed.HideElement=this.HideElement.bind(this),this.RedditDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorComments.HideElement=this.HideElement.bind(this),this.RedditDetectorComments.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorComments.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorComments.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorComments.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorRightColumn.HideElement=this.HideElement.bind(this),this.RedditDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorRightColumn.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorRightColumn.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this)}ActivateTrafficDetector(){this.RedditVideoTrafficDetector||(this.RedditVideoTrafficDetector=new W(this.id),this.RedditVideoTrafficDetector.InjectDetector(this.id+"_r",JSON.stringify(this.redditConfig)))}processAndSendRedditAd(y,G,Z=!1){let Q=document.querySelector(`[${g.ATTRIBUTE_BIS_ID}=${y}]`);if(Q){let y=!!Q.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK);c.SendCandidatePlacementsCount(this.id,1,g.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT,null),c.SendAdCandidates(this.id,[G],g.MESSAGE_TYPE_CANDIDATES_DATA_REDDIT,null),z.j&&z.v&&(Q.style.cssText+=Z?g.STYLES_OUTLINE_VIDEO_AD:y?g.STYLES_OUTLINE_TEXT_AD:g.STYLES_OUTLINE_SUCCESS_DETECT)}}}},1145:(y,G,Z)=>{const Q=Z(655),W=Z(1568),g=Z(2880);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.id=y,this.redditConfig=Q,this.commentPageContainer=null,this.AdBlockerAgent=Z,this.commentPageObserver=null,this.adPlacementType=W.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE}HideElement(){}setSizesAndIdForAllElements(y){}getAdRedditObject(y,G,Z,Q){}doesElementExists(y){}ActualizeDetector(){return this.commentPageContainer=this.getCommentPageContainer,!!this.commentPageContainer}ActivateMutationObserver(){this.commentPageContainer?(this.commentPageObserver||(this.commentPageObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.commentPageObserver.observe(this.commentPageContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}get getCommentPageContainer(){let y=this.redditConfig.COMMENT_PAGE.QUERIES,G=this.redditConfig.COMMENT_PAGE.MIN_HEIGHT,Z=window.innerWidth,Q=this.redditConfig.COMMENT_PAGE.QUERY_TO_EXCLUDE,W=this.redditConfig.COMMENT_PAGE.TOP_DISTANCE;for(let g of y){const y=Array.from(document.querySelectorAll(g));for(let g of y){const y=g.getBoundingClientRect(),z=(Z-parseInt(g.offsetWidth))/Z*100,c=Array.from(g.children);if(parseInt(g.offsetHeight)>G&&z>2&&(parseInt(y.top)>W||parseInt(y.top)<0)&&c.length>=3&&!g.querySelector(Q))return g}}return null}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processCommentPageAds(!0),this.isCommentPage&&this.commentPageContainer&&this.processCommentPageAds()}processCommentPageAds(){this.extractOccurrences()}allCellsAndMinImgSpace(){let y=[],G=[],Z=this.redditConfig.COMMENT_PAGE.IMG_SPACE_PERCENTAGE;return this.commentPageContainer&&(y=Array.from(this.commentPageContainer.children).map((y=>{let Z=Array.from(y.querySelectorAll(this.redditConfig.COMMENT_PAGE.QUERY_AD_INSIDE_COMMENT_TREE));if(!Z?.length)return y;for(let y of Z)G.push(y)})).concat(G)),y=y.filter((y=>!!y&&this.isPromoted(y))),{allCells:y,minImgSquarePercentage:Z}}extractOccurrences(){let{allCells:y,minImgSquarePercentage:G}=this.allCellsAndMinImgSpace();if(y.length)for(let Z of y)if(!Z.hasAttribute(W.ATTRIBUTE_BIS_ID)&&!Z.hasAttribute(W.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(Z,G)&&this.isAvatarImgReady(Z)){let y=g.GenerateAndSetBisIdToRedditAds(Z),G=this.isVideoPost(Z);if(this.isShadowRootExist(Z)){const Q=this.deepClone(Z);let W=this.buildBannerHtml(Q,this.adPlacementType),g=this.lookingTargetUrl(W),z=this.getAdRedditObject(Z,W,g,this.adPlacementType);G&&(z.videoData=this.lookingForVideoDataInContent(Z)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),Q.remove(),setTimeout(this.ExtractAd.bind(this,y,z,G),100)}else{this.setSizesAndIdForAllElements(Z);const Q=Z.cloneNode(!0);let W=this.buildBannerHtml(Q,this.adPlacementType),g=this.lookingTargetUrl(W),z=this.getAdRedditObject(Z,W,g,this.adPlacementType);G&&(z.videoData=this.lookingForVideoDataInContent(Z)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),Q.remove(),setTimeout(this.ExtractAd.bind(this,y,z,G),100)}}}isShadowRootExist(y){if(y.shadowRoot)return!0;return Array.from(y.querySelectorAll("*")).some((y=>y.shadowRoot))}deepClone(y){let G=1;const Z=(y,Q)=>{const W=(y,G)=>{for(;y;)Z(y,G),y=y.nextSibling};if(y){const Z=y.cloneNode(!1);"SLOT"===y.nodeName&&(y.setAttribute("data-assigning-slot-id",G),Z.setAttribute("data-assigning-slot-id",G)),y.assignedSlot&&y instanceof Element&&y.assignedSlot.hasAttribute("data-assigning-slot-id")&&Z.setAttribute("data-assigned-to",y.assignedSlot.getAttribute("data-assigning-slot-id")),G+=1,Q.appendChild(Z),y.shadowRoot&&(this.setSizesAndIdForAllElements(y.shadowRoot),y.shadowRoot&&y.shadowRoot.firstChild.setAttribute&&g.SetFullSizeToElement(y.shadowRoot.firstChild),W(y.shadowRoot.firstChild,Z)),this.setSizesAndIdForAllElements(y),y&&y.setAttribute&&g.SetFullSizeToElement(y),W(y.firstChild,Z)}},Q=document.createElement("div");return Z(y,Q),this.replaceElementsToRightSlots(Q.firstElementChild),Q.firstElementChild}replaceElementsToRightSlots(y){const G=y.querySelectorAll("*[data-assigned-to]"),Z=y.querySelectorAll("*[data-assigning-slot-id]");for(let y of G){const G=y.getAttribute("data-assigned-to");for(let Q of Z){if(G===Q.getAttribute("data-assigning-slot-id")){Q.appendChild(y);break}}}}buildBannerHtml(y,G){let Z=this.commentPageContainer;this.setWrapperClass(Z);let Q=this.headCopyWithStyles;const W=document.createElement("html"),g=this.bodyCopyWithStyles,z=document.createElement("div"),c=Z.cloneNode();return z.appendChild(c),this.setWrapperStyles(Z,z),Q.appendChild(this.getClassNameForStyles(y)),W.appendChild(Q),c.appendChild(y),g.appendChild(z),W.appendChild(g),W}setWrapperClass(y){let G=y.parentElement,Z=!1;if(G)for(let W=0;W<50&&!Z&&G;W++)if(G.nextSibling&&-1!==G.nextSibling.nodeName.search(/style/i)&&G.previousSibling&&-1!==G.previousSibling.nodeName.search(/style/i)){var Q=G.getAttribute("class");y.className+=y.className.length?" "+Q:Q,Z=!0}else G=G.parentElement}get headCopyWithStyles(){const y=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((G=>{const Z=G.KEY,Q=G.ALL_STYLES_FROM,W=G.COMMENT_PAGE;for(let G of Array.from(y.children))if(-1!==G.nodeName.search(/^(style|link)$/gi)){if(G.dataset[Z]){let y=Q.some((y=>G.dataset[Z].includes(y)));!y&&this.isCommentPage&&(y=W.some((y=>G.dataset[Z].includes(y)))),y||G.remove()}}else G.remove()})),this.neccesaryStyleRules){const G=document.createElement("style");G.innerHTML=this.neccesaryStyleRules,y.appendChild(G)}return this.getStylesByTagName(y),y}get neccesaryStyleRules(){let y=null;const G=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((y=>{const G=new RegExp(y,"gi"),Z=document.querySelector("head").outerHTML.match(G);let Q;return Z&&Z.length&&(Q=Z.join("")),Q})).filter((y=>y));return G&&G.length&&(y=G.join("")),y}getClassNameForStyles(y){let G=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((Z=>{const Q=y.querySelector(Z.CLASS_NAME_CHILD);let W=Q&&Q.parentElement?Q.parentElement:null,g="";for(let y=1;y<Z.DEEP_LEVEL;y++)W&&(W=W.parentElement);W&&(g=W.classList[0],G.innerHTML+="."+g+Z.STYLES)})),G}getStylesByTagName(y){let G=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((G=>{const Z=new RegExp(G.ATTRIBUTE_REGEX_VALUE);return Array.from(y.querySelectorAll(G.TAG_NAME)).filter((y=>{if(y&&y[G.ATTRIBUTE_NAME]&&-1!==y[G.ATTRIBUTE_NAME].search(Z))return y;y.remove()}))})).filter((y=>y)).forEach((y=>{G=G.concat(y)})),G.forEach((G=>{y.appendChild(G)}))}get bodyCopyWithStyles(){const y=document.createElement("body"),G=document.querySelector("body style")?.cloneNode(!0);return G&&y.appendChild(G),y}isPromoted(y){if(!y)return!1;let G=y,Z=null;1===G.childElementCount&&G.firstElementChild.shadowRoot&&G.firstElementChild.shadowRoot.firstElementChild?Z=G.firstElementChild.shadowRoot.firstElementChild:G.shadowRoot&&(Z=G.shadowRoot.firstElementChild);let Q=[];Z&&(Q=Array.from(Z.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)));let W=Array.from(G.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)).concat(Q);return W.length?W.some((y=>{let G=y.textContent.trim().toLowerCase();return G?this.redditConfig.PROMOTED_ALIASES.some((y=>G.indexOf(y)>=0)):y.dataset.beforeContent?(G=y.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((y=>G.indexOf(y)>=0))):void 0})):void 0}IsPostContentRendered(y,G){let Z=!1;if(y){let Q=y.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(Q&&0===Q.length){let Q=g.GetFullElementSize(y);if(Q.w>0){g.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,y,Q).some((y=>y>=G))&&(Z=!0)}}y.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(Z=!0)}return Z}lookingTargetUrl(y){let G="";let Z=Array.from(y.querySelectorAll('a[target="_blank"]')).filter((y=>!(!y||!y.href||y.href.includes("reddit.com/user/"))));return Z.length&&(G=Z[0].href),G}isAvatarImgReady(y){if(!y)return!1;let G=[y],Z=null;1===y.childElementCount&&y.firstElementChild.shadowRoot&&(Z=y.firstElementChild.shadowRoot.firstElementChild),y.shadowRoot&&(Z=y.shadowRoot.firstElementChild),Z&&G.push(Z);let Q=!1;for(let y of G){let G=y.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(G){if(!G.shadowRoot)return!0;if(Q=!!G.shadowRoot&&!!G.shadowRoot.querySelector("img"),Q)break}}return Q}isVideoPost(y){let G=!1;if(y){G=Array.from(y.querySelectorAll("*")).some((y=>{let G=!!y.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!G&&y.shadowRoot&&(G=!!y.shadowRoot.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length),G}))}return G}lookingForVideoDataInContent(y){const G=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT;let Z=y.querySelector(G);if(Z){let y=Z.getAttribute("src");Z.getAttribute("poster");if(y&&!y.includes("blob:")){const G=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let Z=y.match(G),Q=null;if(Z?.groups?.videoId)return Q=Z.groups.videoId,{videoId:Q,url:y}}}return{}}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}setWrapperStyles(y,G){G.style.cssText=G.style.cssText+`max-width: ${this.maxWidthContainer(y)}`}get isCommentPage(){return-1!==window.location.href.indexOf(this.redditConfig.COMMENT_PAGE.TEXT_FROM_HREF)}get isCommentPopup(){return!!document.querySelector(this.redditConfig.COMMENT_PAGE.QUERY_IS_POPUP)}}},9431:(y,G,Z)=>{const Q=Z(655),W=Z(1568),g=Z(2880);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.id=y,this.feedObserver=null,this.redditConfig=Q,this.feedContainer=null,this.AdBlockerAgent=Z,this.lastTopPosition=null,this.adPlacementType=W.REDDIT_AD_PLACEMENT_TYPE_FEED}isCarousel(){}HideElement(){}setSizesAndIdForAllElements(y){}getAdRedditObject(y,G,Z,Q){}doesElementExists(y){}ActualizeDetector(){return!!this.isValidUrl&&(this.feedContainer=this.getFeedContainer,!!this.feedContainer)}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.lastTopPosition=parseInt(this.feedContainer.getBoundingClientRect().top),this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processFeedAds(),this.isCommentPage||this.isCommentPopup||(this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds())}processFeedAds(){this.extractOccurrences()}allCellsAndMinImgSpace(){let y=[],G=0;if(this.feedContainer){let Z=Array.from(this.feedContainer.children),Q=Array.from(document.querySelectorAll(this.redditConfig.FEED.QUERY_POSTS));y=Z,Q&&Q.length&&(y=Z.concat(Q)),G=this.redditConfig.FEED.IMG_SPACE_PERCENTAGE}return y=y.filter((y=>this.isPromoted(y)&&y.offsetHeight<this.redditConfig.FEED.MAX_CHILD_HEIGHT)),{allCells:y,minImgSquarePercentage:G}}extractOccurrences(){let{allCells:y,minImgSquarePercentage:G}=this.allCellsAndMinImgSpace();if(y.length)for(let Z of y)if(!Z.hasAttribute(W.ATTRIBUTE_BIS_ID)&&!Z.hasAttribute(W.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(Z,G)&&this.isAvatarImgReady(Z)){this.isCarousel(Z)&&this.redditConfig.IS_ACTIVE_GET_SLIDES_SRC&&this.getSlidesSrc(Z);let y=g.GenerateAndSetBisIdToRedditAds(Z),G=this.isVideoPost(Z);if(this.isShadowRootExist(Z)){const Q=this.deepClone(Z);let W=this.buildBannerHtml(Q,this.adPlacementType),g=this.getAdRedditObject(Z,W,"",this.adPlacementType);G&&(g.videoData=this.lookingForVideoDataInContent(Z)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),Q.remove(),setTimeout(this.ExtractAd.bind(this,y,g,G),100)}else{this.setSizesAndIdForAllElements(Z);const Q=Z.cloneNode(!0);let W=this.buildBannerHtml(Q,this.adPlacementType),z=this.getAdRedditObject(Z,W,"",this.adPlacementType);z.size.h<300&&(z.size=g.SetFullSizeToElement(Z)),G&&(z.videoData=this.lookingForVideoDataInContent(Z)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),Q.remove(),setTimeout(this.ExtractAd.bind(this,y,z,G),100)}}}isShadowRootExist(y){if(y.shadowRoot)return!0;return Array.from(y.querySelectorAll("*")).some((y=>y.shadowRoot))}deepClone(y){let G=1;const Z=(y,Q)=>{const W=(y,G)=>{for(;y;)Z(y,G),y=y.nextSibling};if(y){const Z=y.cloneNode(!1);"SLOT"===y.nodeName&&(y.setAttribute("data-assigning-slot-id",G),Z.setAttribute("data-assigning-slot-id",G)),y.assignedSlot&&y instanceof Element&&y.assignedSlot.hasAttribute("data-assigning-slot-id")&&Z.setAttribute("data-assigned-to",y.assignedSlot.getAttribute("data-assigning-slot-id")),G+=1,Q.appendChild(Z),y.shadowRoot&&(this.setSizesAndIdForAllElements(y.shadowRoot),y.shadowRoot&&y.shadowRoot.firstChild.setAttribute&&g.SetFullSizeToElement(y.shadowRoot.firstChild),W(y.shadowRoot.firstChild,Z)),this.setSizesAndIdForAllElements(y),y&&y.setAttribute&&g.SetFullSizeToElement(y),W(y.firstChild,Z)}},Q=document.createElement("div");return Z(y,Q),this.replaceElementsToRightSlots(Q.firstElementChild),Q.firstElementChild}replaceElementsToRightSlots(y){const G=y.querySelectorAll("*[data-assigned-to]"),Z=y.querySelectorAll("*[data-assigning-slot-id]");for(let y of G){const G=y.getAttribute("data-assigned-to");for(let Q of Z){if(G===Q.getAttribute("data-assigning-slot-id")){Q.appendChild(y);break}}}}getSlidesSrc(y){var G=y.querySelector("ul").parentElement,Z=G.querySelector(this.redditConfig.CAROUSEL_BUTTON_NEXT),Q=G.querySelector(this.redditConfig.CAROUSEL_BUTTON_PREVIUOS);Z&&Q&&(Z.click(),Q.click())}buildBannerHtml(y,G){let Z=this.feedContainer;this.setWrapperClass(Z);let Q=this.headCopyWithStyles;const W=document.createElement("html"),g=this.bodyCopyWithStyles,z=document.createElement("div"),c=Z.cloneNode();return z.appendChild(c),this.setWrapperStyles(Z,z),Q.appendChild(this.getClassNameForStyles(y)),W.appendChild(Q),c.appendChild(y),g.appendChild(z),W.appendChild(g),W}setWrapperClass(y){let G=y.parentElement,Z=!1;if(G)for(let W=0;W<50&&!Z&&G;W++)if(G.nextSibling&&-1!==G.nextSibling.nodeName.search(/style/i)&&G.previousSibling&&-1!==G.previousSibling.nodeName.search(/style/i)){var Q=G.getAttribute("class");y.className+=y.className.length?" "+Q:Q,Z=!0}else G=G.parentElement}setWrapperStyles(y,G){G.style.cssText=G.style.cssText+`max-width: ${this.maxWidthContainer(y)}`}get getFeedContainer(){let y=this.redditConfig.FEED.QUERIES,G=window.innerWidth,Z=this.redditConfig.FEED.SECONDARY_CHECK_QUERY,Q=this.redditConfig.FEED.QUERY_TO_EXCLUDE;for(let W of y){const y=Array.from(document.querySelectorAll(W));for(let W of y){const y=getComputedStyle(W),g=(G-parseInt(y.width))/G*100;if(parseInt(y.height)>1e3&&g>2&&!W.querySelector(Q))return W.querySelector(Z)?W.querySelector(Z):W}}return null}get headCopyWithStyles(){const y=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((G=>{const Z=G.KEY,Q=G.ALL_STYLES_FROM,W=G.FEED_PAGE;for(let G of Array.from(y.children))if(-1!==G.nodeName.search(/^(style|link)$/gi)){if(G.dataset[Z]){let y=Q.some((y=>G.dataset[Z].includes(y)));y||this.isCommentPage||(y=W.some((y=>G.dataset[Z].includes(y)))),y||G.remove()}}else G.remove()})),this.neccesaryStyleRules){const G=document.createElement("style");G.innerHTML=this.neccesaryStyleRules,y.appendChild(G)}return this.getStylesByTagName(y),y}get neccesaryStyleRules(){let y=null;const G=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((y=>{const G=new RegExp(y,"gi"),Z=document.querySelector("head").outerHTML.match(G);let Q;return Z&&Z.length&&(Q=Z.join("")),Q})).filter((y=>y));return G&&G.length&&(y=G.join("")),y}getClassNameForStyles(y){let G=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((Z=>{const Q=y.querySelector(Z.CLASS_NAME_CHILD);let W=Q&&Q.parentElement?Q.parentElement:null,g="";for(let y=1;y<Z.DEEP_LEVEL;y++)W&&(W=W.parentElement);W&&(g=W.classList[0],G.innerHTML+="."+g+Z.STYLES)})),G}getStylesByTagName(y){let G=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((G=>{const Z=new RegExp(G.ATTRIBUTE_REGEX_VALUE);return Array.from(y.querySelectorAll(G.TAG_NAME)).filter((y=>{if(y&&y[G.ATTRIBUTE_NAME]&&-1!==y[G.ATTRIBUTE_NAME].search(Z))return y;y.remove()}))})).filter((y=>y)).forEach((y=>{G=G.concat(y)})),G.forEach((G=>{y.appendChild(G)}))}get bodyCopyWithStyles(){const y=document.createElement("body"),G=Array.from(document.querySelectorAll("body style")).map((y=>{if(y)return y.cloneNode(!0)}));return G&&G.forEach((G=>{y.appendChild(G)})),y}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}isVideoPost(y){let G=!1;if(y){G=Array.from(y.querySelectorAll("*")).some((y=>{let G=!!y.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!G&&y.shadowRoot&&(G=!!y.shadowRoot.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length),G}))}return G}lookingForVideoDataInContent(y){const G=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT;let Z=y.querySelector(G);if(Z){let y=Z.getAttribute("src");Z.getAttribute("poster");if(y&&!y.includes("blob:")){const G=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let Z=y.match(G),Q=null;if(Z?.groups?.videoId)return Q=Z.groups.videoId,{videoId:Q,url:y}}}return{}}isPromoted(y){if(y){let G=y;1===G.childElementCount&&G.firstElementChild.shadowRoot&&G.firstElementChild.shadowRoot.firstElementChild&&(G=G.firstElementChild.shadowRoot.firstElementChild);let Z=Array.from(G.querySelectorAll(this.redditConfig.FEED.PROMOTED_SELECTOR)),Q=Array.from(G.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)),W=Array.from(y.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR)),g=Z.concat(W).concat(Q);if(g.length)return g.some((y=>{let G=y.textContent.trim().toLowerCase();return G?this.redditConfig.PROMOTED_ALIASES.some((y=>G.indexOf(y)>=0)):y.dataset.beforeContent?(G=y.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((y=>G.indexOf(y)>=0))):void 0}))}return!1}IsPostContentRendered(y,G){let Z=!1;if(y){let Q=y.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(Q&&0===Q.length){let Q=g.GetFullElementSize(y);if(Q.w>0){g.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,y,Q).some((y=>y>=G))&&(Z=!0)}}y.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(Z=!0)}return Z}isAvatarImgReady(y){if(!y)return!1;let G=[y],Z=null;1===y.childElementCount&&y.firstElementChild.shadowRoot&&(Z=y.firstElementChild.shadowRoot.firstElementChild),y.shadowRoot&&(Z=y.shadowRoot.firstElementChild),Z&&G.push(Z);let Q=!1;for(let y of G){let G=y.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(G){if(!G.shadowRoot)return!0;if(Q=!!G.shadowRoot&&!!G.shadowRoot.querySelector("img"),Q)break}}return Q}get isValidUrl(){return!this.redditConfig.FEED.INVALID_URL_PATHS.some((y=>window.location.href.includes(y)))}}},9955:(y,G,Z)=>{const Q=Z(655),W=Z(1568),g=Z(2880);y.exports=class extends Q{constructor(y,G,Z,Q){super(y,G,Z),this.id=y,this.rightColumnObserver=null,this.redditConfig=Q,this.rightColumnContainer=null,this.AdBlockerAgent=Z,this.lastTopPosition=null,this.adPlacementType=W.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN}HideElement(){}setSizesAndIdForAllElements(y){}getAdRedditObject(y,G,Z,Q){}doesElementExists(y){}ActualizeDetector(){return this.rightColumnContainer=this.getRightColumnContainer,!!this.rightColumnContainer}ActivateMutationObserver(){this.rightColumnContainer?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processRightColumnAds(),this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer,this.rightColumnContainer&&this.processRightColumnAds()}processRightColumnAds(){this.extractOccurrences(W.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN)}allCellsAndMinImgSpace(){let y=[],G=0;return this.rightColumnContainer&&this.rightColumnContainer.children&&(y=Array.from(this.rightColumnContainer.children).map((y=>y.querySelector("div ~ div > button")?y.querySelector("div:nth-child(1)"):"HR"===y.nodeName||0===y.getBoundingClientRect().height?null:y)).filter((y=>y)),G=this.redditConfig.RIGHT_COLUMN.IMG_SPACE_PERCENTAGE),y=y.filter((y=>this.isPromoted(y))),{allCells:y,minImgSquarePercentage:G}}extractOccurrences(){let{allCells:y,minImgSquarePercentage:G}=this.allCellsAndMinImgSpace();if(y.length)for(let Z of y)if(!Z.hasAttribute(W.ATTRIBUTE_BIS_ID)&&!Z.hasAttribute(W.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(Z,G)){let y=g.GenerateAndSetBisIdToRedditAds(Z);if(this.isShadowRootExist(Z)){const G=this.deepClone(Z);let Q=this.buildBannerHtml(G),W=this.lookingTargetUrl(Q),g=this.getAdRedditObject(Z,Q,W,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),G.remove(),setTimeout(this.ExtractAd.bind(this,y,g),100)}else{this.setSizesAndIdForAllElements(Z);const G=Z.cloneNode(!0);let Q=this.buildBannerHtml(G),W=this.lookingTargetUrl(Q),g=this.getAdRedditObject(Z,Q,W,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(Z)&&(this.HideElement(Z),this.AdBlockerAgent.SetHiddenAmount(1)),G.remove(),setTimeout(this.ExtractAd.bind(this,y,g),100)}}}isShadowRootExist(y){if(y.shadowRoot)return!0;return Array.from(y.querySelectorAll("*")).some((y=>y.shadowRoot))}deepClone(y){let G=1;const Z=(y,Q)=>{const W=(y,G)=>{for(;y;)Z(y,G),y=y.nextSibling};if(y){const Z=y.cloneNode(!1);"SLOT"===y.nodeName&&(y.setAttribute("data-assigning-slot-id",G),Z.setAttribute("data-assigning-slot-id",G)),y.assignedSlot&&y instanceof Element&&y.assignedSlot.hasAttribute("data-assigning-slot-id")&&Z.setAttribute("data-assigned-to",y.assignedSlot.getAttribute("data-assigning-slot-id")),G+=1,Q.appendChild(Z),y.shadowRoot&&(this.setSizesAndIdForAllElements(y.shadowRoot),y.shadowRoot&&y.shadowRoot.firstChild.setAttribute&&g.SetFullSizeToElement(y.shadowRoot.firstChild),W(y.shadowRoot.firstChild,Z)),this.setSizesAndIdForAllElements(y),y&&y.setAttribute&&g.SetFullSizeToElement(y),W(y.firstChild,Z)}},Q=document.createElement("div");return Z(y,Q),this.replaceElementsToRightSlots(Q.firstElementChild),Q.firstElementChild}buildBannerHtml(y){let G=this.rightColumnContainer;this.setWrapperClass(G);let Z=this.headCopyWithStyles;const Q=document.createElement("html"),W=this.bodyCopyWithStyles,g=document.createElement("div"),z=G.cloneNode();return g.appendChild(z),this.setWrapperStyles(G,g),Z.appendChild(this.getClassNameForStyles(y)),Q.appendChild(Z),z.appendChild(y),W.appendChild(g),Q.appendChild(W),Q}setWrapperClass(y){let G=y.parentElement,Z=!1;if(G)for(let W=0;W<50&&!Z&&G;W++)if(G.nextSibling&&-1!==G.nextSibling.nodeName.search(/style/i)&&G.previousSibling&&-1!==G.previousSibling.nodeName.search(/style/i)){var Q=G.getAttribute("class");y.className+=y.className.length?" "+Q:Q,Z=!0}else G=G.parentElement}setWrapperStyles(y,G){G.style.cssText=G.style.cssText+`max-width: ${this.maxWidthContainer(y)}`}replaceElementsToRightSlots(y){const G=y.querySelectorAll("*[data-assigned-to]"),Z=y.querySelectorAll("*[data-assigning-slot-id]");for(let y of G){const G=y.getAttribute("data-assigned-to");for(let Q of Z){if(G===Q.getAttribute("data-assigning-slot-id")){Q.appendChild(y);break}}}}isPromoted(y){if(y){let G=y,Z=Array.from(G.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR));if(Z.length)return Z.some((y=>{let G=y.textContent.trim().toLowerCase();return G?this.redditConfig.PROMOTED_ALIASES.some((y=>G.indexOf(y)>=0)):y.dataset.beforeContent?(G=y.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((y=>G.indexOf(y)>=0))):void 0}))}return!1}IsPostContentRendered(y,G){let Z=!1;if(y){let Q=y.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(0===Q?.length){let Q=g.GetFullElementSize(y);if(Q.w>0&&Q.h>0){g.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,y,Q).some((y=>y>=G))&&(Z=!0)}}y.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(Z=!0)}return Z}lookingTargetUrl(y){let G="";let Z=Array.from(y.querySelectorAll('a[target="_blank"]')).filter((y=>!(!y||!y.href||y.href.includes("reddit.com/user/"))));return Z.length&&(G=Z[0].href),G}get headCopyWithStyles(){const y=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((G=>{const Z=G.KEY,Q=G.ALL_STYLES_FROM,W=G.FEED_PAGE;for(let G of Array.from(y.children))if(-1!==G.nodeName.search(/^(style|link)$/gi)){if(G.innerHTML=G.innerHTML.replace(/}.[^}]*{visibility:hidden}/,"}"),G.dataset[Z]){let y=Q.some((y=>G.dataset[Z].includes(y)));y||this.isCommentPage||(y=W.some((y=>G.dataset[Z].includes(y)))),y||G.remove()}}else G.remove()})),this.neccesaryStyleRules){const G=document.createElement("style");G.innerHTML=this.neccesaryStyleRules,y.appendChild(G)}return this.getStylesByTagName(y),y}get neccesaryStyleRules(){let y=null;const G=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((y=>{const G=new RegExp(y,"gi"),Z=document.querySelector("head").outerHTML.match(G);let Q;return Z&&Z.length&&(Q=Z.join("")),Q})).filter((y=>y));return G&&G.length&&(y=G.join("")),y}getClassNameForStyles(y){let G=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((Z=>{const Q=y.querySelector(Z.CLASS_NAME_CHILD);let W=Q&&Q.parentElement?Q.parentElement:null,g="";for(let y=1;y<Z.DEEP_LEVEL;y++)W&&(W=W.parentElement);W&&(g=W.classList[0],G.innerHTML+="."+g+Z.STYLES)})),G}getStylesByTagName(y){let G=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((G=>{const Z=new RegExp(G.ATTRIBUTE_REGEX_VALUE);return Array.from(y.querySelectorAll(G.TAG_NAME)).filter((y=>{if(y&&y[G.ATTRIBUTE_NAME]&&-1!==y[G.ATTRIBUTE_NAME].search(Z))return y;y.remove()}))})).filter((y=>y)).forEach((y=>{G=G.concat(y)})),G.forEach((G=>{y.appendChild(G)}))}get bodyCopyWithStyles(){const y=document.createElement("body"),G=document.querySelector("body style")?.cloneNode(!0);return G&&y.appendChild(G),y}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}get getRightColumnContainer(){const y=this.redditConfig.RIGHT_COLUMN.QUERIES;let G=null;for(let Z of y){let y=Array.from(document.querySelectorAll(Z));if(!y.length)continue;let Q=y.filter((y=>y.children.length>2));if(Q&&Q.length){G=Q[0];break}}return G}}},9105:(y,G,Z)=>{const Q=Z(2880);Z(1568);y.exports=class{constructor(y){this.id=y}setAttributes(y){const G=Q.getURL("../executors/reddit.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}InjectDetector(){if(document.head){var y=document.createElement("script"),G=function(){document.head.appendChild(y),window.removeEventListener("DOMContentLoaded",G)};this.setAttributes(y),window.addEventListener("DOMContentLoaded",G)}}}},5849:(y,G,Z)=>{const Q=Z(9346),W=Z(1568),g=Z(8384),z=Z(5364),c=Z(1687),A=Z(8838),p=Z(2880),K=Z(9358);y.exports=class extends Q{constructor(y,G,Z){super(y),this.id=y,this.VideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=Z,this.tiktokConfig=G.TiktokConfig,this.tiktokDetectorFeed=null,this.ActivateTrafficDetector()}onPageUrlChanged(){this.available&&setTimeout((()=>{this.DeactivateDetectors(W.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.tiktokDetectorFeed.ActivateDetector()}DeactivateDetectors(y){this.tiktokDetectorFeed.DeactivateDetector(y)}ActivateDetector(y){y===W.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.tiktokDetectorFeed=new c(this.id,this.tiktokConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.tiktokConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.tiktokDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.tiktokDetectorFeed.getTiktokAdObject=this.getTiktokAdObject.bind(this),this.tiktokDetectorFeed.ExtractAd=this.processAndSendTiktokAd.bind(this),this.tiktokDetectorFeed.removePostCopy=this.removePostCopy.bind(this),this.tiktokDetectorFeed.HideElement=this.HideElement.bind(this)}ActivateTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new A(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_t",JSON.stringify(this.tiktokConfig)))}processAndSendTiktokAd(y,G,Z=document){let Q=Z.querySelector(`[${W.ATTRIBUTE_BIS_ID}=${y}]`);Q&&(z.SendAdCandidates(this.id,[G],W.MESSAGE_TYPE_TIKTOK_FEED_DATA,null),g.j&&g.v&&(Q.children[0].children[0].style.cssText+=W.STYLES_OUTLINE_VIDEO_AD))}getTiktokAdObject(y,G,Z,Q){const W=p.SetFullSizeToElement(y);return{content:K.encode(G.outerHTML),size:W,adPlacementType:Q,videoId:Z}}removePostCopy(y){y.remove()}}},1687:(y,G,Z)=>{const Q=Z(2880),W=Z(1568),g=Z(655);y.exports=class extends g{constructor(y,G,Z,Q){super(y,G,Z),this.tiktokConfig=Q,this.id=y,this.adBlockerAgent=Z,this.feedContainer=null,this.feedObserver=null}HideElement(y){}setSizesAndIdForAllElements(y){}getTiktokAdObject(y,G,Z,Q){}removePostCopy(y){}ActualizeDetector(){return this.feedContainer=this.#m(),!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.#I()}CheckIfAdRendered(y){for(let G of this.tiktokConfig.FEED.PREVIEW_QUERIES){const Z=y.querySelector(G);if(Z?.src)return new RegExp(/^https:\/\//).test(Z.src)}return!1}#m(){const y=this.tiktokConfig.FEED.CONTAINER_QUERIES,G=this.tiktokConfig.FEED.CONTAINER_MIN_HEIGHT;for(let Z of y){let y=document.querySelector(Z);if(y){if(y.offsetHeight>=G)return y}}}#I(){let y=this.#U();if(y?.length)for(let G of y)if(this.CheckIfAdRendered(G)&&!G.hasAttribute(W.ATTRIBUTE_BIS_ID)){this.setSizesAndIdForAllElements(G);const y=Q.GenerateAndSetBisIdToInstagramAds(G),Z=this.#M(G),g=this.#h(G),z=this.getTiktokAdObject(G,Z,g,W.TIKTOK_AD_PLACEMENT_TYPE_FEED);this.removePostCopy(Z);let c=setTimeout((()=>{this.ExtractAd.call(this,y,z),clearTimeout(c)}),100)}}#U(){if(!this.feedContainer)return[];let y=Array.from(this.feedContainer.children),G=[];for(let Z of y){if(this.tiktokConfig.FEED.PROMOTED_QUERIES.find((y=>Z.querySelector(y)))){G.push(Z);break}}return G}#M(y){const G=this.feedContainer.cloneNode(),Z=document.createElement("html"),Q=this.#n(),W=this.#V(),g=y.cloneNode(!0);return G.appendChild(g),Q.appendChild(G),Z.appendChild(W),Z.appendChild(Q),Z}#n(){const y=document.createElement("body"),G=document.querySelectorAll('body style, body link[rel="stylesheet"]');return G&&G.forEach((G=>{const Z=G.cloneNode(!0);y.appendChild(Z)})),y}#V(){const y=document.createElement("head"),G=document.querySelectorAll("style"),Z=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head');return G&&G.forEach((G=>{let Z="";for(let y of G.sheet.cssRules)Z+=y.cssText;const Q=G.cloneNode(!0);Q.innerHTML=Z,y.appendChild(Q)})),Z&&Z.forEach((G=>{let Z=G.cloneNode(!0);y.appendChild(Z)})),y}#h(y){const G=this.tiktokConfig.FEED.VIDEO_CONTAINER_QUERIES.find((G=>y.querySelector(G))),Z=y.querySelector(G);if(Z){const y=new RegExp(/\d{5,}/).exec(Z.id);return y?y[0]:null}return null}}},8838:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y,G){this.id=y,this.AdBlockerAgent=G}InjectDetector(y){if(document.head){let y=document.createElement("script");this.setAttributes(y),document.head.appendChild(y)}}setAttributes(y){const G=Q.getURL("../executors/tiktok.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G,this.AdBlockerAgent.IsEnabledForTiktok()&&y.setAttribute("adblock_use","")}}},9203:(y,G,Z)=>{const Q=Z(1568),W=Z(4736);y.exports=class{constructor(y,G,Z,Q){this.id=y,this.videoTrafficDetector=null,this.ioManager=Z,this.adBlockerAgent=Q,this.config=G.twitchConfig,this.videoTrafficDetector=new W(this.id,this.config,this.ioManager),this.videoTrafficDetector.InjectDetector()}ActivateDetector(y){y===Q.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0)}}},4736:(y,G,Z)=>{const Q=Z(2880),W=Z(9358),g=Z(855);y.exports=class extends g{constructor(y,G,Z){super(y,G,Z,!0),this.id=y,this.IOManager.onGotTwitchVideoInstreamDataCallback=this.processTwitchInstreamData.bind(this),this.signature=null,this.token=null,this.config=G}InjectDetector(){if(document.head){let y=document.createElement("script");this.setAttributes(y),document.head.appendChild(y)}}setAttributes(y){const G=Q.getURL("../executors/twitch.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}processTwitchInstreamData(y){this.findAndSaveSignatureAndToken(y.content);const G=this.parsePostBodyData(y);let Z=this.buildInstreamAdURL(G);const Q=this.prepareObjectToSend(Z);this.sendCandidateToBackground(Q)}findAndSaveSignatureAndToken(y){y?.includes("streamPlaybackAccessToken")&&(this.signature=y.match(/signature":(| )["'](?<sig>.[^"]*)",/)?.groups?.sig,this.token=encodeURIComponent(y.match(/value":(| )["'](?<token>.*)/).groups.token.replace(/","signature":.*/,"").replace(/\\/g,"")))}parsePostBodyData(y){if(!new RegExp("video-edge.*.ts$").test(y.url)&&"application/x-www-form-urlencoded; charset=utf-8"!==y.type)return;if(!y.encodedPostBody||0!==y.encodedPostBody.search(/^data=/))return;let G=W.decode(y.encodedPostBody.replace(/data=/,""),!1);return JSON.parse(G)}buildInstreamAdURL(y){if(!this.signature)return;const G={};if(G.channel=document.location.pathname.match(/\//g)?.length>1?"":document.location.pathname.replace(/\//g,""),!G.channel)return;G.browserFamily=Q.IsChrome()?"chrome":"firefox",G.browserVersion=navigator.userAgent.match(new RegExp("(chrome|firefox)/(?<browserVersion>\\d{3}.\\d)","i")).groups.browserVersion;const{osName:Z,osVersion:W}=navigator.userAgent.match(/\((?<osName>.[^ ]*)\s(?<osVersion>.[^;]*);\)?/)?.groups;G.osName=Z,G.osVersion=W,G.signature=this.signature,G.token=this.token,G.p=Math.floor(1e7*Math.random())+1;for(let Z of y)if(Z?.properties.hasOwnProperty("play_session_id")){G.playSessionId=Z.properties.play_session_id;break}return G.playSessionId?this.replaceMacrosesInUrl(G):void 0}getMacrosArray(){return this.config.URL_PATTERN_TO_GET_HLS.match(/\$\{(.[^}]*)}/g).map((y=>y.replace(/[${}]/g,"")))}replaceMacrosesInUrl(y){let G=this.config.URL_PATTERN_TO_GET_HLS;for(let[Z,Q]of Object.entries(y))G=G.replace(`\${${Z}}`,Q);return G}prepareObjectToSend(y){return{requestMethod:"GET",urlToGetInstreamData:y,url:"",contentType:"",mediaType:"",alias:"TWITCH_HLS"}}sendCandidateToBackground(y){this.IOManager.SendTwitchInstreamData(this.id,y)}}},4919:(y,G,Z)=>{const Q=Z(8384),W=Z(2880),g=Z(1568),z=Z(9346),c=Z(5364),A=Z(1402),p=Z(9473);Z(5473);y.exports=class extends z{constructor(y,G,Z){super(y),this.id=y,this.onPageRefreshed=this.onPageUrlChanged,this.twConfig=G.TwitterConfig,this.TwitterDetectorFeed=null,this.TwitterDetectorRightColumn=null,this.VideoTrafficDetector=null,this.AdBlockerAgent=Z,this.ActivateVideoTrafficDetector()}onPageUrlChanged(y,G){this.available&&setTimeout((()=>{this.DeactivateDetectors(g.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new A(this.id),this.VideoTrafficDetector.InjectDetector())}ActivateDetector(y){y===g.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.TwitterDetectorFeed=new p(this.id,this.twConfig.FEED.DETECTOR_OPTIONS,this.twConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}ActivateDetectors(){this.TwitterDetectorFeed.ActivateDetector()}AddNecessaryMethods(){this.TwitterDetectorFeed.ExtractAd=this.processAndSendTwitterAd.bind(this),this.TwitterDetectorFeed.isVideo=this.isVideo.bind(this),this.TwitterDetectorFeed.HideElement=this.HideElement.bind(this),this.TwitterDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.TwitterDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.TwitterDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.TwitterDetectorFeed.getAdTwitterObject=this.getAdTwitterObject.bind(this)}DeactivateDetectors(y){this.TwitterDetectorFeed.DeactivateDetector(y)}IsAdContentRendered(y,G){let Z=!1;if(y){let Q=y.querySelectorAll(this.twConfig.PROGRESS_SELECTOR);if(Q&&0===Q.length){let Q=W.GetFullElementSize(y);if(Q.w>0){W.GetImagesSpacePercentage(this.twConfig.TAGS_FOR_LOADING_CHECK,y,Q).some((y=>y>=G))&&(Z=!0)}}}return Z}processAndSendTwitterAd(y,G,Z=!1,W=document){let z=W.querySelector(`[${g.ATTRIBUTE_BIS_ID}=${y}]`);z&&(c.SendCandidatePlacementsCount(this.id,1,g.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER,null),c.SendAdCandidates(this.id,[G],g.MESSAGE_TYPE_CANDIDATES_DATA_TWITTER,null),Q.j&&Q.v&&(z.style.cssText+=Z?g.STYLES_OUTLINE_VIDEO_AD:g.STYLES_OUTLINE_SUCCESS_DETECT))}}},9473:(y,G,Z)=>{const Q=Z(2880),W=Z(1568),g=Z(655);y.exports=class extends g{constructor(y,G,Z,W){super(y,G,W),this.available=!1,this.twConfig=Z,this.AdBlockerAgent=W,this.feedObserver=null,this.activated=!1,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.lastFeedPostAdsCheckTime=Q.GetCurrentTimestampMs(),this.lastFeedWhoToFollowAdsCheckTime=Q.GetCurrentTimestampMs(),this.feedContainer=null}isVideo(y,G){}HideElement(){}IsAdContentRendered(y,G){}doesElementExists(y){}setSizesAndIdForAllElements(y){}getAdTwitterObject(y,G,Z){}ActualizeDetector(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}get getFeedContainer(){const y=this.twConfig.FEED.CONTAINER;let G=Array.from(document.querySelectorAll(y)).filter((y=>y&&y.children.length>2));return G&&G.length?G[0]:null}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.startIntervalDetectCandidates.bind(this,W.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processAdsFromFeed()}processAdsFromFeed(){this.processFeedAds(),this.processFeedWhoToFollowAds()}processFeedAds(){this.extractOccurrences(W.TWITTER_AD_PLACEMENT_TYPE_FEED)}processFeedWhoToFollowAds(){this.extractOccurrences(W.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW)}allCellsAndMinImgSpace(y){let G=[],Z=0;return y===W.TWITTER_AD_PLACEMENT_TYPE_FEED?(this.feedContainer&&(G=Array.from(this.feedContainer.children)),Z=this.twConfig.FEED.MIN_IMGS_SPACE_PERCENTAGE):y===W.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW&&(G=Array.from(document.querySelectorAll(this.twConfig.FEED.WHO_TO_FOLLOW_SELECTOR)),Z=this.twConfig.FEED.WHO_TO_FOLLOW_MIN_IMGS_SPACE_PERCENTAGE),G=G.filter((y=>this.isPromoted(y))),{allCells:G,minImgSquarePercentage:Z}}extractOccurrences(y){let{allCells:G,minImgSquarePercentage:Z}=this.allCellsAndMinImgSpace(y);if(G.length)for(const g of G)if(!g.hasAttribute(W.ATTRIBUTE_BIS_ID)&&!g.hasAttribute(W.ATTRIBUTE_BIS_SIZE)&&this.IsAdContentRendered(g,Z)){let G,Z=Q.GenerateAndSetBisIdToTwitterAds(g);this.setSizesAndIdForAllElements(g);let z=this.isVideo(g,this.twConfig.FEED.TAGS_FOR_VIDEO_TWEET_CHECK);const c=g.cloneNode(!0);let A=this.buildBannerHtml(c,y),p=this.chooseContent(g,A);G=this.getAdTwitterObject(p,g,y,this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT),y===W.TWITTER_AD_PLACEMENT_TYPE_FEED&&(z&&!this.isCarouselCandidate(g)?G.videoData={}:!z&&this.isCarouselCandidate(g)&&this.twConfig.COLLECT_CAROUSEL_DATA&&(G.carouselData={})),this.AdBlockerAgent.IsEnabledForTwitter()&&!this.AdBlockerAgent.IsElementHidden(g)&&(this.HideElement(g),this.AdBlockerAgent.SetHiddenAmount(1)),setTimeout(this.ExtractAd.bind(this,Z,G,z),100)}}chooseContent(y,G){return this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT?G:y.querySelector(this.twConfig.FEED.TWEETS_SELECTOR)?y.querySelector(this.twConfig.FEED.TWEETS_SELECTOR):y}buildBannerHtml(y,G){let Z=this.feedContainer;this.setWrapperClass(Z),y.style.transform="none",y.style.position="relative";let Q=this.headCopyWithStyles;const W=document.createElement("html"),g=this.bodyCopyWithStyles,z=document.createElement("div"),c=Z.cloneNode();return c.style.minHeight="auto",z.appendChild(c),this.setWrapperStyles(Z,z),W.appendChild(Q),c.appendChild(y),g.appendChild(z),W.appendChild(g),W}setWrapperClass(y){let G=y.parentElement,Z=!1;if(G)for(let Q=0;Q<50&&!Z&&G;Q++)if(G.nextSibling&&-1!==G.nextSibling.nodeName.search(/style/i)&&G.previousSibling&&-1!==G.previousSibling.nodeName.search(/style/i)){let Q=G.getAttribute("class");y.className+=y.className.length?" "+Q:Q,Z=!0}else G=G.parentElement}setWrapperStyles(y,G){G.style.cssText=G.style.cssText+`max-width: ${this.maxWidthContainer(y)}`}maxWidthContainer(y){return y?y.offsetWidth+"px":"auto"}get bodyCopyWithStyles(){const y=document.createElement("body"),G=Array.from(document.querySelectorAll("body style")).map((y=>{if(y)return y.cloneNode(!0)}));return G&&G.forEach((G=>{y.appendChild(G)})),y}get headCopyWithStyles(){const y=document.createElement("head"),G=Array.from(document.querySelectorAll("head style, head meta")).map((y=>{if(y)return y.cloneNode(!0)}));return G&&G.forEach((G=>{y.appendChild(G)})),y}isPromoted(y){if(y){let G=Array.from(y.querySelectorAll(this.twConfig.PROMOTED_SELECTOR));if(G.length)return G.some((y=>{let G=y.textContent;return!(!G||"string"!=typeof G)&&this.twConfig.PROMOTED_ALIASES.some((y=>{let Z=G.toLowerCase().trim().split(" ");return Z.length<6&&Z.includes(y.toLowerCase().trim())}))}))}return!1}isCarouselCandidate(y){if(y){if(y.querySelector(this.twConfig.FEED.CHECK_IF_CAROUSEL_QUERY))return!0}return!1}}},5473:()=>{},1402:(y,G,Z)=>{const Q=Z(2880);y.exports=class{constructor(y){this.id=y}InjectDetector(){if(document.head){let y=document.createElement("script"),G=function(){document.head.appendChild(y),window.removeEventListener("DOMContentLoaded",G)};this.setAttributes(y),window.addEventListener("DOMContentLoaded",G)}}setAttributes(y){const G=Q.getURL("../executors/twitter.js");y.setAttribute("bis_use","true"),y.type="text/javascript",y.setAttribute("charset","utf-8"),y.setAttribute("nonce",""),y.src=G}}},2880:(y,G,Z)=>{const Q=Z(1568);class W{static QuerySelectorAll(y,G){return document.__proto__.querySelectorAll.call(y,G)}static QuerySelector(y,G){return document.__proto__.querySelector.call(y,G)}static Escape(y){return y.replace(/\"/g,"&quot;")}static ToJSON(y){return"function"==typeof y.toJSON?y.toJSON():JSON.stringify(y)}static GetBaseHref(){let y=W.QuerySelector(document,"base");return y&&y.href?y.href:""}static GetTabIdKey(y){return"tb_"+y}static GetMainPageId(y){return"mp_"+y}static IsOnChromeRuntime(){let y=!0;if(chrome){if(chrome.runtime){try{chrome.runtime.getManifest()}catch(G){y=!1}if(y)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(chrome.app)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(self.navigator.userAgent.toLowerCase().includes("firefox"))return!!chrome.runtime;return!1}static GetElementSize(y){let G={x:0,y:0,w:0,h:0};if(y&&y.getBoundingClientRect){let Z=y.getBoundingClientRect();G={x:~~(Z.left+window.scrollX),y:~~(Z.top+window.scrollY),w:~~Z.width,h:~~Z.height}}return G}static IsCoordinatesValid(y){return!!(y&&y.hasOwnProperty("x")&&"number"==typeof y.x&&y.hasOwnProperty("y")&&"number"==typeof y.y)}static GetFullElementSize(y,G,Z){let Q=W.GetElementSize(y);return W.IsCoordinatesValid(Z)&&(Q.x=Q.x+Z.x,Q.y=Q.y+Z.y),W.IsCoordinatesValid(G)?(Q.abs_x=Q.x+G.x,Q.abs_y=Q.y+G.y):(Q.abs_x=Q.x,Q.abs_y=Q.y),Q}static SetFullSizeToElement(y,G,Z){let Q={x:0,y:0,w:0,h:0};return W.IsCoordinatesValid(Z)&&(Q.x=Q.x+Z.x,Q.y=Q.y+Z.y),y&&y.setAttribute&&(Q=W.GetFullElementSize(y,G,Z),y.setAttribute("bis_size",W.ToJSON(Q))),Q}static GenerateAndSetBisId(y,G){let Z=G+W.GenerateQuickId();return y&&y.setAttribute&&y.setAttribute(Q.ATTRIBUTE_BIS_ID,Z),Z}static GenerateAndSetBisIdToFrame(y){return W.GenerateAndSetBisId(y,"fr_")}static GenerateAndSetBisIdToBanner(y){return W.GenerateAndSetBisId(y,"bn_")}static GenerateAndSetBisIdToPinterestAds(y){return W.GenerateAndSetBisId(y,"pt_")}static GenerateAndSetBisIdToInstagramAds(y){return W.GenerateAndSetBisId(y,"ig_")}static GenerateAndSetBisIdToLinkedinAds(y){return W.GenerateAndSetBisId(y,"ln_")}static GenerateAndSetBisIdToFBAds(y){return W.GenerateAndSetBisId(y,"fb_")}static GenerateAndSetBisIdToTwitterAds(y){return W.GenerateAndSetBisId(y,"tw_")}static GenerateAndSetBisIdToRedditAds(y){return W.GenerateAndSetBisId(y,"rd_")}static SetBisDepth(y,G){y&&y.setAttribute&&y.setAttribute("bis_depth",G)}static SetBisChainId(y,G){y&&y.setAttribute&&y.setAttribute("bis_chainid",G)}static SetBannerId(y,G){y&&y.setAttribute&&y.setAttribute("bis_bannerid",G)}static UpdateCandidateStatusBorderColor(y,G){if(y&&y.style&&y.style.cssText&&G){let Z="";G.filteredOut?Z=Q.STYLES_BORDER_BANNER_FILTERED:G.sentToBackend?Z=Q.STYLES_BORDER_BANNER_SENT:G.targetUrlExtracted?Z=Q.STYLES_BORDER_BANNER_URL_EXTRACTED:G.fullContentExtracted&&(Z=Q.STYLES_BORDER_BANNER_CONTENT_EXTRACTED);let W=y.style.cssText;W.includes(Z)||(W=W.replace(/((border|outline): .{3,20} solid 6px !important;)|((border|outline): 6px solid .{3,20} !important;)/,Z),y.style.cssText=W)}}static GetMainDomainFromHost(y){if(y&&y.split){let G=y.split(".");if(G.length>=2){let y=G[G.length-2],Z=G[G.length-1];return G.length>=3&&2===Z.length&&3===y.length?`${G[G.length-3]}.${y}.${Z}`:y+"."+Z}}return null}static GetMainDomainFromUrl(y){return W.GetMainDomainFromHost(W.GetHostNameFromUrl(y))}static GetHostNameFromUrl(y){let G=y.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=G&&G.length>2&&"string"==typeof G[2]&&G[2].length>0?G[2]:null}static IsUrlFromHost(y,G){return-1!==y.indexOf(W.GetMainDomainFromUrl(G))}static IsPublisherInBlacklist(y,G){let Z=!1,Q=W.GetHostNameFromUrl(y);return G&&G.length&&Q&&G.includes(Q)&&(Z=!0),Z}static GetUrlFromStyleStr(y){let G=y.replace(/"/g,"'"),Z=G.indexOf("http");-1===Z&&(Z=G.indexOf("//"));let Q=G.indexOf("'",Z),W="";return Z>0&&Q>0&&Z<Q&&(W=G.substr(Z,Q-Z)),W}static GetCurrentDataTimeStr(){function y(y){return y<10?"0"+y:""+y}let G=new Date;return`${G.getFullYear()}-${y(G.getMonth()+1)}-${y(G.getDate())} ${y(G.getHours())}:${y(G.getMinutes())}:${y(G.getSeconds())}`}static GetCurrentDataTimeStrWithGMT(){function y(y){return y<10?"0"+y:""+y}let G=new Date;return`${G.getFullYear()}-${y(G.getMonth()+1)}-${y(G.getDate())} ${y(G.getHours())}:${y(G.getMinutes())}:${y(G.getSeconds())} ${G.toTimeString().match(/GMT.\S*/)[0]}`}static GetWindowSize(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}static IsIframeHasContentScript(y){try{if(y&&!W.IsIframeSecure(y)&&"ok"!==y.contentDocument.body.getAttribute("bis_status"))return!1}catch(y){}return!0}static IsIframeSecure(y){return!y||0!==y.src.length&&"about:blank"!==y.src&&"about:srcdoc"!==y.src&&0!==y.src.indexOf("javascript:")}static isValidUrl(y){return"string"==typeof y&&y.length>0&&(-1!==y.indexOf("http")||-1!==y.indexOf("//"))}static IsValidBisId(y){return!!(y.startsWith("mp_")||y.startsWith("bg_")||y.startsWith("fr_"))}static IsYouTubeUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.indexOf("youtube.com")}static IsFacebookUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.indexOf("facebook.com")}static IsTwitterUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.search(/twitter|x\.com/)}static IsRedditUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.indexOf("reddit.com")}static IsPinterestUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.search(/pinterest\.(com|ca|at|ch|cl|co\.kr|com\.au|com\.mx|co\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/)}static IsInstagramUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.indexOf("instagram.com")}static IsLinkedinUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.indexOf("linkedin.com")}static IsTiktokUrl(y){return!!~W.GetHostNameFromUrl(y).indexOf("tiktok.com")}static IsTwitchUrl(y){let G=W.GetHostNameFromUrl(y);return!!G&&-1!==G.indexOf("twitch.tv")}static isClaudeUrl(y,G){const Z=G?.B?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isChatgptUrl(y,G){const Z=G?.u?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isDeepseekUrl(y,G){const Z=G?.R?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isCopilotUrl(y,G){const Z=G?.k?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isPerplexityUrl(y,G){const Z=G?.S?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isMetaUrl(y,G){const Z=G?.D?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isGeminiUrl(y,G){const Z=G?.T?.URL_PATTERN,Q=W.GetHostNameFromUrl(y);return!!Z&&W.getRegExpFromString(Z).test(Q)}static isAI(y,G){return[W.isClaudeUrl,W.isChatgptUrl,W.isCopilotUrl,W.isDeepseekUrl,W.isPerplexityUrl,W.isMetaUrl,W.isGeminiUrl].some((Z=>Z(y,G)))}static GetFullIdStr(y,G,Z){return`ext:${chrome.runtime.id}-chainId:${y}-frameId:${G}-bisId:${Z}`}static GetRandomIntInRange(y,G){return parseInt((Math.random()*(G-y)+y).toFixed(0))}static GetCurrentTimestamp(){return Date.now()/1e3|0}static GetCurrentTimestampMs(){return Date.now()}static GenerateQuickId(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}static GenerateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(y){let G=16*Math.random()|0;return("x"==y?G:3&G|8).toString(16)}))}static IsInFilterList(y,G){let Z=!1;if(y)for(let Q=0;Q<y.length&&!Z;Q++)-1!==G.indexOf(y[Q])&&(Z=!0);return Z}static IsChrome(){return-1!==navigator.userAgent.indexOf("Chrome")}static IsFirefox(){return-1!==navigator.userAgent.indexOf("Firefox")}static IsFBVideoDataValid(y){let G=!1;if(y)try{"number"==typeof y.detectionTime&&"string"==typeof y.videoId&&"string"==typeof y.videoUrl&&y.videoId.length&&y.videoUrl.length&&(G=!0)}catch(y){}return G}static GetDefaultAdblockerStatus(){return{[Q.ADBLOCKER_FOR_DISPLAY]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_FACEBOOK]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_TWITTER]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_REDDIT]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_PINTEREST]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_INSTAGRAM]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_TIKTOK]:Q.ADBLOCKER_STATUS_DISABLED,[Q.ADBLOCKER_FOR_LINKEDIN]:Q.ADBLOCKER_STATUS_DISABLED,[Q.USE_LOCAL_CONFIG]:Q.ADBLOCKER_STATUS_DISABLED}}static GetImagesSpacePercentage(y,G,Z){let Q=[];if(!G)return Q;const g=Z.w*Z.h;let z=[],c=Array.from(G.querySelectorAll("*")).map((G=>G.shadowRoot?G.shadowRoot.querySelectorAll(y):"IMG"===G.nodeName||"IFRAME"===G.nodeName?G:G.querySelectorAll(y))).filter((y=>y)).reduce(((y,G)=>(G&&G.length&&G.forEach((G=>{y.includes(G)||y.push(G)})),"IMG"!==G.nodeName&&"IFRAME"!==G.nodeName||y.push(G),y)),[]);if(!c?.length||0===g)return Q;for(let G of c){let Z=G;Z&&Z.shadowRoot&&(Z=Z.shadowRoot.firstElementChild.querySelector(y));let Q=W.GetElementSize(Z);z.push(Q.w*Q.h/g*100)}return z}static CheckDocumentReadyState(y){return document.readyState===y}static getURL(y){return chrome.runtime.getURL(y)}static getDataFromStorageLocal(y){return chrome.storage.local.get([y]).then((G=>G[y]?G[y]:G))}static getDataFromStorageSync(y){return new Promise(((G,Z)=>{try{chrome.storage.sync.get([y]).then((Z=>{Z[y]?G(Z[y]):G(Z)}))}catch(y){Z(y)}}))}static GetCookie(y){let G=y+"=",Z=decodeURIComponent(document.cookie).split(";");for(let y=0;y<Z.length;y++){let Q=Z[y];for(;" "==Q.charAt(0);)Q=Q.substring(1);if(0==Q.indexOf(G))return Q.substring(G.length,Q.length)}return""}static GetOriginFromHref(y){y&&y.search(/^http/)}static GetLocaleDateString(){try{return(new Date).toJSON().replace("T",", ")}catch(y){return(new Date).toTimeString()}}static GetAllCookies(){return document.cookie}static async waitForElement(y,G=1e4){return new Promise(((Z,Q)=>{const W=document.querySelector(y);if(W)return Z(W);const g=new MutationObserver((()=>{const G=document.querySelector(y);G&&(g.disconnect(),Z(G))}));g.observe(document.body,{childList:!0,subtree:!0}),G&&setTimeout((()=>{g.disconnect(),Q(new Error(`Element ${y} not found within timeout`))}),G)}))}static getRegExpFromString(y){let G=y.replace(/.*\/([gimy]*)$/,"$1"),Z=y.replace(new RegExp("^/(.*?)/"+G+"$"),"$1");return new RegExp(Z,G)}}y.exports=W},1568:(y,G,Z)=>{const Q=Z(9358);y.exports=class{static get DOCUMENT_READYSTATE_LOADING(){return"loading"}static get DOCUMENT_READYSTATE_INTERACTIVE(){return"interactive"}static get DOCUMENT_READYSTATE_COMPLETE(){return"complete"}static get ATTRIBUTE_BIS_ID(){return"bis_id"}static get ATTRIBUTE_BIS_SIZE(){return"bis_size"}static get ATTRIBUTE_BIS_STYLE(){return"bis_style"}static get ATTRIBUTE_BIS_STATUS(){return"bis_status"}static get ATTRIBUTE_BIS_LABEL(){return"bis_label"}static get ATTRIBUTE_BIS_ELEMENT_ID(){return"bis_element_id"}static get ATTRIBUTE_BIS_HIDE_HEIGHT(){return"bis_hide_height"}static get ATTRIBUTE_BIS_HIDE_WIDTH(){return"bis_hide_width"}static get ATTRIBUTE_BIS_HIDE_STATUS(){return"bis_hide_status"}static get ATTRIBUTE_BIS_HIDE_LEFT_OFFSET(){return"bis_hide_left_offset"}static get ATTRIBUTE_BIS_PRECISE_AD(){return"bis_precise_ad"}static get ACTIVATION_BY_ADS_MANAGER(){return"ACTIVATION_BY_ADS_MANAGER"}static get ACTIVATION_BY_ADS_SELF(){return"ACTIVATION_BY_ADS_SELF"}static get MESSAGE_ID(){return"PANELOS_MESSAGE"}static get MESSAGE_TYPE_TEST(){return"TEST"}static get MESSAGE_TYPE_IFRAME_CONTENT(){return"IFRAME_CONTENT"}static get MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME"}static get MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE"}static get MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT(){return"IFRAME_INVALID_CHAIN_SEGMENT_CONTENT"}static get MESSAGE_TYPE_TAB_INITIALIZATION(){return"TAB_INITIALIZATION"}static get MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION(){return"TAB_SINGLE_PAGE_REINITIALIZATION"}static get MESSAGE_TYPE_TAB_URL_CHANGED(){return"TAB_URL_CHANGED"}static get MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED(){return"TAB_ADBLOCKER_STATUS_CHANGED"}static get MESSAGE_TYPE_IFRAME_INITIALIZATION(){return"IFRAME_INITIALIZATION"}static get MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE(){return"IFRAME_INITIALIZATION_RESPONSE"}static get MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS(){return"IFRAME_CONTENT_INFO_DETECTED_INPUTS"}static get MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS(){return"IFRAME_CONTENT_INFO_DETECTED_REDIRECTS"}static get MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT(){return"HIDDEN_AD_CANDIDATES_AMOUNT"}static get MESSAGE_TYPE_GET_WINDOW_TARGET_URL(){return"GET_WINDOW_TARGET_URL"}static get MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND(){return"GET_WINDOW_TARGET_URL_RESPOND"}static get MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL(){return"GET_WINDOW_CLICK_TARGET_URL"}static get MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND(){return"GET_WINDOW_CLICK_TARGET_URL_RESPOND"}static get MESSAGE_TYPE_GET_FRAME_CONTENT(){return"GET_FRAME_CONTENT"}static get MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK(){return"TARGET_URL_DETECTION_BY_CLICK"}static get MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET(){return"NEW_PAGE_CREATED_TICKET"}static get MESSAGE_TYPE_PANEL_REGULATOR_RESULT(){return"PANEL_REGULATOR_RESULT"}static get MESSAGE_TYPE_OUT_TICKET(){return"OUT_TICKET"}static get MESSAGE_TYPE_CHAIN_ACTIVATION(){return"CHAIN_ACTIVATION"}static get MESSAGE_TYPE_HEADER_INFO_TO_STORAGE(){return"HEADER_INFO_TO_STORAGE"}static get MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE(){return"LINKEDIN_FRAME_CONTENT_TO_STORAGE"}static get MESSAGE_TYPE_CANDIDATES_DATA_SKINADS(){return"CANDIDATES_DATA_SKINADS"}static get MESSAGE_TYPE_CANDIDATES_DATA_BANNERS(){return"CANDIDATES_DATA_BANNERS"}static get MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK(){return"CANDIDATES_DATA_FACEBOOK"}static get MESSAGE_TYPE_CANDIDATES_VIDEO_DATA_TWITCH(){return"CANDIDATES_VIDEO_DATA_TWITCH"}static get MESSAGE_TYPE_CANDIDATES_DATA_TWITTER(){return"CANDIDATES_DATA_TWITTER"}static get MESSAGE_TYPE_CANDIDATES_DATA_REDDIT(){return"CANDIDATES_DATA_REDDIT"}static get MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST(){return"CANDIDATES_DATA_PINTEREST"}static get MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM(){return"CANDIDATES_DATA_INSTAGRAM"}static get MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN(){return"CANDIDATES_DATA_LINKEDIN"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK(){return"CANDIDATE_PLACEMENTS_FACEBOOK"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER(){return"CANDIDATE_PLACEMENTS_TWITTER"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT(){return"CANDIDATE_PLACEMENTS_REDDIT"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST(){return"CANDIDATE_PLACEMENTS_PINTEREST"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5(){return"CANDIDATE_PLACEMENTS_HTML5"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM(){return"CANDIDATE_PLACEMENTS_INSTAGRAM"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN(){return"CANDIDATE_PLACEMENTS_LINKEDIN"}static get MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES(){return"HTML5_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES(){return"BANNER_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES(){return"SKIN_AD_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_VIDEO_XHR_CANDIDATE(){return"VIDEO_XHR_CANDIDATE"}static get MESSAGE_TYPE_VIDEO_HAR(){return"VIDEO_HAR"}static get MESSAGE_TYPE_FACEBOOK_VIDEO_DATA(){return"FACEBOOK_VIDEO_DATA"}static get MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA(){return"FACEBOOK_INSTREAM_DATA"}static get MESSAGE_TYPE_FACEBOOK_MARKETPLACE_VIDEO_DATA(){return"FACEBOOK_MARKETPLACE_VIDEO_DATA"}static get MESSAGE_TYPE_FACEBOOK_CANVAS_TEXT(){return"FACEBOOK_CANVAS_TEXT"}static get MESSAGE_TYPE_PINTEREST_VIDEO_DATA(){return"PINTEREST_VIDEO_DATA"}static get MESSAGE_TYPE_TWITTER_VIDEO_DATA(){return"TWITTER_VIDEO_DATA"}static get MESSAGE_TYPE_TWITTER_CAROUSEL_DATA(){return"TWITTER_CAROUSEL_DATA"}static get MESSAGE_TYPE_REDDIT_VIDEO_DATA(){return"REDDIT_VIDEO_DATA"}static get MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA(){return"REDDIT_RIGHT_COLUMN_DATA"}static get MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA(){return"INSTAGRAM_VIDEO_DATA"}static get MESSAGE_TYPE_INSTAGRAM_STORY_DATA(){return"INSTAGRAM_STORY_DATA"}static get MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA(){return"INSTAGRAM_FULL_TEXT_DATA"}static get MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES(){return"INSTAGRAM_CAROUSEL_SLIDES_SOURCES"}static get MESSAGE_TYPE_LINKEDIN_VIDEO_DATA(){return"LINKEDIN_VIDEO_DATA"}static get MESSAGE_TYPE_LINKEDIN_SLIDES_DATA(){return"LINKEDIN_SLIDES_DATA"}static get MESSAGE_TYPE_VIDEO_TWITCH_INSTREAM_DATA(){return"VIDEO_TWITCH_INSTREAM_DATA"}static get MESSAGE_TYPE_VIDEO_TWITCH_ACCESS_TOKEN_DATA(){return"VIDEO_XHR_ACCESS_TOKEN_DATA"}static get MESSAGE_TYPE_TIKTOK_FEED_DATA(){return"TIKTOK_FEED_DATA"}static get MESSAGE_TYPE_TIKTOK_VIDEO_CANDIDATES(){return"TIKTOK_VIDEO_CANDIDATES"}static get MESSAGE_TYPE_CLAUDE_DATA(){return"CLAUDE_DATA"}static get MESSAGE_TYPE_CHATGPT_DATA(){return"CHATGPT_DATA"}static get MESSAGE_TYPE_GEMINI_DATA(){return"GEMINI_DATA"}static get MESSAGE_TYPE_COPILOT_DATA(){return"COPILOT_DATA"}static get MESSAGE_TYPE_PERPLEXITY_DATA(){return"PERPLEXITY_DATA"}static get MESSAGE_TYPE_META_AI_DATA(){return"META_AI_DATA"}static get MESSAGE_TYPE_DEEPSEEK_DATA(){return"DEEPSEEK_DATA"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID(){return"GET_PANALYTICS_ID"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION(){return"GET_PANELOS_VERSION"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS(){return"GET_ADBLOCKER_STATUS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS(){return"GET_ADBLOCKER_COUNTERS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER(){return"ENABLE_ADBLOCKER"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER(){return"DISABLE_ADBLOCKER"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS(){return"GET_DATA_COLLECTION_STATUS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION(){return"ENABLE_DATA_COLLECTION"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION(){return"DISABLE_DATA_COLLECTION"}static get MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT(){return"ADBLOCK_INSPECTOR_AGENT_REPORT"}static get MESSAGE_TYPE_GET_EXCLUDE_LIST(){return"GET_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST(){return"ADD_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST(){return"REMOVE_FROM_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST(){return"ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST(){return"ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_GET_CURRENT_DOMAIN(){return"GET_CURRENT_DOMAIN"}static get MESSAGE_TYPE_GET_CURRENT_PAGE_URL(){return"GET_CURRENT_PAGE_URL"}static get MESSAGE_TYPE_USE_LOCAL_CONFIG(){return"USE_LOCAL_CONFIG"}static get MESSAGE_TYPE_GET_LOCAL_CONFIG_STATUS(){return"GET_LOCAL_CONFIG_STATUS"}static get ADBLOCKER_STATUS_ENABLED(){return"enabled"}static get ADBLOCKER_STATUS_DISABLED(){return"disabled"}static get VIDEO_TRAFFIC_SOURCE_HTML(){return"HTML"}static get VIDEO_TRAFFIC_SOURCE_JS(){return"JS"}static get VIDEO_TRAFFIC_SOURCE_XHR(){return"XHR"}static get VIDEO_TRAFFIC_MEDIA_TYPE_HTML(){return"HTML"}static get VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON(){return"JSON"}static get VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON(){return"JSON_FB"}static get VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE(){return"YT_JSON_NEXTPAGE"}static get VIDEO_TRAFFIC_ALIAS_YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE(){return"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE"}static get FACEBOOK_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH(){return"feedWatch"}static get FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE(){return"marketplace"}static get FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN(){return"rightColumn"}static get FACEBOOK_AD_PLACEMENT_TYPE_STORIES(){return"stories"}static get FACEBOOK_AD_PLACEMENT_TYPE_VIDEO_PAGE(){return"videoPage"}static get FACEBOOK_AD_VIDEO_URL_REPLACE_NAME(){return"[ADVERTISER_NAME]"}static get FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID(){return"[VIDEO_ID]"}static get TWITTER_AD_PLACEMENT_TYPE_FEED(){return"feedPost"}static get TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW(){return"feedWhoToFollow"}static get TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW(){return"rightColumnWhoToFollow"}static get REDDIT_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE(){return"commentPage"}static get REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN(){return"rightColumn"}static get LINKEDIN_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN(){return"rightColumn"}static get PINTEREST_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get PINTEREST_AD_PLACEMENT_TYPE_SEARCH(){return"searchPage"}static get PINTEREST_AD_PLACEMENT_TYPE_PIN(){return"pinPage"}static get PINTEREST_LOADER_TYPE_PIN_PAGE(){return"pinPage"}static get PINTEREST_LOADER_TYPE_USER_INFO(){return"userInfo"}static get INSTAGRAM_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get INSTAGRAM_AD_PLACEMENT_TYPE_STORY(){return"story"}static get TIKTOK_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get KNOWN_CSS_NAMES(){return["align-content","align-items","align-self","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-adjust","color-interpolation","color-interpolation-filters","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-width","contain","content","counter-increment","counter-reset","counter-set","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphens","image-orientation","image-rendering","ime-mode","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","opacity","order","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-inline","overflow-wrap","overflow-x","overflow-y","overscroll-behavior-x","overscroll-behavior-y","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","paint-order","perspective","perspective-origin","pointer-events","position","quotes","r","resize","right","row-gap","ruby-align","ruby-position","rx","ry","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","scrollbar-color","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vector-effect","vertical-align","visibility","white-space","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","-moz-appearance","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-float-edge","-moz-force-broken-image-icon","-moz-image-region","-moz-orient","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-stack-sizing","-moz-tab-size","-moz-text-size-adjust","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-window-dragging","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke-color","-webkit-text-stroke-width","offset-distance","offset-path","offset-rotate","orphans","speak","tab-size","text-underline-position","text-size-adjust","widows","zoom","-webkit-appearance","-webkit-border-horizontal-spacing","-webkit-border-image","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","column-span","backdrop-filter","-webkit-font-smoothing","-webkit-highlight","-webkit-hyphenate-character","-webkit-line-break","-webkit-locale","-webkit-margin-before-collapse","-webkit-margin-after-collapse","-webkit-mask-box-image","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-repeat","-webkit-mask-size","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-emphasis-color","-webkit-text-emphasis-position","-webkit-text-emphasis-style","-webkit-text-orientation","-webkit-text-security","-webkit-user-drag","-webkit-user-modify","-webkit-writing-mode","-webkit-app-region","buffered-rendering","color-rendering","alignment-baseline","baseline-shift","d"]}static get FACEBOOK_DESIGN_VERSION_OLD(){return 1}static get FACEBOOK_DESIGN_VERSION_NEW(){return 2}static get OUT_TICKET_TYPE_SINGLE(){return"SINGLE"}static get OUT_TICKET_TYPE_MULTI(){return"MULTI"}static get ADBLOCKER_FOR_DISPLAY(){return"DISPLAY"}static get ADBLOCKER_FOR_FACEBOOK(){return"FACEBOOK"}static get ADBLOCKER_FOR_TWITTER(){return"TWITTER"}static get ADBLOCKER_FOR_REDDIT(){return"REDDIT"}static get ADBLOCKER_FOR_PINTEREST(){return"PINTEREST"}static get ADBLOCKER_FOR_INSTAGRAM(){return"INSTAGRAM"}static get ADBLOCKER_FOR_TIKTOK(){return"TIKTOK"}static get ADBLOCKER_FOR_LINKEDIN(){return"LINKEDIN"}static get USE_LOCAL_CONFIG(){return"CONFIG"}static get AD_DETECTOR_INITIATOR_TIMER(){return"timer"}static get AD_DETECTOR_INITIATOR_MUTATION(){return"mutation"}static get AD_DETECTOR_INITIATOR_PAGECHANGE(){return"pagechange"}static get AD_DETECTOR_INITIATOR_ACTIVATION(){return"activation"}static get AD_DETECTOR_INITIATOR_URL(){return"url"}static get AD_DETECTOR_INITIATOR_SCROLL_EVENT(){return"scroll"}static get IFRAMES_CHAIN_BUILDING_STATUS_NONE(){return 0}static get IFRAMES_CHAIN_BUILDING_STATUS_INITED(){return 1}static get IFRAMES_CHAIN_BUILDING_STATUS_STARTED(){return 2}static get IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED(){return 3}static get IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED(){return 4}static get IFRAMES_CHAIN_BUILDING_STATUS_FINISHED(){return 5}static get IFRAMES_TRAFFIC_FILENAME_TO_INJECT(){return"fr-co.js"}static get CANDIDATE_PROCESS_STATUS_DETECTED(){return 1}static get CANDIDATE_PROCESS_STATUS_START_PROCESSING(){return 2}static get CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED(){return 3}static get CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT(){return 4}static get TICKET_BUILDING_STATUS_INIT(){return 0}static get TICKET_BUILDING_STATUS_STARTED(){return 1}static get TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES(){return 2}static get TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES(){return 3}static get TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE(){return 4}static get TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE(){return 5}static get TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE(){return 6}static get TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE(){return 7}static get TICKET_BUILDING_STATUS_DONE(){return 8}static get MESSAGE_TYPE_CONFIG_NOT_FOUND(){return"CONFIG_NOT_FOUND"}static get MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE(){return"CONFIG_UPDATED_IN_STORAGE"}static get TICKET_ALIAS_PANALYTICSID(){return Q.decode("cGFuZWxpc3RJZA==")}static get TICKET_ALIAS_PINSTANCEID(){return Q.decode("cGFuZWxJZA==")}static get MAX_OUT_TICKETS_QUEUE_LENGTH(){return 20}static EXCLUDE_DOMAINS_LIST(){return"EXCLUDE_DOMAINS_LIST"}static EXCLUDE_PAGES_LIST(){return"EXCLUDE_PAGES_LIST"}static get STYLES_BORDER_BANNER_CONTENT_EXTRACTED(){return"border: 6px solid blue !important;"}static get STYLES_BORDER_BANNER_URL_EXTRACTED(){return"border: 6px solid blueviolet !important;"}static get STYLES_BORDER_BANNER_FILTERED(){return"border: 6px solid orange !important;"}static get STYLES_BORDER_BANNER_SENT(){return"border: 6px solid green !important;"}static get STYLES_OUTLINE_SUCCESS_DETECT(){return"outline: green solid 6px !important;"}static get STYLES_OUTLINE_VIDEO_AD(){return"outline: rgba(42, 213, 255, 1) solid 6px !important;"}static get STYLES_OUTLINE_TEXT_AD(){return"outline: rgba(243, 143, 20, 1) solid 6px !important;"}static get STYLES_CONSOLE_LOGS_INFO(){return"background-color: rgba(108, 101, 224, 0.2); color: rgba(58, 191, 224, 1)"}static get STYLES_CONSOLE_LOGS_ERROR(){return"background-color: rgba(241, 0, 43, 0.4); color: rgba(58, 191, 224, 1)"}static get STYLES_HIDE_INSTAGRAM_FEED_AD(){return["position: absolute !important; height: 0px !important; margin: 0px !important; padding: 0px !important; overflow: hidden !important;","height: 0px !important; visibility: hidden !important;"]}static get STYLES_HIDE_ELEMENT(){return"left: -10000px !important; position: absolute !important; height: 0;"}}},6882:(y,G,Z)=>{const Q=Z(1568),W=Z(2880);y.exports=class{static get EmptyMessage(){return{posdMessageId:Q.MESSAGE_ID,posdHash:W.GenerateQuickId(),from:"",to:"",multiTo:[],type:"",content:""}}static IsValid(y){try{if(void 0!==y&&void 0!==y.posdMessageId&&void 0!==y.type&&void 0!==y.content)return y.posdMessageId===Q.MESSAGE_ID}catch(y){throw y}return!1}static IsStrictValid(y){try{if(void 0!==y&&void 0!==y.posdMessageId&&void 0!==y.from&&void 0!==y.to&&void 0!==y.type&&void 0!==y.content)return y.posdMessageId===Q.MESSAGE_ID}catch(y){throw y}return!1}}},533:(y,G,Z)=>{const Q=Z(1568);y.exports=class{constructor(){}getStylesByElementsBisId(y){let G={};return this.addStylesForNode(y,G),y.querySelectorAll("*").forEach((y=>{this.addStylesForNode(y,G)})),G}addStylesForNode(y,G){let Z=this.getStyles(y);G[y.getAttribute(Q.ATTRIBUTE_BIS_ELEMENT_ID)]=Z}getStyles(y){let G=window.getComputedStyle(y,null);return this.minimiseComputedStyles(G)}minimiseComputedStyles(y){let G={};for(let Z=0;Z<y.length;Z++){let W=y.item(Z),g=y.getPropertyValue(W);G[g]||(G[g]=[]);let z=Q.KNOWN_CSS_NAMES.indexOf(W);z>=0?G[g].push(z):G[g].push(W)}return G}}},9358:y=>{var G={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(y,Z=!0){if(TextEncoder&&atob&&btoa&&Z)return G.bytesToBase64((new TextEncoder).encode(y));let Q,W,g,z,c,A,p,K="",m=0;for(y=G._utf8_encode(y);m<y.length;)Q=y.charCodeAt(m++),W=y.charCodeAt(m++),g=y.charCodeAt(m++),z=Q>>2,c=(3&Q)<<4|W>>4,A=(15&W)<<2|g>>6,p=63&g,isNaN(W)?A=p=64:isNaN(g)&&(p=64),K=K+this._keyStr.charAt(z)+this._keyStr.charAt(c)+this._keyStr.charAt(A)+this._keyStr.charAt(p);return K},decode:function(y,Z=!0){if("{"===y[0])return y;if(TextDecoder&&atob&&btoa&&Z)return(new TextDecoder).decode(G.base64ToBytes(y));let Q,W,g,z,c,A,p,K="",m=0;for(y=y.replace(/[^A-Za-z0-9\+\/\=]/g,"");m<y.length;)z=this._keyStr.indexOf(y.charAt(m++)),c=this._keyStr.indexOf(y.charAt(m++)),A=this._keyStr.indexOf(y.charAt(m++)),p=this._keyStr.indexOf(y.charAt(m++)),Q=z<<2|c>>4,W=(15&c)<<4|A>>2,g=(3&A)<<6|p,K+=String.fromCharCode(Q),64!=A&&(K+=String.fromCharCode(W)),64!=p&&(K+=String.fromCharCode(g));return K=G._utf8_decode(K),K},_utf8_encode:function(y){y=y.replace(/\r\n/g,"\n");let G="";for(let Z=0;Z<y.length;Z++){let Q=y.charCodeAt(Z);Q<128?G+=String.fromCharCode(Q):Q>127&&Q<2048?(G+=String.fromCharCode(Q>>6|192),G+=String.fromCharCode(63&Q|128)):(G+=String.fromCharCode(Q>>12|224),G+=String.fromCharCode(Q>>6&63|128),G+=String.fromCharCode(63&Q|128))}return G},_utf8_decode:function(y){let G="",Z=0,Q=0,W=0,g=0;for(;Z<y.length;)Q=y.charCodeAt(Z),Q<128?(G+=String.fromCharCode(Q),Z++):Q>191&&Q<224?(W=y.charCodeAt(Z+1),G+=String.fromCharCode((31&Q)<<6|63&W),Z+=2):(W=y.charCodeAt(Z+1),g=y.charCodeAt(Z+2),G+=String.fromCharCode((15&Q)<<12|(63&W)<<6|63&g),Z+=3);return G},base64ToBytes:function(y){const G=atob(y);return Uint8Array.from(G,(y=>y.codePointAt(0)))},bytesToBase64:function(y){const G=Array.from(y,(y=>String.fromCodePoint(y))).join("");return btoa(G)}};y.exports=G}},G={};function Z(Q){var W=G[Q];if(void 0!==W)return W.exports;var g=G[Q]={exports:{}};return y[Q](g,g.exports,Z),g.exports}Z.n=y=>{var G=y&&y.__esModule?()=>y.default:()=>y;return Z.d(G,{a:G}),G},Z.d=(y,G)=>{for(var Q in G)Z.o(G,Q)&&!Z.o(y,Q)&&Object.defineProperty(y,Q,{enumerable:!0,get:G[Q]})},Z.o=(y,G)=>Object.prototype.hasOwnProperty.call(y,G),(()=>{"use strict";Z(7452);const y=Z(1568),G=Z(3129),Q=Z(3870),W=Z(2880);if(self===top){(new G).Init()}else if(W.CheckDocumentReadyState(y.DOCUMENT_READYSTATE_LOADING))document.addEventListener("DOMContentLoaded",(()=>{(new Q).Init()}));else if(W.CheckDocumentReadyState(y.DOCUMENT_READYSTATE_INTERACTIVE)||W.CheckDocumentReadyState(y.DOCUMENT_READYSTATE_COMPLETE)){(new Q).Init()}})()})();